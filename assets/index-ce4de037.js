import{j as n,r as x,a as Ee}from"./node_modules/react-b3c806cb.js";import{c as Kn}from"./node_modules/react-dom-25528ff3.js";import{L as Yn,H as zn}from"./node_modules/react-router-dom-49feb913.js";import{c as M}from"./node_modules/classnames-2d9bdd72.js";import{c as Zn,u as Xn,a as Qn,b as Jn,d as W,e as ea,f as ta,W as na,g as aa}from"./node_modules/wagmi-f02c39e5.js";import{p as ia,I as sa,q as ra,r as oa,t as pa}from"./node_modules/@wagmi-8c43cfc8.js";import{U as la}from"./node_modules/@uniswap-19584686.js";import{L as ua}from"./node_modules/@lyrafinance-6410b6f9.js";import"./node_modules/cross-fetch-0cb7f003.js";import{G as da,W as ya,C as K,B as Q,H as Vt,I as Kt}from"./node_modules/@ethersproject-29029959.js";import{i as ae,u as je}from"./node_modules/swr-55b31238.js";import{Q as ft,k as ca,h as ma}from"./node_modules/react-toastify-2bbaac58.js";import{S as Ta,c as fa}from"./node_modules/react-select-c36f4286.js";import{W as ba}from"./node_modules/react-tooltip-12f64ada.js";import{b as Ye,O as ha,a as ga,d as xa,e as Be,f as Ca}from"./node_modules/react-router-361d4896.js";import{u as _a,a as ka,b as bt,c as ht}from"./node_modules/react-use-4c2d27be.js";import{R as gt}from"./node_modules/react-modal-01aa4059.js";import{I as va}from"./node_modules/react-icons-f4e20589.js";import{u as xt}from"./node_modules/ethers-2358cd5f.js";import{f as Yt}from"./node_modules/date-fns-8fa817a4.js";import{A as Sa,a as wa}from"./node_modules/@szhsin-4ef2fab2.js";import{r as Pa}from"./node_modules/swiper-4105a6d8.js";import{S as Aa}from"./node_modules/rc-slider-6e770a8f.js";import{R as Da,A as Ba,X as Ma,Y as Ea,T as Ia,a as Oa,b as Lt,C as ja}from"./node_modules/recharts-434a0d15.js";import"./node_modules/scheduler-765c72db.js";import"./node_modules/@remix-run-06a34d2a.js";import"./node_modules/@tanstack-183183e8.js";import"./node_modules/use-sync-external-store-da492776.js";import"./node_modules/@noble-c8e7831c.js";import"./node_modules/eventemitter3-bb78ea90.js";import"./node_modules/zustand-bfa6df6a.js";import"./node_modules/graphql-tag-9568edd7.js";import"./node_modules/graphql-6a9502bd.js";import"./node_modules/@apollo-b7627a8e.js";import"./node_modules/optimism-96b4f7fa.js";import"./node_modules/@wry-af370e25.js";import"./node_modules/ts-invariant-d603e89e.js";import"./node_modules/zen-observable-ts-47d5f8bb.js";import"./node_modules/symbol-observable-f2ed883d.js";import"./node_modules/bech32-05567f09.js";import"./node_modules/js-sha3-24c53a34.js";import"./node_modules/bn.js-9a1e13f9.js";import"./node_modules/hash.js-4c1937cf.js";import"./node_modules/minimalistic-assert-7cc78341.js";import"./node_modules/inherits-2c87d58f.js";import"./node_modules/aes-js-da3ffc93.js";import"./node_modules/scrypt-js-1f37ac71.js";import"./node_modules/clsx-1229b3e0.js";import"./node_modules/@babel-9a9b6246.js";import"./node_modules/@emotion-21fe090a.js";import"./node_modules/hoist-non-react-statics-23d96a9a.js";import"./node_modules/react-is-e8e5dbb3.js";import"./node_modules/stylis-79144faa.js";import"./node_modules/@floating-ui-1f2e0c5a.js";import"./node_modules/use-isomorphic-layout-effect-815acb30.js";import"./node_modules/memoize-one-297ddbcb.js";import"./node_modules/@xobotyi-c2000ea3.js";import"./node_modules/prop-types-37029266.js";import"./node_modules/warning-883c7a3c.js";import"./node_modules/exenv-9baed461.js";import"./node_modules/react-lifecycles-compat-b033b73b.js";import"./node_modules/react-transition-state-c9729633.js";import"./node_modules/rc-util-0a69e361.js";import"./node_modules/react-resize-detector-bae69e67.js";import"./node_modules/lodash-77560e0f.js";import"./node_modules/react-smooth-e306ac43.js";import"./node_modules/fast-equals-a0711cdd.js";import"./node_modules/victory-vendor-5e3e398c.js";import"./node_modules/d3-scale-4cce9527.js";import"./node_modules/internmap-7949acc8.js";import"./node_modules/d3-array-7d9b19f9.js";import"./node_modules/d3-time-format-aa787c71.js";import"./node_modules/d3-time-9ce187c0.js";import"./node_modules/d3-interpolate-8fa1f6ff.js";import"./node_modules/d3-color-6502c434.js";import"./node_modules/d3-format-ffdb8652.js";import"./node_modules/recharts-scale-170b47f7.js";import"./node_modules/decimal.js-light-6fe16ef2.js";import"./node_modules/d3-shape-9e788a4f.js";import"./node_modules/d3-path-41c4cb36.js";import"./node_modules/reduce-css-calc-99c9136f.js";import"./node_modules/css-unit-converter-9e08bb2c.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function a(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=a(s);fetch(s.href,r)}})();const Fa="/sf_draft/assets/Logo-258738bb.svg",zt=({className:e})=>n.jsx("div",{className:M("Logo",e),children:n.jsx("a",{className:"Logo__link",href:"/index.html",children:n.jsx("img",{src:Fa,alt:"Sharwa.Finance"})})});const Ct=({className:e,links:t,type:a})=>{const i=M(e,a&&`Links_${a}`);return n.jsx("div",{className:M("Links",i),children:t.map((s,r)=>{const o=M("Links__item",s.isActive&&"active");return n.jsx(Yn,{to:s.to,className:o,disabled:s.isDisabled,onClick:s.isDisabled&&(l=>l.preventDefault()),children:s.name},s.to??r)})})};const Zt=e=>{const[t,a]=x.useState(!1),i=x.useCallback(()=>{document.removeEventListener("click",i),a(!1),e&&e()},[]);return{isOpen:t,openPopup:()=>{t||(a(!0),setTimeout(()=>{document.addEventListener("click",i)},10))},closePopup:i}},La="/sf_draft/assets/wallet-fce3adf9.svg",Na="/sf_draft/assets/link-c9833cec.svg",Ra="/sf_draft/assets/cross_white-42eb5050.svg",Ua="/sf_draft/assets/Arbitrum-299bccbf.svg",Ha="/sf_draft/assets/Arbitrum-299bccbf.svg",ue=42161,Fe=10,_t=[ue],kt={[ue]:{name:"Arbitrum",icon:Ua},[Fe]:{name:"Optimism",icon:Ha,isDisabled:!0}},$a=[{inputs:[{internalType:"address",name:"_exchanger",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"buildID",type:"uint256"},{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"productType",type:"uint256"}],name:"CreateBuild",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"allApprove",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"address",name:"moduleAddress",type:"address"},{internalType:"string",name:"name",type:"string"}],internalType:"struct TxBuilder.Module[]",name:"moduleArray",type:"tuple[]"},{internalType:"bytes[]",name:"parametersArray",type:"bytes[]"},{internalType:"bytes[]",name:"swapDataArray",type:"bytes[]"},{internalType:"uint256",name:"productType",type:"uint256"}],name:"consolidationOfTransactions",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"exchanger",outputs:[{internalType:"contract Exchanger",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"module",outputs:[{internalType:"address",name:"moduleAddress",type:"address"},{internalType:"string",name:"name",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"nextBuildID",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"exchangerAddress",type:"address"}],name:"setExchanger",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"},{components:[{internalType:"address",name:"moduleAddress",type:"address"},{internalType:"string",name:"name",type:"string"}],internalType:"struct TxBuilder.Module",name:"modData",type:"tuple"}],name:"setModule",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address",name:"user",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdrawERC20",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdrawETH",outputs:[],stateMutability:"nonpayable",type:"function"}],Wa=[{inputs:[{internalType:"address",name:"_lyra_eth",type:"address"},{internalType:"address",name:"_lyra_btc",type:"address"},{internalType:"address",name:"_operationalTreasury",type:"address"},{internalType:"address",name:"_lyra_ethErc721",type:"address"},{internalType:"address",name:"_lyra_btcErc721",type:"address"},{internalType:"address",name:"_hegicErc721",type:"address"},{internalType:"address",name:"_usdc",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"buildID",type:"uint256"},{indexed:!1,internalType:"uint256",name:"tokenID",type:"uint256"},{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"ClosePositionByHegic",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"buildID",type:"uint256"},{indexed:!1,internalType:"uint256",name:"strikeId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"positionId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"iterations",type:"uint256"},{indexed:!1,internalType:"enum ILyra.OptionType",name:"optionType",type:"uint8"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"setCollateralTo",type:"uint256"},{indexed:!1,internalType:"uint256",name:"minTotalCost",type:"uint256"},{indexed:!1,internalType:"uint256",name:"maxTotalCost",type:"uint256"},{indexed:!1,internalType:"address",name:"referrer",type:"address"}],name:"ClosePositionByLyra",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"buildID",type:"uint256"},{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"productType",type:"uint256"}],name:"CreateBuild",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[],name:"allApprove",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"enum BaseOptionBuilder.ProtocolType[]",name:"protocolsArrays",type:"uint8[]"},{internalType:"bytes[]",name:"parametersArray",type:"bytes[]"},{internalType:"uint256",name:"productType",type:"uint256"}],name:"consolidationOfTransactions",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes",name:"paramData",type:"bytes"}],name:"decodeFromHegic",outputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"positionID",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"bytes",name:"paramData",type:"bytes"}],name:"decodeFromLyra",outputs:[{internalType:"address",name:"account",type:"address"},{components:[{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"iterations",type:"uint256"},{internalType:"enum ILyra.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"setCollateralTo",type:"uint256"},{internalType:"uint256",name:"minTotalCost",type:"uint256"},{internalType:"uint256",name:"maxTotalCost",type:"uint256"},{internalType:"address",name:"referrer",type:"address"}],internalType:"struct ILyra.TradeInputParameters",name:"params",type:"tuple"},{internalType:"uint256",name:"premium",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"positionID",type:"uint256"}],name:"encodeFromHegic",outputs:[{internalType:"bytes",name:"paramData",type:"bytes"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{components:[{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"iterations",type:"uint256"},{internalType:"enum ILyra.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"setCollateralTo",type:"uint256"},{internalType:"uint256",name:"minTotalCost",type:"uint256"},{internalType:"uint256",name:"maxTotalCost",type:"uint256"},{internalType:"address",name:"referrer",type:"address"}],internalType:"struct ILyra.TradeInputParameters",name:"params",type:"tuple"},{internalType:"uint256",name:"premium",type:"uint256"}],name:"encodeFromLyra",outputs:[{internalType:"bytes",name:"paramData",type:"bytes"}],stateMutability:"pure",type:"function"},{inputs:[],name:"hegicErc721",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"lyra_btc",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"lyra_btcErc721",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"lyra_eth",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"lyra_ethErc721",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"nextBuildID",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bytes",name:"",type:"bytes"}],name:"onERC721Received",outputs:[{internalType:"bytes4",name:"",type:"bytes4"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"operationalTreasury",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"usdc",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"}],qa=[{inputs:[{internalType:"address",name:"_optionMarket",type:"address"},{internalType:"address",name:"_optionToken",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"buildID",type:"uint256"},{indexed:!1,internalType:"uint256",name:"strikeId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"positionId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"iterations",type:"uint256"},{indexed:!1,internalType:"enum IOptionMarket.OptionType",name:"optionType",type:"uint8"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"setCollateralTo",type:"uint256"},{indexed:!1,internalType:"uint256",name:"minTotalCost",type:"uint256"},{indexed:!1,internalType:"uint256",name:"maxTotalCost",type:"uint256"},{indexed:!1,internalType:"address",name:"referrer",type:"address"},{indexed:!1,internalType:"uint256",name:"tokenID",type:"uint256"}],name:"OpenPositionByLyra",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[],name:"allApprove",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes",name:"parameters",type:"bytes"}],name:"calculateAmount",outputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"paramData",type:"bytes"}],name:"decodeFromLyra",outputs:[{components:[{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"iterations",type:"uint256"},{internalType:"enum IOptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"setCollateralTo",type:"uint256"},{internalType:"uint256",name:"minTotalCost",type:"uint256"},{internalType:"uint256",name:"maxTotalCost",type:"uint256"},{internalType:"address",name:"referrer",type:"address"}],internalType:"struct IOptionMarket.TradeInputParameters",name:"params",type:"tuple"}],stateMutability:"pure",type:"function"},{inputs:[{components:[{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"iterations",type:"uint256"},{internalType:"enum IOptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"setCollateralTo",type:"uint256"},{internalType:"uint256",name:"minTotalCost",type:"uint256"},{internalType:"uint256",name:"maxTotalCost",type:"uint256"},{internalType:"address",name:"referrer",type:"address"}],internalType:"struct IOptionMarket.TradeInputParameters",name:"params",type:"tuple"}],name:"encodeFromLyra",outputs:[{internalType:"bytes",name:"paramData",type:"bytes"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bytes",name:"",type:"bytes"}],name:"onERC721Received",outputs:[{internalType:"bytes4",name:"",type:"bytes4"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"optionMarket",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"optionToken",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"parametersArray",type:"bytes"},{internalType:"uint256",name:"buildID",type:"uint256"},{internalType:"address",name:"user",type:"address"}],name:"processTx",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"}],Ga=[{inputs:[{internalType:"address",name:"_optionMarket",type:"address"},{internalType:"address",name:"_optionToken",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"buildID",type:"uint256"},{indexed:!1,internalType:"uint256",name:"strikeId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"positionId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"iterations",type:"uint256"},{indexed:!1,internalType:"enum IOptionMarket.OptionType",name:"optionType",type:"uint8"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"setCollateralTo",type:"uint256"},{indexed:!1,internalType:"uint256",name:"minTotalCost",type:"uint256"},{indexed:!1,internalType:"uint256",name:"maxTotalCost",type:"uint256"},{indexed:!1,internalType:"address",name:"referrer",type:"address"},{indexed:!1,internalType:"uint256",name:"tokenID",type:"uint256"}],name:"OpenPositionByLyra",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[],name:"allApprove",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes",name:"parameters",type:"bytes"}],name:"calculateAmount",outputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"paramData",type:"bytes"}],name:"decodeFromLyra",outputs:[{components:[{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"iterations",type:"uint256"},{internalType:"enum IOptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"setCollateralTo",type:"uint256"},{internalType:"uint256",name:"minTotalCost",type:"uint256"},{internalType:"uint256",name:"maxTotalCost",type:"uint256"},{internalType:"address",name:"referrer",type:"address"}],internalType:"struct IOptionMarket.TradeInputParameters",name:"params",type:"tuple"}],stateMutability:"pure",type:"function"},{inputs:[{components:[{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"iterations",type:"uint256"},{internalType:"enum IOptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"setCollateralTo",type:"uint256"},{internalType:"uint256",name:"minTotalCost",type:"uint256"},{internalType:"uint256",name:"maxTotalCost",type:"uint256"},{internalType:"address",name:"referrer",type:"address"}],internalType:"struct IOptionMarket.TradeInputParameters",name:"params",type:"tuple"}],name:"encodeFromLyra",outputs:[{internalType:"bytes",name:"paramData",type:"bytes"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bytes",name:"",type:"bytes"}],name:"onERC721Received",outputs:[{internalType:"bytes4",name:"",type:"bytes4"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"optionMarket",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"optionToken",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"parametersArray",type:"bytes"},{internalType:"uint256",name:"buildID",type:"uint256"},{internalType:"address",name:"user",type:"address"}],name:"processTx",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"}],Va=[{inputs:[{internalType:"address",name:"_operationalTreasury",type:"address"},{internalType:"address",name:"_hegicErc721",type:"address"},{internalType:"address",name:"_usdc",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"buildID",type:"uint256"},{indexed:!1,internalType:"uint256",name:"tokenID",type:"uint256"},{indexed:!1,internalType:"address",name:"strategy",type:"address"},{indexed:!1,internalType:"address",name:"holder",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"period",type:"uint256"},{indexed:!1,internalType:"uint256",name:"premuim",type:"uint256"}],name:"OpenPositionByHegic",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[],name:"allApprove",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes",name:"parameters",type:"bytes"}],name:"calculateAmount",outputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"paramData",type:"bytes"}],name:"decodeFromHegic",outputs:[{internalType:"contract IHegicStrategy",name:"strategy",type:"address"},{internalType:"address",name:"holder",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"period",type:"uint256"},{internalType:"uint256",name:"maxTotalCost",type:"uint256"},{internalType:"bytes[]",name:"additional",type:"bytes[]"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"contract IHegicStrategy",name:"strategy",type:"address"},{internalType:"address",name:"holder",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"period",type:"uint256"},{internalType:"uint256",name:"maxTotalCost",type:"uint256"},{internalType:"bytes[]",name:"additional",type:"bytes[]"}],name:"encodeFromHegic",outputs:[{internalType:"bytes",name:"paramData",type:"bytes"}],stateMutability:"pure",type:"function"},{inputs:[],name:"hegicErc721",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bytes",name:"",type:"bytes"}],name:"onERC721Received",outputs:[{internalType:"bytes4",name:"",type:"bytes4"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"operationalTreasury",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"parametersArray",type:"bytes"},{internalType:"uint256",name:"buildID",type:"uint256"},{internalType:"address",name:"user",type:"address"}],name:"processTx",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"usdc",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"}],Ka=[{inputs:[{internalType:"address",name:"_erc721Address",type:"address"},{internalType:"address",name:"_operationalTreasury",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"TakeProfitDeleted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"TakeProfitExecuted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"takeProfitPrice",type:"uint256"},{indexed:!1,internalType:"enum TakeProfit.TakeType",name:"takeType",type:"uint8"}],name:"TakeProfitSet",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"newTakeProfitPrice",type:"uint256"},{indexed:!1,internalType:"enum TakeProfit.TakeType",name:"newTakeType",type:"uint8"}],name:"TakeProfitUpdated",type:"event"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"checkTakeProfit",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"commissionSize",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"deleteTakeProfit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"erc721Contract",outputs:[{internalType:"contract IERC721",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"executeTakeProfit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getActiveTakeCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getCurrentPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getExpirationTime",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getPayOffAmount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"idTokenToIndexToken",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"indexTokenToTokenId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxActiveTakes",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"operationalTreasury",outputs:[{internalType:"contract IOperationalTreasury",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newCommissionSize",type:"uint256"}],name:"setCommissionSize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newMaxActiveTakes",type:"uint256"}],name:"setMaxActiveTakes",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"takeProfitPrice",type:"uint256"},{internalType:"enum TakeProfit.TakeType",name:"takeType",type:"uint8"}],name:"setTakeProfit",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"tokenIdToTokenInfo",outputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"takeProfitPrice",type:"uint256"},{internalType:"uint256",name:"expirationTime",type:"uint256"},{internalType:"address",name:"owner",type:"address"},{internalType:"enum TakeProfit.TakeType",name:"takeType",type:"uint8"},{internalType:"uint256",name:"commissionPaid",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"newTakeProfitPrice",type:"uint256"},{internalType:"enum TakeProfit.TakeType",name:"newTakeType",type:"uint8"}],name:"updateTakeProfit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"withdrawProfit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"withdrawableBalance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],Ya=[{inputs:[{internalType:"address",name:"_priceProvider",type:"address"},{internalType:"address",name:"_optionMarket",type:"address"},{internalType:"address",name:"_optionToken",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"StopOrderDeleted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"StopOrderExecuted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"StopOrderIssue",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"stopOrderPrice",type:"uint256"},{indexed:!1,internalType:"enum StopOrder.OrderType",name:"stopOrderType",type:"uint8"}],name:"StopOrderSet",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"newStopOrderPrice",type:"uint256"},{indexed:!1,internalType:"enum StopOrder.OrderType",name:"newStopOrderType",type:"uint8"}],name:"StopOrderUpdated",type:"event"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"checkExpire",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"checkStopOrder",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"commissionSize",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"deleteStopOrder",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"executeStopOrder",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getActiveStopCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getCurrentPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"data",type:"bytes"}],name:"getFirstFourBytes",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"idTokenToIndexToken",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"indexTokenToTokenId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxActiveStopOrders",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"optionMarket",outputs:[{internalType:"contract IOptionMarket",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"optionToken",outputs:[{internalType:"contract IOptionToken",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"priceProvider",outputs:[{internalType:"contract AggregatorV3Interface",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"rewardAddress",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"newCommissionSize",type:"uint256"}],name:"setCommissionSize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newMaxActiveStopOrders",type:"uint256"}],name:"setMaxActiveStopOrders",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newRewardAddress",type:"address"}],name:"setRewardAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"stopOrderPrice",type:"uint256"},{internalType:"enum StopOrder.OrderType",name:"stopOrderType",type:"uint8"}],name:"setStopOrder",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"tokenIdToTokenInfo",outputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"stopOrderPrice",type:"uint256"},{internalType:"uint256",name:"expirationTime",type:"uint256"},{internalType:"address",name:"owner",type:"address"},{internalType:"enum StopOrder.OrderType",name:"stopOrderType",type:"uint8"},{internalType:"uint256",name:"commissionPaid",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"newStopOrderPrice",type:"uint256"},{internalType:"enum StopOrder.OrderType",name:"newStopOrderType",type:"uint8"}],name:"updateStopOrder",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"withdrawProfit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"withdrawableBalance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],za=[{inputs:[{internalType:"address",name:"_priceProvider",type:"address"},{internalType:"address",name:"_optionMarket",type:"address"},{internalType:"address",name:"_optionToken",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"StopOrderDeleted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"StopOrderExecuted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"StopOrderIssue",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"stopOrderPrice",type:"uint256"},{indexed:!1,internalType:"enum StopOrder.OrderType",name:"stopOrderType",type:"uint8"}],name:"StopOrderSet",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"newStopOrderPrice",type:"uint256"},{indexed:!1,internalType:"enum StopOrder.OrderType",name:"newStopOrderType",type:"uint8"}],name:"StopOrderUpdated",type:"event"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"checkExpire",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"checkStopOrder",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"commissionSize",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"deleteStopOrder",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"executeStopOrder",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getActiveStopCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getCurrentPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"data",type:"bytes"}],name:"getFirstFourBytes",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"idTokenToIndexToken",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"indexTokenToTokenId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxActiveStopOrders",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"optionMarket",outputs:[{internalType:"contract IOptionMarket",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"optionToken",outputs:[{internalType:"contract IOptionToken",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"priceProvider",outputs:[{internalType:"contract AggregatorV3Interface",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"rewardAddress",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"newCommissionSize",type:"uint256"}],name:"setCommissionSize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newMaxActiveStopOrders",type:"uint256"}],name:"setMaxActiveStopOrders",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newRewardAddress",type:"address"}],name:"setRewardAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"stopOrderPrice",type:"uint256"},{internalType:"enum StopOrder.OrderType",name:"stopOrderType",type:"uint8"}],name:"setStopOrder",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"tokenIdToTokenInfo",outputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"stopOrderPrice",type:"uint256"},{internalType:"uint256",name:"expirationTime",type:"uint256"},{internalType:"address",name:"owner",type:"address"},{internalType:"enum StopOrder.OrderType",name:"stopOrderType",type:"uint8"},{internalType:"uint256",name:"commissionPaid",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"newStopOrderPrice",type:"uint256"},{internalType:"enum StopOrder.OrderType",name:"newStopOrderType",type:"uint8"}],name:"updateStopOrder",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"withdrawProfit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"withdrawableBalance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],Za=[{inputs:[{internalType:"address",name:"_swapRouter",type:"address"},{internalType:"address",name:"_roleManager",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[{internalType:"bytes",name:"swapData",type:"bytes"}],name:"calculateMsgValue",outputs:[{internalType:"uint256",name:"value",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"bytes[]",name:"swapDataArray",type:"bytes[]"},{internalType:"uint256",name:"msgValue",type:"uint256"}],name:"checkMsgValue",outputs:[],stateMutability:"pure",type:"function"},{inputs:[{internalType:"bytes",name:"paramData",type:"bytes"}],name:"decodeFromExchange",outputs:[{components:[{internalType:"bytes",name:"path",type:"bytes"},{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOutMinimum",type:"uint256"},{internalType:"bool",name:"isETH",type:"bool"},{internalType:"bool",name:"swap",type:"bool"}],internalType:"struct Exchanger.ExchangeData",name:"data",type:"tuple"}],stateMutability:"pure",type:"function"},{inputs:[{components:[{internalType:"bytes",name:"path",type:"bytes"},{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOutMinimum",type:"uint256"},{internalType:"bool",name:"isETH",type:"bool"},{internalType:"bool",name:"swap",type:"bool"}],internalType:"struct Exchanger.ExchangeData",name:"data",type:"tuple"}],name:"encodeFromExchange",outputs:[{internalType:"bytes",name:"paramData",type:"bytes"}],stateMutability:"pure",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"roleManager",outputs:[{internalType:"contract RoleManager",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"data",type:"bytes"},{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"}],name:"swap",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"swapRouter",outputs:[{internalType:"contract ISwapRouter",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"}],Xa=[{inputs:[{internalType:"contract IERC20",name:"_token",type:"address"},{internalType:"contract IPositionsManager",name:"_manager",type:"address"},{internalType:"uint256",name:"_maxLockupPeriod",type:"uint256"},{internalType:"contract ICoverPool",name:"_coverPool",type:"address"},{internalType:"uint256",name:"_benchmark",type:"uint256"},{internalType:"contract IHegicStrategy[]",name:"initialStrategies",type:"address[]"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"id",type:"uint256"}],name:"Expired",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"id",type:"uint256"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Paid",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Replenished",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IHegicStrategy",name:"",type:"address"}],name:"acceptedStrategy",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IHegicStrategy",name:"s",type:"address"}],name:"addStrategy",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"benchmark",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IHegicStrategy",name:"strategy",type:"address"},{internalType:"address",name:"holder",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"period",type:"uint256"},{internalType:"bytes[]",name:"additional",type:"bytes[]"}],name:"buy",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IHegicStrategy",name:"s",type:"address"}],name:"connectStrategy",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"coverPool",outputs:[{internalType:"contract ICoverPool",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IHegicStrategy",name:"",type:"address"}],name:"lockedByStrategy",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"lockedLiquidity",outputs:[{internalType:"enum IOperationalTreasury.LockedLiquidityState",name:"state",type:"uint8"},{internalType:"contract IHegicStrategy",name:"strategy",type:"address"},{internalType:"uint128",name:"negativepnl",type:"uint128"},{internalType:"uint128",name:"positivepnl",type:"uint128"},{internalType:"uint32",name:"expiration",type:"uint32"}],stateMutability:"view",type:"function"},{inputs:[],name:"lockedPremium",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"manager",outputs:[{internalType:"contract IPositionsManager",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxLockupPeriod",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IHegicStrategy",name:"",type:"address"}],name:"mayBeAcceptedAtEpoch",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"positionID",type:"uint256"},{internalType:"address",name:"account",type:"address"}],name:"payOff",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"replenish",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"value",type:"uint256"}],name:"setBenchmark",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"contract IERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalBalance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalLocked",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"lockedLiquidityID",type:"uint256"}],name:"unlock",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"}],Qa=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"HEGIC_POOL_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"holder",type:"address"}],name:"createOptionFor",outputs:[{internalType:"uint256",name:"id",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"isApprovedOrOwner",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"nextTokenId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IERC721Metadata",name:"_uriBuilder",type:"address"}],name:"setURIBuilder",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"tokenPool",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"uri",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"uriBuilder",outputs:[{internalType:"contract IERC721Metadata",name:"",type:"address"}],stateMutability:"view",type:"function"}],Ja=[{inputs:[{internalType:"contract AggregatorV3Interface",name:"_priceProvider",type:"address"},{internalType:"contract IPremiumCalculator",name:"_pricer",type:"address"},{internalType:"uint256",name:"_limit",type:"uint256"},{internalType:"uint8",name:"_spotDecimals",type:"uint8"},{internalType:"uint16",name:"_priceScale",type:"uint16"},{internalType:"uint48[2]",name:"periodLimits",type:"uint48[2]"},{internalType:"uint48",name:"_exerciseWindowDuration",type:"uint48"},{internalType:"contract LimitController",name:"_limitController",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"id",type:"uint256"},{components:[{internalType:"uint128",name:"amount",type:"uint128"},{internalType:"uint128",name:"strike",type:"uint128"}],indexed:!1,internalType:"struct IHegicStrategy.StrategyData",name:"data",type:"tuple"},{indexed:!1,internalType:"uint256",name:"negativepnl",type:"uint256"},{indexed:!1,internalType:"uint256",name:"positivepnl",type:"uint256"},{indexed:!1,internalType:"uint256",name:"period",type:"uint256"},{indexed:!1,internalType:"bytes[]",name:"additional",type:"bytes[]"}],name:"Acquired",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"limit",type:"uint256"}],name:"SetLimit",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"period",type:"uint256"},{internalType:"bytes[]",name:"",type:"bytes[]"}],name:"calculateNegativepnlAndPositivepnl",outputs:[{internalType:"uint128",name:"negativepnl",type:"uint128"},{internalType:"uint128",name:"positivepnl",type:"uint128"}],stateMutability:"view",type:"function"},{inputs:[],name:"connect",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"id",type:"uint256"},{internalType:"address",name:"holder",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"period",type:"uint256"},{internalType:"bytes[]",name:"additional",type:"bytes[]"}],name:"create",outputs:[{internalType:"uint32",name:"expiration",type:"uint32"},{internalType:"uint256",name:"negativePNL",type:"uint256"},{internalType:"uint256",name:"positivePNL",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"exerciseWindowDuration",outputs:[{internalType:"uint48",name:"",type:"uint48"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint32",name:"period",type:"uint32"},{internalType:"bytes[]",name:"additional",type:"bytes[]"}],name:"getAvailableContracts",outputs:[{internalType:"uint256",name:"available",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getLockedByStrategy",outputs:[{internalType:"uint256",name:"amount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"positionID",type:"uint256"},{internalType:"address",name:"caller",type:"address"},{internalType:"address",name:"",type:"address"}],name:"isPayoffAvailable",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"k",outputs:[{internalType:"uint48",name:"",type:"uint48"}],stateMutability:"view",type:"function"},{inputs:[],name:"limitController",outputs:[{internalType:"contract LimitController",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"lockedLimit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxPeriod",outputs:[{internalType:"uint48",name:"",type:"uint48"}],stateMutability:"view",type:"function"},{inputs:[],name:"minPeriod",outputs:[{internalType:"uint48",name:"",type:"uint48"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"optionID",type:"uint256"}],name:"payOffAmount",outputs:[{internalType:"uint256",name:"profit",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"pool",outputs:[{internalType:"contract IOperationalTreasury",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"positionExpiration",outputs:[{internalType:"uint32",name:"",type:"uint32"}],stateMutability:"view",type:"function"},{inputs:[],name:"priceProvider",outputs:[{internalType:"contract AggregatorV3Interface",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"pricer",outputs:[{internalType:"contract IPremiumCalculator",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint48",name:"value",type:"uint48"}],name:"setK",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"value",type:"uint256"}],name:"setLimit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract LimitController",name:"value",type:"address"}],name:"setLimitController",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint48[2]",name:"periodLimits",type:"uint48[2]"}],name:"setPeriodLimits",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IPremiumCalculator",name:"value",type:"address"}],name:"setPricer",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"strategyData",outputs:[{internalType:"uint128",name:"amount",type:"uint128"},{internalType:"uint128",name:"strike",type:"uint128"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}],ei=[{inputs:[{internalType:"int256[5]",name:"initialCoefficients",type:"int256[5]"},{internalType:"contract AggregatorV3Interface",name:"_priceProvider",type:"address"},{internalType:"uint256",name:"_tokenDecimals",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256[3]",name:"values",type:"uint256[3]"}],name:"SetBorders",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"int256[5]",name:"values",type:"int256[5]"}],name:"SetCoefficients",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"int256[5]",name:"values",type:"int256[5]"}],name:"SetDiscountCall",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"int256[5]",name:"values",type:"int256[5]"}],name:"SetDiscountPut",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint8",name:"values",type:"uint8"}],name:"SetDiscountSpread",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"SetImpliedVolRate",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256[4]",name:"values",type:"uint256[4]"}],name:"SetImpliedVolRates",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"min",type:"uint256"},{indexed:!1,internalType:"uint256",name:"max",type:"uint256"}],name:"SetPeriodLimits",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"SetSettlementFeeShare",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"SetStrikePercentage",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"period",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"strike",type:"uint256"}],name:"calculatePremium",outputs:[{internalType:"uint256",name:"premium",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"coefficients",outputs:[{internalType:"int256",name:"",type:"int256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxPeriod",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"minPeriod",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"priceProvider",outputs:[{internalType:"contract AggregatorV3Interface",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"int256[5]",name:"values",type:"int256[5]"}],name:"setCoefficients",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"min",type:"uint256"},{internalType:"uint256",name:"max",type:"uint256"}],name:"setPeriodLimits",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}],ti=[{inputs:[{internalType:"string",name:"name_",type:"string"},{internalType:"string",name:"symbol_",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"bool",name:"invalidPositionId",type:"bool"},{internalType:"bool",name:"positionInactive",type:"bool"},{internalType:"bool",name:"isShort",type:"bool"}],name:"AddingCollateralToInvalidPosition",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{components:[{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"enum OptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"collateral",type:"uint256"},{internalType:"enum OptionToken.PositionState",name:"state",type:"uint8"}],internalType:"struct OptionToken.OptionPosition",name:"position",type:"tuple"},{internalType:"uint256",name:"spotPrice",type:"uint256"}],name:"AdjustmentResultsInMinimumCollateralNotBeingMet",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"}],name:"AlreadyInitialised",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"bool",name:"invalidPositionId",type:"bool"},{internalType:"bool",name:"positionInactive",type:"bool"},{internalType:"bool",name:"strikeMismatch",type:"bool"},{internalType:"bool",name:"optionTypeMismatch",type:"bool"}],name:"CannotAdjustInvalidPosition",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"}],name:"CannotClosePositionZero",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"}],name:"CannotOpenZeroAmount",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"setCollateralTo",type:"uint256"}],name:"FullyClosingWithNonZeroSetCollateral",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{components:[{internalType:"uint256",name:"penaltyRatio",type:"uint256"},{internalType:"uint256",name:"liquidatorFeeRatio",type:"uint256"},{internalType:"uint256",name:"smFeeRatio",type:"uint256"},{internalType:"uint256",name:"minLiquidationFee",type:"uint256"}],internalType:"struct OptionToken.PartialCollateralParameters",name:"partialCollatParams",type:"tuple"}],name:"InvalidPartialCollateralParameters",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{internalType:"uint256",name:"originalPositionAmount",type:"uint256"},{internalType:"uint256",name:"splitAmount",type:"uint256"}],name:"InvalidSplitAmount",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{internalType:"address",name:"caller",type:"address"},{internalType:"uint256",name:"positionId",type:"uint256"}],name:"MergingUnapprovedPosition",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"}],name:"MustMergeTwoOrMorePositions",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{internalType:"address",name:"caller",type:"address"},{internalType:"address",name:"nominatedOwner",type:"address"}],name:"OnlyNominatedOwner",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{internalType:"address",name:"caller",type:"address"},{internalType:"address",name:"optionMarket",type:"address"}],name:"OnlyOptionMarket",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{internalType:"address",name:"caller",type:"address"},{internalType:"address",name:"owner",type:"address"}],name:"OnlyOwner",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"address",name:"trader",type:"address"},{internalType:"address",name:"owner",type:"address"}],name:"OnlyOwnerCanAdjustPosition",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{internalType:"address",name:"caller",type:"address"},{internalType:"address",name:"shortCollateral",type:"address"}],name:"OnlyShortCollateral",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{components:[{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"enum OptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"collateral",type:"uint256"},{internalType:"enum OptionToken.PositionState",name:"state",type:"uint8"}],internalType:"struct OptionToken.OptionPosition",name:"firstPosition",type:"tuple"},{components:[{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"enum OptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"collateral",type:"uint256"},{internalType:"enum OptionToken.PositionState",name:"state",type:"uint8"}],internalType:"struct OptionToken.OptionPosition",name:"nextPosition",type:"tuple"},{internalType:"bool",name:"ownerMismatch",type:"bool"},{internalType:"bool",name:"strikeMismatch",type:"bool"},{internalType:"bool",name:"optionTypeMismatch",type:"bool"},{internalType:"bool",name:"duplicatePositionId",type:"bool"}],name:"PositionMismatchWhenMerging",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{components:[{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"enum OptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"collateral",type:"uint256"},{internalType:"enum OptionToken.PositionState",name:"state",type:"uint8"}],internalType:"struct OptionToken.OptionPosition",name:"position",type:"tuple"},{internalType:"uint256",name:"spotPrice",type:"uint256"}],name:"PositionNotLiquidatable",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{components:[{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"enum OptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"collateral",type:"uint256"},{internalType:"enum OptionToken.PositionState",name:"state",type:"uint8"}],internalType:"struct OptionToken.OptionPosition",name:"position",type:"tuple"},{internalType:"uint256",name:"spotPrice",type:"uint256"}],name:"ResultingNewPositionLiquidatable",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{components:[{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"enum OptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"collateral",type:"uint256"},{internalType:"enum OptionToken.PositionState",name:"state",type:"uint8"}],internalType:"struct OptionToken.OptionPosition",name:"position",type:"tuple"},{internalType:"uint256",name:"spotPrice",type:"uint256"}],name:"ResultingOriginalPositionLiquidatable",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{internalType:"address",name:"caller",type:"address"},{internalType:"uint256",name:"positionId",type:"uint256"}],name:"SplittingUnapprovedPosition",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{internalType:"uint256",name:"strikeId",type:"uint256"}],name:"StrikeIsSettled",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"oldOwner",type:"address"},{indexed:!1,internalType:"address",name:"newOwner",type:"address"}],name:"OwnerChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"newOwner",type:"address"}],name:"OwnerNominated",type:"event"},{anonymous:!1,inputs:[{components:[{internalType:"uint256",name:"penaltyRatio",type:"uint256"},{internalType:"uint256",name:"liquidatorFeeRatio",type:"uint256"},{internalType:"uint256",name:"smFeeRatio",type:"uint256"},{internalType:"uint256",name:"minLiquidationFee",type:"uint256"}],indexed:!1,internalType:"struct OptionToken.PartialCollateralParameters",name:"partialCollateralParams",type:"tuple"}],name:"PartialCollateralParamsSet",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"positionId",type:"uint256"},{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"enum OptionToken.PositionUpdatedType",name:"updatedType",type:"uint8"},{components:[{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"enum OptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"collateral",type:"uint256"},{internalType:"enum OptionToken.PositionState",name:"state",type:"uint8"}],indexed:!1,internalType:"struct OptionToken.OptionPosition",name:"position",type:"tuple"},{indexed:!1,internalType:"uint256",name:"timestamp",type:"uint256"}],name:"PositionUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"URI",type:"string"}],name:"URISet",type:"event"},{inputs:[],name:"acceptOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"amountCollateral",type:"uint256"}],name:"addCollateral",outputs:[{internalType:"enum OptionMarket.OptionType",name:"optionType",type:"uint8"}],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"bool",name:"isBuy",type:"bool"},{internalType:"bool",name:"isForceClose",type:"bool"},{internalType:"enum OptionMarket.TradeDirection",name:"tradeDirection",type:"uint8"},{internalType:"enum OptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"expiry",type:"uint256"},{internalType:"uint256",name:"strikePrice",type:"uint256"},{internalType:"uint256",name:"spotPrice",type:"uint256"},{components:[{internalType:"uint256",name:"freeLiquidity",type:"uint256"},{internalType:"uint256",name:"burnableLiquidity",type:"uint256"},{internalType:"uint256",name:"reservedCollatLiquidity",type:"uint256"},{internalType:"uint256",name:"pendingDeltaLiquidity",type:"uint256"},{internalType:"uint256",name:"usedDeltaLiquidity",type:"uint256"},{internalType:"uint256",name:"NAV",type:"uint256"},{internalType:"uint256",name:"longScaleFactor",type:"uint256"}],internalType:"struct LiquidityPool.Liquidity",name:"liquidity",type:"tuple"}],internalType:"struct OptionMarket.TradeParameters",name:"trade",type:"tuple"},{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"address",name:"trader",type:"address"},{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"optionCost",type:"uint256"},{internalType:"uint256",name:"setCollateralTo",type:"uint256"},{internalType:"bool",name:"isOpen",type:"bool"}],name:"adjustPosition",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"int256",name:"pendingCollateral",type:"int256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"baseURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"enum OptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"collateral",type:"uint256"},{internalType:"enum OptionToken.PositionState",name:"state",type:"uint8"}],internalType:"struct OptionToken.OptionPosition",name:"position",type:"tuple"},{internalType:"uint256",name:"expiry",type:"uint256"},{internalType:"uint256",name:"strikePrice",type:"uint256"},{internalType:"uint256",name:"spotPrice",type:"uint256"}],name:"canLiquidate",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"gwavPremium",type:"uint256"},{internalType:"uint256",name:"userPositionCollateral",type:"uint256"},{internalType:"uint256",name:"convertedMinLiquidationFee",type:"uint256"},{internalType:"uint256",name:"insolvencyMultiplier",type:"uint256"}],name:"getLiquidationFees",outputs:[{components:[{internalType:"uint256",name:"returnCollateral",type:"uint256"},{internalType:"uint256",name:"lpPremiums",type:"uint256"},{internalType:"uint256",name:"lpFee",type:"uint256"},{internalType:"uint256",name:"liquidatorFee",type:"uint256"},{internalType:"uint256",name:"smFee",type:"uint256"},{internalType:"uint256",name:"insolventAmount",type:"uint256"}],internalType:"struct OptionToken.LiquidationFees",name:"liquidationFees",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"positionId",type:"uint256"}],name:"getOptionPosition",outputs:[{components:[{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"enum OptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"collateral",type:"uint256"},{internalType:"enum OptionToken.PositionState",name:"state",type:"uint8"}],internalType:"struct OptionToken.OptionPosition",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256[]",name:"positionIds",type:"uint256[]"}],name:"getOptionPositions",outputs:[{components:[{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"enum OptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"collateral",type:"uint256"},{internalType:"enum OptionToken.PositionState",name:"state",type:"uint8"}],internalType:"struct OptionToken.OptionPosition[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"target",type:"address"}],name:"getOwnerPositions",outputs:[{components:[{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"enum OptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"collateral",type:"uint256"},{internalType:"enum OptionToken.PositionState",name:"state",type:"uint8"}],internalType:"struct OptionToken.OptionPosition[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getPartialCollatParams",outputs:[{components:[{internalType:"uint256",name:"penaltyRatio",type:"uint256"},{internalType:"uint256",name:"liquidatorFeeRatio",type:"uint256"},{internalType:"uint256",name:"smFeeRatio",type:"uint256"},{internalType:"uint256",name:"minLiquidationFee",type:"uint256"}],internalType:"struct OptionToken.PartialCollateralParameters",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"positionId",type:"uint256"}],name:"getPositionState",outputs:[{internalType:"enum OptionToken.PositionState",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"positionId",type:"uint256"}],name:"getPositionWithOwner",outputs:[{components:[{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"enum OptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"collateral",type:"uint256"},{internalType:"enum OptionToken.PositionState",name:"state",type:"uint8"},{internalType:"address",name:"owner",type:"address"}],internalType:"struct OptionToken.PositionWithOwner",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256[]",name:"positionIds",type:"uint256[]"}],name:"getPositionsWithOwner",outputs:[{components:[{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"enum OptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"collateral",type:"uint256"},{internalType:"enum OptionToken.PositionState",name:"state",type:"uint8"},{internalType:"address",name:"owner",type:"address"}],internalType:"struct OptionToken.PositionWithOwner[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract OptionMarket",name:"_optionMarket",type:"address"},{internalType:"contract OptionGreekCache",name:"_greekCache",type:"address"},{internalType:"address",name:"_shortCollateral",type:"address"},{internalType:"contract BaseExchangeAdapter",name:"_exchangeAdapter",type:"address"}],name:"init",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"positionId",type:"uint256"},{components:[{internalType:"bool",name:"isBuy",type:"bool"},{internalType:"bool",name:"isForceClose",type:"bool"},{internalType:"enum OptionMarket.TradeDirection",name:"tradeDirection",type:"uint8"},{internalType:"enum OptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"expiry",type:"uint256"},{internalType:"uint256",name:"strikePrice",type:"uint256"},{internalType:"uint256",name:"spotPrice",type:"uint256"},{components:[{internalType:"uint256",name:"freeLiquidity",type:"uint256"},{internalType:"uint256",name:"burnableLiquidity",type:"uint256"},{internalType:"uint256",name:"reservedCollatLiquidity",type:"uint256"},{internalType:"uint256",name:"pendingDeltaLiquidity",type:"uint256"},{internalType:"uint256",name:"usedDeltaLiquidity",type:"uint256"},{internalType:"uint256",name:"NAV",type:"uint256"},{internalType:"uint256",name:"longScaleFactor",type:"uint256"}],internalType:"struct LiquidityPool.Liquidity",name:"liquidity",type:"tuple"}],internalType:"struct OptionMarket.TradeParameters",name:"trade",type:"tuple"},{internalType:"uint256",name:"totalCost",type:"uint256"}],name:"liquidate",outputs:[{components:[{internalType:"uint256",name:"returnCollateral",type:"uint256"},{internalType:"uint256",name:"lpPremiums",type:"uint256"},{internalType:"uint256",name:"lpFee",type:"uint256"},{internalType:"uint256",name:"liquidatorFee",type:"uint256"},{internalType:"uint256",name:"smFee",type:"uint256"},{internalType:"uint256",name:"insolventAmount",type:"uint256"}],internalType:"struct OptionToken.LiquidationFees",name:"liquidationFees",type:"tuple"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"positionIds",type:"uint256[]"}],name:"merge",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"nextId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"}],name:"nominateNewOwner",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"nominatedOwner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"partialCollatParams",outputs:[{internalType:"uint256",name:"penaltyRatio",type:"uint256"},{internalType:"uint256",name:"liquidatorFeeRatio",type:"uint256"},{internalType:"uint256",name:"smFeeRatio",type:"uint256"},{internalType:"uint256",name:"minLiquidationFee",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"positions",outputs:[{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"enum OptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"collateral",type:"uint256"},{internalType:"enum OptionToken.PositionState",name:"state",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"uint256",name:"penaltyRatio",type:"uint256"},{internalType:"uint256",name:"liquidatorFeeRatio",type:"uint256"},{internalType:"uint256",name:"smFeeRatio",type:"uint256"},{internalType:"uint256",name:"minLiquidationFee",type:"uint256"}],internalType:"struct OptionToken.PartialCollateralParameters",name:"_partialCollatParams",type:"tuple"}],name:"setPartialCollateralParams",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"newURI",type:"string"}],name:"setURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"positionIds",type:"uint256[]"}],name:"settlePositions",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"newAmount",type:"uint256"},{internalType:"uint256",name:"newCollateral",type:"uint256"},{internalType:"address",name:"recipient",type:"address"}],name:"split",outputs:[{internalType:"uint256",name:"newPositionId",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"}],ni=[{inputs:[{internalType:"string",name:"name_",type:"string"},{internalType:"string",name:"symbol_",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"bool",name:"invalidPositionId",type:"bool"},{internalType:"bool",name:"positionInactive",type:"bool"},{internalType:"bool",name:"isShort",type:"bool"}],name:"AddingCollateralToInvalidPosition",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{components:[{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"enum OptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"collateral",type:"uint256"},{internalType:"enum OptionToken.PositionState",name:"state",type:"uint8"}],internalType:"struct OptionToken.OptionPosition",name:"position",type:"tuple"},{internalType:"uint256",name:"spotPrice",type:"uint256"}],name:"AdjustmentResultsInMinimumCollateralNotBeingMet",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"}],name:"AlreadyInitialised",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"bool",name:"invalidPositionId",type:"bool"},{internalType:"bool",name:"positionInactive",type:"bool"},{internalType:"bool",name:"strikeMismatch",type:"bool"},{internalType:"bool",name:"optionTypeMismatch",type:"bool"}],name:"CannotAdjustInvalidPosition",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"}],name:"CannotClosePositionZero",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"}],name:"CannotOpenZeroAmount",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"setCollateralTo",type:"uint256"}],name:"FullyClosingWithNonZeroSetCollateral",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{components:[{internalType:"uint256",name:"penaltyRatio",type:"uint256"},{internalType:"uint256",name:"liquidatorFeeRatio",type:"uint256"},{internalType:"uint256",name:"smFeeRatio",type:"uint256"},{internalType:"uint256",name:"minLiquidationFee",type:"uint256"}],internalType:"struct OptionToken.PartialCollateralParameters",name:"partialCollatParams",type:"tuple"}],name:"InvalidPartialCollateralParameters",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{internalType:"uint256",name:"originalPositionAmount",type:"uint256"},{internalType:"uint256",name:"splitAmount",type:"uint256"}],name:"InvalidSplitAmount",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{internalType:"address",name:"caller",type:"address"},{internalType:"uint256",name:"positionId",type:"uint256"}],name:"MergingUnapprovedPosition",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"}],name:"MustMergeTwoOrMorePositions",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{internalType:"address",name:"caller",type:"address"},{internalType:"address",name:"nominatedOwner",type:"address"}],name:"OnlyNominatedOwner",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{internalType:"address",name:"caller",type:"address"},{internalType:"address",name:"optionMarket",type:"address"}],name:"OnlyOptionMarket",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{internalType:"address",name:"caller",type:"address"},{internalType:"address",name:"owner",type:"address"}],name:"OnlyOwner",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"address",name:"trader",type:"address"},{internalType:"address",name:"owner",type:"address"}],name:"OnlyOwnerCanAdjustPosition",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{internalType:"address",name:"caller",type:"address"},{internalType:"address",name:"shortCollateral",type:"address"}],name:"OnlyShortCollateral",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{components:[{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"enum OptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"collateral",type:"uint256"},{internalType:"enum OptionToken.PositionState",name:"state",type:"uint8"}],internalType:"struct OptionToken.OptionPosition",name:"firstPosition",type:"tuple"},{components:[{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"enum OptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"collateral",type:"uint256"},{internalType:"enum OptionToken.PositionState",name:"state",type:"uint8"}],internalType:"struct OptionToken.OptionPosition",name:"nextPosition",type:"tuple"},{internalType:"bool",name:"ownerMismatch",type:"bool"},{internalType:"bool",name:"strikeMismatch",type:"bool"},{internalType:"bool",name:"optionTypeMismatch",type:"bool"},{internalType:"bool",name:"duplicatePositionId",type:"bool"}],name:"PositionMismatchWhenMerging",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{components:[{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"enum OptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"collateral",type:"uint256"},{internalType:"enum OptionToken.PositionState",name:"state",type:"uint8"}],internalType:"struct OptionToken.OptionPosition",name:"position",type:"tuple"},{internalType:"uint256",name:"spotPrice",type:"uint256"}],name:"PositionNotLiquidatable",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{components:[{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"enum OptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"collateral",type:"uint256"},{internalType:"enum OptionToken.PositionState",name:"state",type:"uint8"}],internalType:"struct OptionToken.OptionPosition",name:"position",type:"tuple"},{internalType:"uint256",name:"spotPrice",type:"uint256"}],name:"ResultingNewPositionLiquidatable",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{components:[{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"enum OptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"collateral",type:"uint256"},{internalType:"enum OptionToken.PositionState",name:"state",type:"uint8"}],internalType:"struct OptionToken.OptionPosition",name:"position",type:"tuple"},{internalType:"uint256",name:"spotPrice",type:"uint256"}],name:"ResultingOriginalPositionLiquidatable",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{internalType:"address",name:"caller",type:"address"},{internalType:"uint256",name:"positionId",type:"uint256"}],name:"SplittingUnapprovedPosition",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{internalType:"uint256",name:"strikeId",type:"uint256"}],name:"StrikeIsSettled",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"oldOwner",type:"address"},{indexed:!1,internalType:"address",name:"newOwner",type:"address"}],name:"OwnerChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"newOwner",type:"address"}],name:"OwnerNominated",type:"event"},{anonymous:!1,inputs:[{components:[{internalType:"uint256",name:"penaltyRatio",type:"uint256"},{internalType:"uint256",name:"liquidatorFeeRatio",type:"uint256"},{internalType:"uint256",name:"smFeeRatio",type:"uint256"},{internalType:"uint256",name:"minLiquidationFee",type:"uint256"}],indexed:!1,internalType:"struct OptionToken.PartialCollateralParameters",name:"partialCollateralParams",type:"tuple"}],name:"PartialCollateralParamsSet",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"positionId",type:"uint256"},{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"enum OptionToken.PositionUpdatedType",name:"updatedType",type:"uint8"},{components:[{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"enum OptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"collateral",type:"uint256"},{internalType:"enum OptionToken.PositionState",name:"state",type:"uint8"}],indexed:!1,internalType:"struct OptionToken.OptionPosition",name:"position",type:"tuple"},{indexed:!1,internalType:"uint256",name:"timestamp",type:"uint256"}],name:"PositionUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"URI",type:"string"}],name:"URISet",type:"event"},{inputs:[],name:"acceptOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"amountCollateral",type:"uint256"}],name:"addCollateral",outputs:[{internalType:"enum OptionMarket.OptionType",name:"optionType",type:"uint8"}],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"bool",name:"isBuy",type:"bool"},{internalType:"bool",name:"isForceClose",type:"bool"},{internalType:"enum OptionMarket.TradeDirection",name:"tradeDirection",type:"uint8"},{internalType:"enum OptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"expiry",type:"uint256"},{internalType:"uint256",name:"strikePrice",type:"uint256"},{internalType:"uint256",name:"spotPrice",type:"uint256"},{components:[{internalType:"uint256",name:"freeLiquidity",type:"uint256"},{internalType:"uint256",name:"burnableLiquidity",type:"uint256"},{internalType:"uint256",name:"reservedCollatLiquidity",type:"uint256"},{internalType:"uint256",name:"pendingDeltaLiquidity",type:"uint256"},{internalType:"uint256",name:"usedDeltaLiquidity",type:"uint256"},{internalType:"uint256",name:"NAV",type:"uint256"},{internalType:"uint256",name:"longScaleFactor",type:"uint256"}],internalType:"struct LiquidityPool.Liquidity",name:"liquidity",type:"tuple"}],internalType:"struct OptionMarket.TradeParameters",name:"trade",type:"tuple"},{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"address",name:"trader",type:"address"},{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"optionCost",type:"uint256"},{internalType:"uint256",name:"setCollateralTo",type:"uint256"},{internalType:"bool",name:"isOpen",type:"bool"}],name:"adjustPosition",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"int256",name:"pendingCollateral",type:"int256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"baseURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"enum OptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"collateral",type:"uint256"},{internalType:"enum OptionToken.PositionState",name:"state",type:"uint8"}],internalType:"struct OptionToken.OptionPosition",name:"position",type:"tuple"},{internalType:"uint256",name:"expiry",type:"uint256"},{internalType:"uint256",name:"strikePrice",type:"uint256"},{internalType:"uint256",name:"spotPrice",type:"uint256"}],name:"canLiquidate",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"gwavPremium",type:"uint256"},{internalType:"uint256",name:"userPositionCollateral",type:"uint256"},{internalType:"uint256",name:"convertedMinLiquidationFee",type:"uint256"},{internalType:"uint256",name:"insolvencyMultiplier",type:"uint256"}],name:"getLiquidationFees",outputs:[{components:[{internalType:"uint256",name:"returnCollateral",type:"uint256"},{internalType:"uint256",name:"lpPremiums",type:"uint256"},{internalType:"uint256",name:"lpFee",type:"uint256"},{internalType:"uint256",name:"liquidatorFee",type:"uint256"},{internalType:"uint256",name:"smFee",type:"uint256"},{internalType:"uint256",name:"insolventAmount",type:"uint256"}],internalType:"struct OptionToken.LiquidationFees",name:"liquidationFees",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"positionId",type:"uint256"}],name:"getOptionPosition",outputs:[{components:[{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"enum OptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"collateral",type:"uint256"},{internalType:"enum OptionToken.PositionState",name:"state",type:"uint8"}],internalType:"struct OptionToken.OptionPosition",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256[]",name:"positionIds",type:"uint256[]"}],name:"getOptionPositions",outputs:[{components:[{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"enum OptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"collateral",type:"uint256"},{internalType:"enum OptionToken.PositionState",name:"state",type:"uint8"}],internalType:"struct OptionToken.OptionPosition[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"target",type:"address"}],name:"getOwnerPositions",outputs:[{components:[{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"enum OptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"collateral",type:"uint256"},{internalType:"enum OptionToken.PositionState",name:"state",type:"uint8"}],internalType:"struct OptionToken.OptionPosition[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getPartialCollatParams",outputs:[{components:[{internalType:"uint256",name:"penaltyRatio",type:"uint256"},{internalType:"uint256",name:"liquidatorFeeRatio",type:"uint256"},{internalType:"uint256",name:"smFeeRatio",type:"uint256"},{internalType:"uint256",name:"minLiquidationFee",type:"uint256"}],internalType:"struct OptionToken.PartialCollateralParameters",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"positionId",type:"uint256"}],name:"getPositionState",outputs:[{internalType:"enum OptionToken.PositionState",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"positionId",type:"uint256"}],name:"getPositionWithOwner",outputs:[{components:[{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"enum OptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"collateral",type:"uint256"},{internalType:"enum OptionToken.PositionState",name:"state",type:"uint8"},{internalType:"address",name:"owner",type:"address"}],internalType:"struct OptionToken.PositionWithOwner",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256[]",name:"positionIds",type:"uint256[]"}],name:"getPositionsWithOwner",outputs:[{components:[{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"enum OptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"collateral",type:"uint256"},{internalType:"enum OptionToken.PositionState",name:"state",type:"uint8"},{internalType:"address",name:"owner",type:"address"}],internalType:"struct OptionToken.PositionWithOwner[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract OptionMarket",name:"_optionMarket",type:"address"},{internalType:"contract OptionGreekCache",name:"_greekCache",type:"address"},{internalType:"address",name:"_shortCollateral",type:"address"},{internalType:"contract BaseExchangeAdapter",name:"_exchangeAdapter",type:"address"}],name:"init",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"positionId",type:"uint256"},{components:[{internalType:"bool",name:"isBuy",type:"bool"},{internalType:"bool",name:"isForceClose",type:"bool"},{internalType:"enum OptionMarket.TradeDirection",name:"tradeDirection",type:"uint8"},{internalType:"enum OptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"expiry",type:"uint256"},{internalType:"uint256",name:"strikePrice",type:"uint256"},{internalType:"uint256",name:"spotPrice",type:"uint256"},{components:[{internalType:"uint256",name:"freeLiquidity",type:"uint256"},{internalType:"uint256",name:"burnableLiquidity",type:"uint256"},{internalType:"uint256",name:"reservedCollatLiquidity",type:"uint256"},{internalType:"uint256",name:"pendingDeltaLiquidity",type:"uint256"},{internalType:"uint256",name:"usedDeltaLiquidity",type:"uint256"},{internalType:"uint256",name:"NAV",type:"uint256"},{internalType:"uint256",name:"longScaleFactor",type:"uint256"}],internalType:"struct LiquidityPool.Liquidity",name:"liquidity",type:"tuple"}],internalType:"struct OptionMarket.TradeParameters",name:"trade",type:"tuple"},{internalType:"uint256",name:"totalCost",type:"uint256"}],name:"liquidate",outputs:[{components:[{internalType:"uint256",name:"returnCollateral",type:"uint256"},{internalType:"uint256",name:"lpPremiums",type:"uint256"},{internalType:"uint256",name:"lpFee",type:"uint256"},{internalType:"uint256",name:"liquidatorFee",type:"uint256"},{internalType:"uint256",name:"smFee",type:"uint256"},{internalType:"uint256",name:"insolventAmount",type:"uint256"}],internalType:"struct OptionToken.LiquidationFees",name:"liquidationFees",type:"tuple"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"positionIds",type:"uint256[]"}],name:"merge",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"nextId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"}],name:"nominateNewOwner",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"nominatedOwner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"partialCollatParams",outputs:[{internalType:"uint256",name:"penaltyRatio",type:"uint256"},{internalType:"uint256",name:"liquidatorFeeRatio",type:"uint256"},{internalType:"uint256",name:"smFeeRatio",type:"uint256"},{internalType:"uint256",name:"minLiquidationFee",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"positions",outputs:[{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"enum OptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"collateral",type:"uint256"},{internalType:"enum OptionToken.PositionState",name:"state",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"uint256",name:"penaltyRatio",type:"uint256"},{internalType:"uint256",name:"liquidatorFeeRatio",type:"uint256"},{internalType:"uint256",name:"smFeeRatio",type:"uint256"},{internalType:"uint256",name:"minLiquidationFee",type:"uint256"}],internalType:"struct OptionToken.PartialCollateralParameters",name:"_partialCollatParams",type:"tuple"}],name:"setPartialCollateralParams",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"newURI",type:"string"}],name:"setURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"positionIds",type:"uint256[]"}],name:"settlePositions",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"newAmount",type:"uint256"},{internalType:"uint256",name:"newCollateral",type:"uint256"},{internalType:"address",name:"recipient",type:"address"}],name:"split",outputs:[{internalType:"uint256",name:"newPositionId",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"}],ai=[{inputs:[{internalType:"address",name:"_lyraRegister",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{internalType:"uint256",name:"boardId",type:"uint256"}],name:"BoardAlreadySettled",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{internalType:"uint256",name:"boardId",type:"uint256"},{internalType:"uint256",name:"boardExpiry",type:"uint256"},{internalType:"uint256",name:"currentTime",type:"uint256"}],name:"BoardExpired",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{internalType:"uint256",name:"boardId",type:"uint256"}],name:"BoardIsFrozen",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{internalType:"enum IOptionMarket.NonZeroValues",name:"valueType",type:"uint8"}],name:"ExpectedNonZeroValue",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{internalType:"uint256",name:"strikeId",type:"uint256"}],name:"InvalidStrikeId",type:"error"},{inputs:[{internalType:"contract IOptionMarket",name:"_optionMarket",type:"address"},{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"uint256",name:"iterations",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"fullQuotes",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"},{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IOptionMarket",name:"_optionMarket",type:"address"},{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"uint256",name:"iterations",type:"uint256"},{internalType:"enum IOptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"quote",outputs:[{internalType:"uint256",name:"totalPremium",type:"uint256"},{internalType:"uint256",name:"totalFee",type:"uint256"}],stateMutability:"view",type:"function"}],ii=[{inputs:[{internalType:"string",name:"name_",type:"string"},{internalType:"string",name:"symbol_",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}],Nt=[{inputs:[{internalType:"address",name:"_aggregator",type:"address"},{internalType:"address",name:"_accessController",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"int256",name:"current",type:"int256"},{indexed:!0,internalType:"uint256",name:"roundId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"updatedAt",type:"uint256"}],name:"AnswerUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"roundId",type:"uint256"},{indexed:!0,internalType:"address",name:"startedBy",type:"address"},{indexed:!1,internalType:"uint256",name:"startedAt",type:"uint256"}],name:"NewRound",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"}],name:"OwnershipTransferRequested",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[],name:"acceptOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"accessController",outputs:[{internalType:"contract AccessControllerInterface",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"aggregator",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_aggregator",type:"address"}],name:"confirmAggregator",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"description",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_roundId",type:"uint256"}],name:"getAnswer",outputs:[{internalType:"int256",name:"",type:"int256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint80",name:"_roundId",type:"uint80"}],name:"getRoundData",outputs:[{internalType:"uint80",name:"roundId",type:"uint80"},{internalType:"int256",name:"answer",type:"int256"},{internalType:"uint256",name:"startedAt",type:"uint256"},{internalType:"uint256",name:"updatedAt",type:"uint256"},{internalType:"uint80",name:"answeredInRound",type:"uint80"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_roundId",type:"uint256"}],name:"getTimestamp",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"latestAnswer",outputs:[{internalType:"int256",name:"",type:"int256"}],stateMutability:"view",type:"function"},{inputs:[],name:"latestRound",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"latestRoundData",outputs:[{internalType:"uint80",name:"roundId",type:"uint80"},{internalType:"int256",name:"answer",type:"int256"},{internalType:"uint256",name:"startedAt",type:"uint256"},{internalType:"uint256",name:"updatedAt",type:"uint256"},{internalType:"uint80",name:"answeredInRound",type:"uint80"}],stateMutability:"view",type:"function"},{inputs:[],name:"latestTimestamp",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address payable",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint16",name:"",type:"uint16"}],name:"phaseAggregators",outputs:[{internalType:"contract AggregatorV2V3Interface",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"phaseId",outputs:[{internalType:"uint16",name:"",type:"uint16"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_aggregator",type:"address"}],name:"proposeAggregator",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"proposedAggregator",outputs:[{internalType:"contract AggregatorV2V3Interface",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint80",name:"_roundId",type:"uint80"}],name:"proposedGetRoundData",outputs:[{internalType:"uint80",name:"roundId",type:"uint80"},{internalType:"int256",name:"answer",type:"int256"},{internalType:"uint256",name:"startedAt",type:"uint256"},{internalType:"uint256",name:"updatedAt",type:"uint256"},{internalType:"uint80",name:"answeredInRound",type:"uint80"}],stateMutability:"view",type:"function"},{inputs:[],name:"proposedLatestRoundData",outputs:[{internalType:"uint80",name:"roundId",type:"uint80"},{internalType:"int256",name:"answer",type:"int256"},{internalType:"uint256",name:"startedAt",type:"uint256"},{internalType:"uint256",name:"updatedAt",type:"uint256"},{internalType:"uint80",name:"answeredInRound",type:"uint80"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_accessController",type:"address"}],name:"setController",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_to",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"version",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],fe=1e3,vt=60,Re=60,Ue=24,Xt=e=>e*Ue*Re*vt*fe,si=e=>Math.floor(e/fe/vt/Re/Ue),ze=e=>Math.floor(e/fe),ri=e=>{const t=e/fe/vt/Re,a=Math.floor(t%Ue),i=Math.floor(t/Ue),s=Math.floor(t*Re);return a===0&&i===0?`${s}m`:`${i}d:${a}h`},oi={[ue]:"tz_aYA5g8dBegbWo1l6TQEY7cKhGZCh1",[Fe]:""},te=e=>{const t=oi[e];if(!t)throw new Error(`No Alchemy api keys found for chainId ${e}`);return new da(e,t)},Qt=e=>new ua({provider:te(e)}),xe=()=>{if(!window.ethereum)throw new Error("No Ethereum provider found");return new ya(window.ethereum).getSigner()},pi="/sf_draft/assets/ETH-fe35d2b1.svg",li="/sf_draft/assets/BTC-03fbacc9.svg",ui="/sf_draft/assets/WETH-2ba67e25.svg",di="/sf_draft/assets/WBTC-f0287338.svg",Rt="/sf_draft/assets/USDC-5a7f3d86.svg",yi="/sf_draft/assets/USDT-2e53b5e9.svg",ci="/sf_draft/assets/DAI-b460716b.svg",Ze={[ue]:[{name:"Ethereum",symbol:"ETH",decimals:18,address:"0x82aF49447D8a07e3bd95BD0d56f35241523fBab1",isETH:!0,icon:pi,isSwappable:!0},{name:"Bitcoin",symbol:"BTC",decimals:8,address:"0x2f2a2543B76A4166549F7aaB2e75Bef0aefC5B0f",icon:li},{name:"Wrapped Ethereum",symbol:"WETH",decimals:18,address:"0x82aF49447D8a07e3bd95BD0d56f35241523fBab1",icon:ui,isSwappable:!0},{name:"Wrapped Bitcoin",symbol:"WBTC",decimals:8,address:"0x2f2a2543B76A4166549F7aaB2e75Bef0aefC5B0f",icon:di,isSwappable:!0},{name:"Dai",symbol:"DAI",decimals:18,address:"0xDA10009cBd5D07dd0CeCc66161FC93D7c9000da1",icon:ci,isSwappable:!0,isStable:!0},{name:"USD Coin",symbol:"USDC",decimals:6,address:"0xaf88d065e77c8cC2239327C5EDb3A432268e5831",icon:Rt,isSwappable:!0,isStable:!0},{name:"USDC.e",symbol:"USDC.e",decimals:6,address:"0xFF970A61A04b1cA14834A43f5dE4533eBDDB5CC8",icon:Rt,isSwappable:!0,isStable:!0},{name:"Tether",symbol:"USDT",decimals:6,address:"0xFd086bC7CD5C481DCC9C85ebE478A1C0b69FCbb9",icon:yi,isSwappable:!0,isStable:!0}]},He={},$e={},Ut=Object.keys(Ze);for(let e=0;e<Ut.length;e++){const t=Ut[e];He[t]={},$e[t]={};let a=Ze[t];for(let i=0;i<a.length;i++){const s=a[i];He[t][s.symbol]=s,$e[t][s.address]=s}}const de=(e,t)=>{if(!He[e])throw new Error(`No tokens found for chainId ${e}`);const i=He[e][t];if(!i)throw new Error(`Incorrect symbol "${t}" for chainId ${e}`);return i},Ht=(e,t)=>{if(!$e[e])throw new Error(`No tokens found for chainId ${e}`);const i=$e[e][t];if(!i)throw new Error(`Incorrect address "${t}" for chainId ${e}`);return i},mi=e=>{const t=Ze[e];if(!t)throw new Error(`No tokens found for chainId ${e}`);return t.filter(i=>i.isSwappable)},Jt=e=>de(e,"USDC.e").address,en=e=>de(ue,e).icon,Me={[ue]:{TxBuilder:{address:"0x1e9a254A4D914C474821aEFbd902Dc0E9A51572b",abi:$a},TxBuilderClose:{address:"0xe5EaFFd06db43E73C5D3a7608F6901680BDB93a2",abi:Wa},TxBuilderOpen_Lyra_BTC:{address:"0xD2dD21AaadC39e6AB94E593FA6A6F09B168Ca8Af",abi:qa},TxBuilderOpen_Lyra_ETH:{address:"0x96D9aa5bABEE8fad2c214ebd3d05940D53F82A65",abi:Ga},TxBuilderOpen_Hegic:{address:"0x519225178c0751973CFE2783367039cf7AC1Ee61",abi:Va},StopOrder_Hegic:{address:"0x83ca705E8eEE363b16935D5FCbC3514530d41C74",abi:Ka},StopOrder_Lyra_BTC:{address:"0xDE51a10A711412353e825623F58F56d9D0EA98cF",abi:Ya},StopOrder_Lyra_ETH:{address:"0x06a6815b91c88BDa19832Ada861077e123C34FFb",abi:za},Exchanger:{address:"0x3765D6a221e52E3eB0c0b306caC97362E81AE875",abi:Za},Hegic_OperationalTreasury:{address:"0xec096ea6eB9aa5ea689b0CF00882366E92377371",abi:Xa},Hegic_PositionManager:{address:"0x5fe380d68fee022d8acd42dc4d36fbfb249a76d5",abi:Qa},Hegic_Strategy:{abi:Ja},Hegic_PriceCalculator:{abi:ei},Lyra_OptionToken_BTC:{address:"0x0e97498F3d91756Ec7F2d244aC97F6Ea9f4eBbC3",abi:ti},Lyra_OptionToken_ETH:{address:"0xe485155ce647157624C5E2A41db45A9CC88098c3",abi:ni},Lyra_Quoter:{address:"0x23236b4c7772636b5224df56Be8168A2f42df31C",abi:ai},Chainlink_BTC:{address:"0x6ce185860a4963106506C203335A2910413708e9",abi:Nt},Chainlink_ETH:{address:"0x639Fe6ab55C921f74e7fac1ee960C0B6293ba612",abi:Nt},Uniswap_Quoter:{address:"0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6",abi:la.abi}},[Fe]:{}},Ti=()=>{for(const e in Me){const t=Me[e],a=Ze[e];a&&(a.forEach(i=>{i.isETH||(t[i.symbol]={address:i.address,abi:ii})}),Me[e]={...t})}};Ti();const Y=(e,t)=>{if(!Me[e])throw new Error(`Unknown chainId ${e}`);const a=Me[e][t];if(!a)throw new Error(`Unknown contract "${t}" for chainId ${e}`);return[a.address,a.abi]},fi=(e,t)=>Y(e,t)[0],tn=(e,t)=>Y(e,t)[1],bi={[ue]:{short:{CALL_100_BTC:"0x527d1086C3DD22FcdB338F69D47A1e4bFE11E539",CALL_100_ETH:"0x09a4B65b3144733f1bFBa6aEaBEDFb027a38Fb60",CALL_110_BTC:"0x377191F680b52ce3d0060388fEF01be7ef68e3d5",CALL_110_ETH:"0xF48f571DdD77dba9Ae10fefF6df04484685091D9",CALL_120_BTC:"0x8Fb8529695237D4004cffb21499e7E49E982786a",CALL_120_ETH:"0x96416b82C9DFA7649570c784Eb0D0FFcDE361cFE",CALL_130_BTC:"0x32563D6151891c0A8d56eD644AcDEa6FE5f4E4eB",CALL_130_ETH:"0xf8b8b54bE1Eb37E76873670Ac9DE3C28b507142C",PUT_100_BTC:"0xA8DF600289bEc25602741756f55f27ffFDAB69a6",PUT_100_ETH:"0xaA0DfBFb8dA7f45BB41c0fB68B71FAEB959B22aa",PUT_70_BTC:"0x7066286C1AA0FeBE0f63eF8a44F6Fea9F05FFBE0",PUT_70_ETH:"0x35EF16F3c329a54050Ca120145340dfC2b4F9541",PUT_80_BTC:"0x06c3Ba025bEd24Ea38c2BdDA4bcD2A7F9f5C30e1",PUT_80_ETH:"0x77C8d12d9E2D21f6eE02E8ccA332fDe4BE5C2465",PUT_90_BTC:"0xe115beD3b0752BBbbEF5C423021b464bBF93dC2c",PUT_90_ETH:"0x6B7e5906F53d8bB365f4A6fA776Fd0f0caf57881","CALL-SPREAD_10_BTC":"0x5D0bc0d08e8A7C09d10df9BB2498f1d4aB986e6A","CALL-SPREAD_10_ETH":"0x5c59f7ec23C0Bace3B1959C99A43FFd30078E5bE","CALL-SPREAD_20_BTC":"0x597cdD5D4CEC7FA2851Cc0cfd93d6915c926a107","CALL-SPREAD_20_ETH":"0x4490ad3c0c1A61061E88a3eaD661bFe16225A370","CALL-SPREAD_30_BTC":"0xc822F483dAE467721123eA60D3D233e7ac68802f","CALL-SPREAD_30_ETH":"0x610D7feB49DD18BBC20E4dbe600c53E1cDf6d9F1","PUT-SPREAD_10_BTC":"0x45b9D63F1998ca31151981792849a64342C88631","PUT-SPREAD_10_ETH":"0xc4C3b5050D574CBF3eE0b613104cF5C4E47625d4","PUT-SPREAD_20_BTC":"0x606e34C7008f1425C3a69446de4cAd3D7c6fd96D","PUT-SPREAD_20_ETH":"0xa1c290D16E2290EA536a13Ba7cc3Df0000A0f1A6","PUT-SPREAD_30_BTC":"0x71D89f44C71252f319Cd9652f7886c3834685A58","PUT-SPREAD_30_ETH":"0x8F11Ed84e9Dc76db4392b428A0eAF98Ce72c3752"},medShort:{CALL_100_BTC:"0x20ee3e61e8f1eB8ae959abf5F78bA8731d010Ac3",CALL_100_ETH:"0x6418C3514923a6464A26A2ffA5f17bF1efC96a21",CALL_110_BTC:"0xaFA483B18FE66251C8306C7018028f674F653012",CALL_110_ETH:"0xaF38a4d9153B149F05FA85C2cCFAaA677c99040E",CALL_120_BTC:"0xFe35F1AB7e18930d4316B86fCefBCF053bf44A45",CALL_120_ETH:"0x1060e80c1156060a1E8DdB9C64Afe74564865Ee2",CALL_130_BTC:"0xe4DB400BFC4D627559D592db4ca2839cb87Fbbfc",CALL_130_ETH:"0xc00103524932d86770d4F671107b0E170BD0fe6c",PUT_100_BTC:"0xE0f083fd87ebAEBFCfa8236098048105d32639E4",PUT_100_ETH:"0x2739A4C003080A5B3Ade22b92c3321EDa2Da3A9e",PUT_70_BTC:"0x52442a8C632D4c998A8BDBf44A70481AA5599b0e",PUT_70_ETH:"0x48EcF46Aa51992a064aB172439ABFE182F39b478",PUT_80_BTC:"0xb02343D33d2447870E38b3452Ef59d0De7b3289d",PUT_80_ETH:"0xb58ccd922B57422d0497904B7D9fccB922b8aaDf",PUT_90_BTC:"0x7d0c3FDF0e8A6f475Ed1834ae05fDa1E519fd227",PUT_90_ETH:"0x3e2a0fE32Cc000d87D9e5D6ed8b3D64e9c74C752","CALL-SPREAD_10_BTC":"0x6FF946F2BB609B63910a774E193F29CdE7E8fD5f","CALL-SPREAD_10_ETH":"0x0ac1995C43B5566760AD1D88B812f3e51e12eCc6","CALL-SPREAD_20_BTC":"0x7E8e5eaD9A1b8F0533F614a736214a95835c79d7","CALL-SPREAD_20_ETH":"0x1068daF4CD8fDe2000B6FbE8Ec94F106dc08a40E","CALL-SPREAD_30_BTC":"0x3b4900D5a20dbEbCE44eDF8f6B68Dae32E990Ed0","CALL-SPREAD_30_ETH":"0x24db3145F45aAF2c54f586C66b801c42c8658671","PUT-SPREAD_10_BTC":"0x88386f02c46d8D7b2C9E4aEf3b4246A438F72693","PUT-SPREAD_10_ETH":"0x31e6Cd148fe51830E7a97262eE9cf52Fe5256B08","PUT-SPREAD_20_BTC":"0x72Ac8A96b8E79466AdcE711EcBD1Ec5968b371C8","PUT-SPREAD_20_ETH":"0x9e1072E5119C9345d9543a5Ba1EFeDBAE9bEF2AD","PUT-SPREAD_30_BTC":"0x01381e0EDdB57678257179d2cB472C3e8e54202c","PUT-SPREAD_30_ETH":"0xE8dD9Cc3A4Bd078f3D36043f259381d5B50D4B45"},medLong:{CALL_100_BTC:"0x21a4b4441AA957735902507A72A58A3a1Caaa0dC",CALL_100_ETH:"0xE377A1a97237b3B89a96d8B731A2ab10d5DaC16C",CALL_110_BTC:"0x6c46e2531a42F618F2ae452971DC9a7c6AD48D15",CALL_110_ETH:"0x05458B7d9531EaD242290De60bEaa3cC10C87560",CALL_120_BTC:"0xe259410Bbfb45CE89FDA81ec0A97d36Da8Db4374",CALL_120_ETH:"0x79F87E88088293FE34dEf4eBe71fBFa5367220B4",CALL_130_BTC:"0x27806482457FC98F9C2e724b5E604C66BB5ba121",CALL_130_ETH:"0xae2F4e15564995af79b7dd2378B2680f7Facc342",PUT_100_BTC:"0x035b965c5B7bC20E00358ACF1794d2248eA1932A",PUT_100_ETH:"0xf711D0BC60F37cA28845BA623ccd9C635E5073A1",PUT_70_BTC:"0x55c4532e1790592120b7b27436842caD203E7CD3",PUT_70_ETH:"0xF55F6d98e2F48F8D46757D5A6e225bf0ADC9651C",PUT_80_BTC:"0x8dD239e0e51BCAAd503b06D818ce811e7D99c1Af",PUT_80_ETH:"0xdF30cdb7abb3Ca707b82359A349D3b0C94d4a421",PUT_90_BTC:"0xE56BEAfAe4731A21eF83fe81F63b95055e81E374",PUT_90_ETH:"0x33a4B4403B8C6349371CbDf539138D78ec0Aab66","CALL-SPREAD_10_BTC":"0x8e3063D5dCbe66E58053C3Bc8E0BC8dDFe43D585","CALL-SPREAD_10_ETH":"0xBB318170Ce1c2dc79B564f33F92BacaadaBd22de","CALL-SPREAD_20_BTC":"0x324be893029D982c187F0333E7aa1d44365d2676","CALL-SPREAD_20_ETH":"0xb89d7eB2bc675347BEb685ff1bE1557E983beFe1","CALL-SPREAD_30_BTC":"0x530289340C6d2Ef02140054Ae7F91C293fd586CF","CALL-SPREAD_30_ETH":"0x929d20D9e1A6A90bf057857C8BA09271f1BaadA2","PUT-SPREAD_10_BTC":"0x7267091cFc9825a4A1dF36C26d412FeFD788d935","PUT-SPREAD_10_ETH":"0x2B93645f310E016c1a6d1738DCec0f18621F71d0","PUT-SPREAD_20_BTC":"0x9ab2f8530150799CDdAC35799d18Ad2fe05Bf8c3","PUT-SPREAD_20_ETH":"0x4EE21aB8bc165Cd3e6C45676F9f64426Ffc2d67b","PUT-SPREAD_30_BTC":"0xBa883223A1757eEB781d02C383926c308d4843f4","PUT-SPREAD_30_ETH":"0xf87C8C7587055FA62082E8ed447fe68D98805fF2"},long:{CALL_100_BTC:"0xc07fBf677f417bb9FfDD8248A74c7FBcCFaDAe9e",CALL_100_ETH:"0x2727B807D22fCAeB7F900F49894054Ed92b9125B",CALL_110_BTC:"0x14d25367102A931E2E2F587F4ED94087dc585fd0",CALL_110_ETH:"0xE53a20c824cEAB8151AF8Fc92E7Eb689cFbD1231",CALL_120_BTC:"0xBAbccB37338488AFBaBECAE2C3D21b9a71289A73",CALL_120_ETH:"0xB7b36483B256290435a060805bdF15B3f2b122eb",CALL_130_BTC:"0x9fA4DFfBE3B129988e0d09536b0E2D74F6bF7D91",CALL_130_ETH:"0x4dC39763ccC861dB1c8e80c34C0079c9A12f03E4",PUT_100_BTC:"0xEd46f602212d1CbaCd699C876b4A49761421bf97",PUT_100_ETH:"0x015FAA9aF7599e6cea597EBC7e7e04A149a3E992",PUT_70_BTC:"0xa26541ccE18CcC6E21360562d34044ceb3B5A40e",PUT_70_ETH:"0x5BBe6C4A66D4a48442dc0837a0eA859a11D7766C",PUT_80_BTC:"0xFD203c73851986ad7e7B99457AeafF3d98e76228",PUT_80_ETH:"0x7FD5E8B2Ef25A105bf6B1c45f62d8925Eaa068Bc",PUT_90_BTC:"0x02d730e3dEb3B5876fE2Cba59423ef1Db8211DA1",PUT_90_ETH:"0x3031EA515c2274024D93A8D3BfA91ce920E1192E","CALL-SPREAD_10_BTC":"0x0c1C4D9dFd51093bE1e4Bab1b565113B339835F6","CALL-SPREAD_10_ETH":"0xCe5e136688A1553C67b3B39Ff5366595dD0F771E","CALL-SPREAD_20_BTC":"0x7b92a9f268bab14F0FAee4337B01D563AE132Bc3","CALL-SPREAD_20_ETH":"0xe3F646CB987a9d16eb71B8d0883744e55c95862a","CALL-SPREAD_30_BTC":"0x223b806Bab0CA844a91b247fE0Ba179E11EAA728","CALL-SPREAD_30_ETH":"0x199DB958f00F150438E5b9276ff30617D3f83ebF","PUT-SPREAD_10_BTC":"0x66F54921b32cCA36767D2C272Dda64D5152B92C4","PUT-SPREAD_10_ETH":"0xfcd40dDe82b699D455B3D073196d580227C2Fba6","PUT-SPREAD_20_BTC":"0x8c77f5427B40ab2414dC9bca48c74928BFe17Dd1","PUT-SPREAD_20_ETH":"0xbAe8114E3A2EA5aF5e2b3c8F6FF37714f6D4afFB","PUT-SPREAD_30_BTC":"0x6D79b82701e4017887d499Ba131FD336ceA6A4CC","PUT-SPREAD_30_ETH":"0x9945Eb8ac1F4c524fe7Da710ff3068969A329fBA"}}},hi={[ue]:{PUT_100_BTC:"0x4567600c2c813322F0CBb358a8d083296A7eEA37",PUT_100_ETH:"0xB72FC913e45522cD721252476fEfB7F50a65E23A",PUT_70_BTC:"0x3aFbaf00a6C42e6BE67f8a618b17fB3D441C1898",PUT_70_ETH:"0xf3625e26cb920f762dEC8DB4fE4845E9384313C0",PUT_80_BTC:"0x9C3BBe90191F8311939A34737c02A6B49e27caA5",PUT_80_ETH:"0x58051Cb78094551afC202C50085B13bF00BF624E",PUT_90_BTC:"0x56A2dC3fAc4bE0A1716c938295e141195e4A1cb3",PUT_90_ETH:"0x1AF37c8412bCdAa6C6dD4D2E2aDae2B8292603D4",CALL_100_BTC:"0xAA4483Da5c4D17830dE9a843d07C37b3eC028d9F",CALL_100_ETH:"0xC62a0b7e480a23BdCfe13EA08BDAceDc278a14C1",CALL_110_BTC:"0x04BFC83f6277cf50dFB032EFd348316aACbD7863",CALL_110_ETH:"0x6316BC5f5dF141ae88C436Fe6047D334f1B7e485",CALL_120_BTC:"0x965Ded687bc0Da3388c6925e0Eb330bD44629B77",CALL_120_ETH:"0x321F8A71e8268f50eBd2f748D524E7750AD70798",CALL_130_BTC:"0x4b350b7457b54C5A76828f81472f2719D801D0D5",CALL_130_ETH:"0xffdc9da896d3301DE596b16a389138B70b1CBAdb","CALL-SPREAD_10_BTC":"0xD3872581C3f7DE832Ecc9Aa51eb525AC9Ffc41d2","CALL-SPREAD_10_ETH":"0x3BC74C993e1E85ffB5e242402aEc3e90DCfa249f","CALL-SPREAD_20_BTC":"0x7f6a7d60c6f7ac50BD0efA677D397d9cd61fC3a9","CALL-SPREAD_20_ETH":"0x8C335E897B04B2Ca569Ec733f6242cDe33917094","CALL-SPREAD_30_BTC":"0x631c5EFb3e9D2536F9c9c9d7635e2B01363C51C5","CALL-SPREAD_30_ETH":"0xAe4897D4d3742F7f9C6A1eA01447EA3061bD6de2","PUT-SPREAD_10_BTC":"0xa4A32102a2c1d3Bf01A73B66571B440795835ff5","PUT-SPREAD_10_ETH":"0x5a4Dc7011CA0be61c42957cDC36D508d45010D8B","PUT-SPREAD_20_BTC":"0x0cC3559beCa7bB605348B1a7B4D90963672C880a","PUT-SPREAD_20_ETH":"0xeb38c2Ba3125733e9636eAB7C3c2e7a2C4A11534","PUT-SPREAD_30_BTC":"0x4CE72803543da3f563Ef76592945C57FBE7fce38","PUT-SPREAD_30_ETH":"0xDB044975100aE87d0eEDd804D9E6083a8406fdAe"}},St=e=>{const t=bi[e];if(!t)throw new Error(`No Hegic strategies found for chainId ${e}`);return t},gi=(e,t)=>{const a=St(e),i=si(t);if(i<7||i>90)throw new Error(`No Hegic strategies found for period ${i} days`);let s;return i<14?s=a.short:i<30?s=a.medShort:i<60?s=a.medLong:i<=90&&(s=a.long),s},xi=e=>{const t={},a=St(e);return Object.values(a).forEach((i,s)=>{const r=Object.keys(t)[s];for(const o in i){const p=i[o];t[`${o}_${r}`]=p}}),t},Ci=e=>{const t=St(e),a=[];return Object.values(t).forEach(i=>{a.push(...Object.values(i))}),a},_i=(e,t)=>{const a=hi[e];if(!a)throw new Error(`No Hegic Price Calculator address found for chainId ${e}`);const i=a[t];if(!i)throw new Error(`No Hegic Price Calculator address found for strategy key ${t}`);return i},nn=(e,t,a)=>{const i=tn(e,`Hegic_${a}`);return new K(t,i,te(e))},ki=(e,t)=>{const a=_i(e,t);return nn(e,a,"PriceCalculator")},an=(e,t)=>nn(e,t,"Strategy"),sn=["ETH","BTC"],$=18,vi=18,Si=8,pt=6,wt={ETH:vi,BTC:Si},wi=30,Pi=8,Ai=8,Le=6,rn=2,on=3,Di=e=>{let t=e.reason??e.message;return t==="Internal JSON-RPC error."&&(t=e.data.message),t},Bi=e=>e.includes("User rejected the request")?"User rejected the request.":e.includes("user rejected transaction")?"User rejected transaction.":e.includes("Request of type 'wallet_switchEthereumChain' already pending")?"Switching network request is already pending.":e.includes("Connector already connected")?"Wallet is already connected.":e.includes("Already processing eth_requestAccounts")?"Please, log in to your wallet account.":e,oe=e=>{if(typeof e!="bigint")throw new TypeError(`Invalid BigInt: ${e}`)},pn=e=>{if(typeof e!="number"&&typeof e!="string")throw new TypeError(`Invalid amount: ${e}`)},Mi=e=>{if(typeof e!="string")throw new TypeError(`Invalid String: ${e}`)},pe=(e,t=",")=>{pn(e);const a=e.toString().split(".");return a[0]=a[0].replace(/\B(?=(\d{3})+(?!\d))/g,t),a.join(".")},Ei=e=>{pn(e);const t=e.toString(),a=t.indexOf(".");if(a!==-1){const i=t.match(/[1-9]/)[0];return t.indexOf(i,a)-a}return 0},Xe=(e,t,a)=>{let i=e.toString();if(ae(t))return i;if(t===0)return i.split(".")[0];const s=i.indexOf(".");if(s!==-1){let o=i.length-s-1;if(o>t){const p=i.substr(0,i.length-(o-t));if(a)if(Number(p)===0){const l=Ei(i);i=i.substr(0,i.length-(o-l))}else i=p;else i=p}}return i},ln=(e,t)=>{let a=e.toString();const i=a.indexOf("."),s=i!==-1,r=s?a.length-i-1:0;return r<t&&(a+=+s?"":".",a+="0".repeat(t-r)),a},Ii=e=>{const t=e.toString();return t.indexOf(".")!==-1?parseFloat(t):e},Oi=e=>{const t=e.toString(),[a,i]=t.split(".");return i==="0".repeat(i==null?void 0:i.length)?a:t},ji=(e,t)=>{var s;let a=e.toString().replace(/^\./g,"").replace(/[^0-9.]/g,"").replace(/^0\d/,"");return((s=a.match(/\./g))==null?void 0:s.length)>1&&(a=(o=>o.replace(/\.$/,""))(a)),a=Xe(a,t?0:Le),a},Ie=(e,t,a)=>pe(ji(e,a),t),ye=(e,t=",")=>(Mi(e),Number(e.split(t).join(""))),un=(e,t)=>Math.round(e*10**t)/10**t,U=(e,t=$,a)=>{oe(e);let i=Number(e)/10**t;return typeof a<"u"&&(i=Math.round(i*10**a)/10**a),String(i).includes("e")?0:i},Qe=(e,t)=>(oe(e),e*BigInt(10**t)),Pt=(e,t)=>(oe(e),e/BigInt(10**t)),R=(e,t=$)=>{if(t<Le)throw new Error("Converting number to BigInt without expanding decimals is not safe.");const a=Math.floor(Number(e)*10**Le);return Qe(BigInt(a),t-Le)},H=(e,t=rn,a=$)=>{oe(e);let i=U(e,a);return i=Xe(i,t),i=ln(i,t),i=Oi(i),i=pe(i),String(i)},At=(e,t=on,a=$,i)=>{oe(e);let s=U(e,a);return s=Xe(s,t,i),s=Ii(s),s=pe(s),String(s)},Se=(e,t,a,i)=>{oe(e);const s=t?H:At;return ae(a)&&(a=t?rn:on),s(e,a,i,!t)},we=(e,t,a)=>{oe(e);const i=a-t;return(i<0?Pt:Qe)(e,Math.abs(i))},le=(e,t)=>we(e,t,$),We=(e,t)=>we(e,$,t),dn=(e,t)=>{oe(e);const a=U(e)*t;return R(a)},Fi=(e,t,a=$)=>(e=Qe(e,a),e/t),Li=(e,t,a=$)=>{const i=e*t;return Pt(i,$)},yn=(e,t,a=$)=>{oe(e);const i=a-t,s=Pt(e,i);return Qe(s,i)},ke=e=>(oe(e),e<0n?-e:e),lt=e=>-ke(e),he=e=>{const t={};for(const a in e){let i=e[a];Q.isBigNumber(i)&&(i=i.toBigInt()),t[a]=i}return t},ut=e=>{const t=ye(e);return R(t)},Ni=e=>{const t=U(e);return Ie(t)},Ri=(e,t,a)=>{t=cn(t);const i=mn(e)+"/tx/"+a;console.log(t.text,`
`,i),ft.success(n.jsxs("div",{children:[n.jsx("div",{children:t.node}),n.jsx("br",{}),a&&n.jsx("a",{href:i,target:"_blank",rel:"noopener noreferrer",children:"View transaction"})]}))},cn=e=>{if(typeof e=="string"){const t=e;e={text:t,node:t}}return e},Ui=e=>{e=cn(e),console.log(e.text),ft.success(e.node)},ve=(e,t)=>{const a=Di(e),i=Bi(a);console.error(e),ft.error(n.jsxs("div",{children:["Error: ",e.code,n.jsx("br",{}),i,n.jsx("br",{}),n.jsx("br",{}),"Check the console for details."]})),t&&t(!1)},Je=(e,t,a=[],i,s,r)=>(s&&s(!0),t(...a).then(o=>{console.log("Submitting:",o),o.wait().then(p=>{Ri(e,i,o.hash),s&&s(!1),r&&r(p)},p=>{ve(p,s)})},o=>{ve(o,s)})),Hi=(e,t,a,i,s,r)=>{const o=Se(i,t.isStable),p=we(i,$,t.decimals),l=new K(...Y(e,t.symbol),xe());Je(e,l.approve,[a,Q.from(p)],`${o} ${t.symbol} approved.`,s,r)},$i=async(e,t,a,i,s)=>{oe(s);const r=new K(...Y(e,t.symbol),te(e)),o=we(s,$,t.decimals);return(await r.allowance(a,i)).toBigInt()>=o},Dt=(e,t)=>{const a=wt[t];return We(e,a)},Wi=(e,t)=>{const a=wt[t];return le(e,a)},qi=e=>e.startsWith("W"),Gi=()=>{const e=[ra];if(e.length!==_t.length)throw new Error("Invalid number of wagmi chains.");const{chains:t,publicClient:a,webSocketPublicClient:i}=ia(e,[oa()]);return Zn({autoConnect:!0,publicClient:a,webSocketPublicClient:i,connectors:[new sa({chains:t,options:{name:"Injected",shimDisconnect:!0}})]})},mn=e=>{switch(e){case ue:return"https://arbiscan.io";case Fe:return"https://optimistic.etherscan.io";default:return"https://etherscan.io"}},Tn=async(e,t)=>{const a=Y(e,`Chainlink_${t}`),i=te(e),r=(await new K(...a,i).latestAnswer()).toBigInt();return le(r,Ai)};const Te=x.forwardRef(function({children:t,className:a,style:i,isDisabled:s,onClick:r,type:o},p){const l=M(a,o&&`Button_${o}`),d=o==="complex";return n.jsx("button",{className:M("Button",l),ref:p,disabled:s,onClick:r,"data-text":t,style:i,children:d?n.jsx("span",{children:t.toString()}):t})}),fn=x.createContext(null),z=()=>{const e=x.useContext(fn),{address:t,isConnected:a}=Xn();return{account:e??t,isConnected:a}};function bn(){const{connect:e,connectors:t}=Qn({onError:s=>{ve(s)}}),{disconnect:a}=Jn(),i=t[0];return{connectWallet:()=>e({connector:i}),disconnectWallet:a}}const Vi=()=>{const{isOpen:e,openPopup:t,closePopup:a}=Zt(),i=M(e&&"open"),s=W(),{account:r,isConnected:o}=z(),{connectWallet:p,disconnectWallet:l}=bn(),d=m=>m.slice(0,9)+"..."+m.slice(-15),u=()=>n.jsx(Te,{type:"complex",onClick:p,children:"Connect Wallet"}),y=()=>n.jsxs(n.Fragment,{children:[n.jsx("button",{className:"Wallet__header",onClick:t,children:n.jsxs("div",{className:"Wallet__address",children:[n.jsx("img",{src:La,alt:"Wallet icon"}),n.jsx("span",{children:d(r)})]})}),n.jsxs("div",{className:"Wallet__body",onClick:m=>m.stopPropagation(),children:[n.jsx("button",{className:"close-btn",onClick:a,children:n.jsx("img",{src:Ra,alt:"x"})}),n.jsxs("a",{className:"Wallet__link",href:`${mn(s)}/address/${r}`,rel:"noreferrer",target:"_blank",children:[n.jsx("img",{src:Na,alt:"external link"}),n.jsx("span",{children:"View on explorer"})]}),n.jsx("div",{className:"Wallet__inner-address",children:"("+d(r)+")"}),n.jsx(Te,{className:"Wallet__button",onClick:l,children:"Disconnect wallet"})]})]});return n.jsx("div",{className:M("Wallet",i),children:o?y():u()})};const Ki="/sf_draft/assets/dropdown-fc81e803.svg",Pe=({className:e,options:t,defaultValue:a,defaultOption:i,onChange:s,iconNode:r,iconTextNode:o,...p})=>{const l=r||o,d=({children:m,...c})=>n.jsxs(fa.Control,{...c,children:[r&&n.jsx("div",{className:"Selector__icon",children:r}),o&&n.jsx("div",{className:"Selector__icon Selector__icon_text",children:o}),m]}),u=m=>{const c=f=>f.value===m,C=t.find(f=>f.options);let g;return C?t.forEach(f=>{if(g)return;g=(f.options??[f]).find(c)}):g=t.find(c),g},y=M(e,l&&"Selector_with-icon");return n.jsx(Ta,{...p,options:t,defaultValue:i??u(a),onChange:s,className:M("Selector",y),classNamePrefix:"Selector",isClearable:!1,isSearchable:!1,components:{DropdownIndicator:({innerRef:m,innerProps:c})=>n.jsx("div",{ref:m,...c,className:"Selector__indicator Selector__dropdown-indicator",children:n.jsx("img",{src:Ki,alt:"dropdown icon"})}),Control:d}})},hn=()=>{const{switchNetworkAsync:e}=ea();return t=>{if(typeof t!="number"&&typeof t!="string")throw new TypeError(`Invalid chainId type: ${t} (${typeof t})`);const a=kt[t].name;e(t).then(()=>{Ui(`Network switched to ${a} (${t})`)},i=>{ve(i)})}};const re=({children:e,hasDelay:t=!0,...a})=>n.jsx(ba,{place:"bottom-start",delayShow:t?150:0,delayHide:t?150:0,...a,children:e}),Yi=()=>{const e=W(),t=hn(),a=_t.map(s=>{const{name:r,icon:o,isDisabled:p}=kt[s];return{value:s,label:n.jsxs("div",{className:"flex gap-x-7",children:[n.jsx("img",{src:o,alt:`${r} icon`}),n.jsx("span",{children:r})]}),isCurrent:s===e,isDisabled:p}}),i=a.find(s=>s.isCurrent);return n.jsxs("div",{className:"NetworkSwitcher",children:[n.jsx(Pe,{options:a,value:i,onChange:s=>{t(s.value)},isDisabled:!0}),n.jsx(re,{anchorSelect:".NetworkSwitcher .Selector__option--is-disabled",content:"Coming soon"})]})},zi=()=>{const{isConnected:e}=z();return n.jsxs("div",{className:"CryptoGateway",children:[e&&n.jsx(Yi,{}),n.jsx(Vi,{})]})},Zi=()=>{const e=Ye(),t=[{name:"Option Trading",to:"/terminal"}];return t.forEach(a=>{e.pathname.startsWith(a.to)&&(a.isActive=!0)}),n.jsxs("header",{className:"Header _container",children:[n.jsx(zt,{}),n.jsx(Ct,{links:t}),n.jsx(zi,{})]})};const Xi=()=>{const e=ma({enter:"jellyIn",exit:"jellyOut"});return n.jsx(ca,{limit:2,transition:e,position:"bottom-right",hideProgressBar:!0,newestOnTop:!1,closeOnClick:!1,draggable:!1})};const Qi=300,Ji=e=>{const t=_a();x.useEffect(()=>{const a=window.innerWidth>1025?t:0;e?(document.body.style.overflow="hidden",document.body.style.paddingRight=`${a}px`):setTimeout(()=>{document.body.style.overflow="unset",document.body.style.paddingRight=0},Qi)},[e,t])};gt.setAppElement("#root");gt.defaultStyles={};const et=({children:e,className:t,isOpen:a,setIsOpen:i,isObligatory:s,reset:r})=>(Ji(a),x.useEffect(()=>{!a&&r&&r()},[a]),n.jsx(gt,{className:M(t,"App-box"),isOpen:a,onRequestClose:()=>{s||i(!1)},overlayElement:(o,p)=>n.jsxs("div",{...o,children:[p,!s&&n.jsx("button",{className:"ReactModal__Close-btn"})]}),closeTimeoutMS:300,children:e})),es=e=>{const{chainId:t}=e,[a]=x.useState(!0),i=hn();return n.jsxs(et,{className:"UnsupportedChainErrorModal",isOpen:a,isObligatory:!0,children:[n.jsxs("div",{className:"UnsupportedChainErrorModal__text text-inline",children:["Chain ",t," is not supported."]}),n.jsx("div",{className:"UnsupportedChainErrorModal__switch-btns",children:_t.map(s=>{const r=kt[s],{name:o,icon:p,isDisabled:l}=r;return n.jsxs(Te,{isDisabled:l,type:"stroke",onClick:()=>{i(s)},children:[n.jsx("img",{src:p,alt:`${o} icon`}),"Switch to ",o]},s)})})]})},ts="AEZAKMI=",ns=()=>{const[e,t]=x.useState(),a=Ye(),i=r=>{t(r),console.log("GOD EYE MODE ENABLED:",r)},s=r=>{t(null),console.log(`GOD EYE MODE DISABLED${r?` (${r})`:""}`)};return x.useEffect(()=>{const r=a.pathname.split("/"),o=r[r.length-1];if(o.startsWith(ts)){const p=o.split("=")[1];pa(p)?i(p):s("Invalid wallet address")}},[a.pathname]),{godEyeAddress:e}},as=({children:e})=>{const{godEyeAddress:t}=ns();return n.jsx(fn.Provider,{value:t,children:e})},is="/terminal/builder",gn="0x683Ad8b899Cd14d8e077c9A623E8B3fEd65a8c09";const ss="/sf_draft/assets/graph-b6757e0e.svg";const ee=({className:e,children:t,isSmall:a=!0,symbol:i="USDC",isHlight:s,style:r})=>{const o=W(),p=de(o,i).icon,l=t,d=M(s&&"hlight",e);return n.jsxs("div",{className:M("Currency",d),style:r,children:[n.jsx("img",{src:p,alt:`${i} icon`,width:a?15:"auto"}),n.jsx("span",{children:l})]})},rs=(e,t)=>fetch(e).then(a=>a.json().then(i=>t?t(i):i)),os=e=>{switch(e){case ue:return"https://gmx-server-mainnet.uw.r.appspot.com/prices";case Fe:throw new Error("No url for Optimism");default:throw new Error(`Unknown chainId ${e}`)}},xn=()=>{const e=W(),t=os(e),{data:a,error:i}=je([t],{fetcher:async s=>rs(s,r=>{for(const o in r){const p=r[o],l=le(BigInt(p),wi);r[o]=l}return r}),refreshInterval:1e3,shouldRetryOnError:!1});return i?(console.log(i),null):a},ps=()=>{const e=W(),t=sn.map(i=>de(e,i)),a=xn();return n.jsxs("div",{className:"TokenPricesPanel",children:[n.jsx("div",{className:"TokenPricesPanel__icon",children:n.jsx("img",{src:ss,alt:"Graph icon"})}),n.jsx("div",{className:"TokenPricesPanel__items",children:t.map(i=>{if(!a)return null;let{address:s,symbol:r}=i;const o=a[s],p=H(o,2);return n.jsx("div",{className:"TokenPricesPanel__item",children:n.jsx(ee,{isHlight:!0,symbol:r,children:n.jsxs("span",{children:["$",p]})})},r)})})]})},ls=()=>{const e=Ye(),t=[{name:"Option Strategies",to:"/terminal/builder"}];return t.forEach(a=>{e.pathname.endsWith(a.to)&&(a.isActive=!0)}),n.jsxs("div",{className:"Terminal",children:[n.jsx(ps,{}),n.jsx(Ct,{links:t,type:"border"}),n.jsx(ha,{})]})};function Bt(e,t={maxValue:void 0,placeholder:"",isDisabled:!1,isFocused:!1},a=[Ie,ye]){const[i,s]=e,{maxValue:r,placeholder:o,isDisabled:p,isFocused:l}=t,[d,u]=a,[y,m]=x.useState(!1),c=x.useRef(null);return{node:n.jsx("input",{autoFocus:l,type:"text",ref:c,value:i,disabled:p,placeholder:o,onChange:C=>{r&&u(C.target.value)>r?s(d(r)):s(d(C.target.value))},onFocus:()=>{m(!0)},onBlur:()=>{m(!1)}}),hasFocus:y,ref:c}}const us=e=>{const{value:t,setValue:a,maxValue:i,formatInputStringFns:s,hasError:r,isDisabled:o,unitStr:p,placeholder:l}=e,d=Bt([t,a],{maxValue:i,placeholder:l,isDisabled:o},s),u=M(e.className,d.hasFocus&&"hlight",r&&"error",o&&"disabled");return n.jsxs("div",{className:M("InputFamily Input",u),onClick:()=>{d.ref.current.focus()},children:[d.node,n.jsx("div",{className:"Input__unit",children:p})]})},ge="#46956A",J="#C75E4B",$t="#D99445",dt="#6988FF",Ne="#747FA6",ot="#3A4466",ds="≈",ys={positive:"+",negative:"-",neutral:""},X="Limited",se="Unlimited",_e="Bullish",yt="Bearish",me="Neutral",ie={"Long Call":{stats:{outlooks:[_e],profit:se,loss:X,description:"When you believe that the price of the underlying asset will rise."},structure:[1],key:1,color:ge},"Short Call":{stats:{outlooks:[yt],profit:X,loss:se,description:"When you believe that the price of the underlying asset will fall."},structure:[-1],key:101,color:J},"Covered Call":{stats:{outlooks:[_e],profit:X,loss:se,description:"When you believe that the price of the underlying asset will rise."},structure:[-1],key:201,color:J},"Long Put":{stats:{outlooks:[yt],profit:se,loss:X,description:"When you believe that the price of the underlying asset fall."},structure:[2],key:2,color:ge},"Short Put":{stats:{outlooks:[_e],profit:X,loss:se,description:"When you believe that the price of the underlying asset will rise."},structure:[-2],key:102,color:J},"Long Strangle":{stats:{outlooks:[me],profit:se,loss:X,description:"When you believe that the price of the underlying asset will rise or fall."},structure:[1,2],key:3,color:$t},"Short Strangle":{stats:{outlooks:[me],profit:X,loss:se,description:"When you believe that the price of the underlying asset won’t rise or fall significantly."},structure:[-1,-2],key:103,color:J},"Covered Strangle":{stats:{outlooks:[me,_e],profit:X,loss:se,description:"When you believe that the price of the underlying asset is at or above the strike price of the short call at expiration."},structure:[-1,-2],key:203,color:J},"Long Straddle":{stats:{outlooks:[me],profit:se,loss:X,description:"When you believe that the price of the underlying asset changes when the direction of the change could be either up or down."},structure:[1,2],key:4,color:$t},"Short Straddle":{stats:{outlooks:[me],profit:X,loss:se,description:"When you believe that the price of the underlying asset won’t rise or fall significantly."},structure:[-1,-2],key:104,color:J},"Covered Straddle":{stats:{outlooks:[me,_e],profit:X,loss:se,description:"When you believe that the price of the underlying asset is at or above the strike price of the short call at expiration."},structure:[-1,-2],key:204,color:J},"Iron Butterfly":{stats:{outlooks:[me],profit:X,loss:X,description:"When you believe that the price of the underlying asset won’t rise or fall significantly."},structure:[2,-2,-1,1],key:5,color:dt,plural:"Iron Butterflies"},"Iron Condor":{stats:{outlooks:[me],profit:X,loss:X,description:"When you believe that the price of the underlying asset won’t rise or fall significantly."},structure:[2,-2,-1,1],key:6,color:dt},"Bull Call Spread":{color:ge},"Bear Put Spread":{color:J}},cs={[_e]:ge,[me]:dt,[yt]:J},Cn=Object.keys(ie).filter(e=>ie[e].key),ms={Lyra_ETH:0,Lyra_BTC:1,Hegic:2},_n=.003,kn={PARENT_COMPLEX:"parent_complex",PARENT_SIMPLE:"parent_simple",CHILD:"child"},Ts=e=>{const{amountStrState:t,strategy:a}=e,[i,s]=t,r=ie[a].plural??`${a}s`;return n.jsxs("div",{className:"BuilderForm__field BuilderForm__field_amount",children:[n.jsx("div",{className:"BuilderForm__field-header",children:"Enter Amount"}),n.jsx("div",{className:"BuilderForm__field-body",children:n.jsx(us,{value:i,setValue:s,unitStr:r})})]})},fs=e=>{const{assetState:t,isDisabled:a}=e,[i,s]=t,r=sn.map(o=>({value:o,label:n.jsx(ee,{symbol:o,isHlight:!0,children:o})}));return n.jsxs("div",{className:"BuilderForm__field BuilderForm__field_asset",children:[n.jsx("div",{className:"BuilderForm__field-header",children:"Asset"}),n.jsx("div",{className:"BuilderForm__field-body",children:n.jsx(Pe,{options:r,defaultValue:i,isDisabled:a,onChange:o=>{s(o.value)}})})]})},bs="/sf_draft/assets/strategy-selector-icon-1e15875d.svg",hs=e=>{const{strategyState:t,isDisabled:a}=e,[i,s]=t,r=Cn.map(o=>({value:o,label:o}));return n.jsxs("div",{className:"BuilderForm__field BuilderForm__field_strategy",children:[n.jsxs("div",{className:"BuilderForm__field-header",children:["Strategy",n.jsx("div",{className:"BuilderForm__field-tip tip","data-tooltip-id":"BuilderForm_WhenPurchaseTooltip",children:"When purchase"})]}),n.jsx("div",{className:"BuilderForm__field-body",children:n.jsx(Pe,{options:r,defaultValue:i,onChange:o=>{s(o.value)},iconNode:n.jsx("img",{src:bs,alt:"Strategy selector icon"}),className:"Selector_thin-options",isDisabled:a})})]})};const be=e=>{const{style:t,hasLeftMargin:a}=e;return n.jsx("div",{className:"Spinner",children:n.jsx(va,{className:"Spinner__icon",style:{marginLeft:a?7:0,...t}})})},tt=(e,t,a=n.jsx(be,{}))=>t?a:e,vn=(e,t,a=n.jsx(be,{}))=>t?a:e(),ne=(e="—",t,a)=>n.jsx("span",{className:M("muted",a&&"muted_light"),style:{fontSize:t?13:"inherit"},children:e}),Sn=e=>e.charAt(0).toUpperCase()+e.slice(1),Mt=(e,t,a=1)=>{const i=e,s=t;if(i>s)return a;if(i==s)return 0;if(i<s)return-a},Et=e=>e.filter((a,i)=>e.indexOf(a)===i),gs=e=>{e.splice(0,e.length)},nt=e=>Math.abs(e)===1,Ae=e=>e>0,It=e=>!!e.find(t=>!Ae(t)),xs=e=>!!e.find(t=>Ae(t)),Cs=e=>!!e.find(t=>t),_s=e=>{const[,t]=e.split("_");return Number(t)},ks=(e,t,a)=>{let i;const s=`W${a}`,r=t.split(" ")[0];return!nt(e)||r==="Short"?i=["USDC.e"]:r==="Covered"?i=[s]:r==="Iron"&&(i=["USDC.e",s]),i},vs=e=>{const t=e.includes("Straddle"),a=e==="Iron Butterfly";if(t)return[0,1];if(a)return[1,2]},Ss=(e,t)=>{if(!(e!=null&&e[0].market))return;if(e.length>1){const i=e.find(s=>s.market===t);if(i)return i}return e[0]},wn=(e,t)=>new K(...Y(e,`TxBuilderOpen_${t}`),te(e)),ws=e=>{const t=new K(...Y(e,"TxBuilderOpen_Hegic"),te(e)),a=new K(...Y(e,"TxBuilderOpen_Lyra_BTC"),te(e)),i=new K(...Y(e,"TxBuilderOpen_Lyra_ETH"),te(e));return{Hegic:t,Lyra_ETH:i,Lyra_BTC:a}},Ps=(e,t,a)=>{if(!t)return a;let i=0,s=0;return e.map(o=>Ae(o)?t[i++]:a[s++])},As=e=>{const t=Object.keys(e);return t?!!t.find(i=>!e[i][0].isAbsent):!1},Ds="/sf_draft/assets/Hegic-a7e6545a.svg",Bs="/sf_draft/assets/Hegic_circled-26df614a.svg",Ms="/sf_draft/assets/Hegic_circled-light-9256df54.svg",Es="/sf_draft/assets/Lyra-0ebc1db3.svg",Is="/sf_draft/assets/Lyra_circled-1da5fd25.svg",Os="/sf_draft/assets/Lyra_circled-light-a90bfa71.svg",Pn={Hegic:{common:Ds,circled:Bs,circledLight:Ms},Lyra:{common:Es,circled:Is,circledLight:Os}},ct=.0015,js=.02,mt=["delta","vega","gamma","theta"],Wt=8,Fs=[7,14,30,60,90],qe=Fs.map(Xt),An=1e4,Dn=.05*10**4,Ot=(e,t,a,i)=>{const s=Ht(e,t),r=Ht(e,a),o=we(i,$,s.decimals);if(t===a||o===0n||s.isStable&&r.isStable)return new Promise(u=>{u(i)});const p=Q.from(o);return new K(...Y(e,"Uniswap_Quoter"),xe()).callStatic.quoteExactInput(xt.solidityPack(["address","uint24","address"],[t,Dn,a]),p).then(u=>{const y=u.toBigInt();return le(y,r.decimals)}).catch(u=>{console.log(`Swapping ${s.symbol} to ${r.symbol} error!

`,u)})},at=(e,t,a)=>{const i=Jt(e);return Ot(e,t,i,a)},Ls=(e,t,a)=>{const i=Jt(e);return Ot(e,i,t,a)},Ns=(e,t)=>xt.solidityPack(["address","uint24","address"],[e,Dn,t]),Bn=(e,t,a,i)=>{const[s,r]=a.split(".");let o=e[s],p=t[s];return r&&(o=o&&o[r],p=p&&p[r]),Mt(o,p,i)},it=(e,t,a)=>{if(!e||!Object.keys(e).length)return{...t};if(!t)return;const i={...e};a||(a=Object.keys(e));for(let s=0;s<a.length;s++){const[r,o]=a[s].split("."),p=o?e[r][o]:e[r],l=o?t[r][o]:t[r],d=p+l;o?(i[r]||(i[r]={}),i[r][o]=d):i[r]=d}return i},Mn=(e,t,a)=>e?a>t:a<t,Rs=(e,t,a=5)=>Math.abs(e-t)<a,Us=(e,t,a)=>e?t<a?1:0:t>a?-1:0,Hs=(e,t)=>e?Number(t)<100?1:0:Number(t)>100?-1:0,$s=()=>qe.map((t,a)=>{const i=new Date(Date.now()+t),s=a===0,r=a===qe.length-1,o=i.getUTCHours()>=Wt,p=i.getUTCDate();return s&&o&&i.setUTCDate(p+1),r&&!o&&i.setUTCDate(p-1),i.setUTCHours(Wt),i.setUTCMinutes(0),i.setUTCSeconds(0),i.setUTCMilliseconds(0),i.getTime()}),jt=(e,t)=>dn(e,1+t),Ft=(e,t)=>R(Number(e+t)/Number(ke(t))*100),En=(e,t,a)=>{t=he(t);const{isBase:i,liquidationPrice:s,max:r,min:o}=t,p=`W${a}`,l=de(e,i?p:"USDC.e");return at(e,l.address,t.amount).then(d=>({inMarketToken:t.amount,marketToken:l,inUSDC:d,isBase:i,liquidationPrice:s,min:o,max:r}))},In=(e,t)=>{const a=it(e,t);for(const i in a){const s=a[i];a[i]=un(s,3)}return a};const Ws=e=>{const{strategyStructure:t,dateListState:a,chosenDateState:i,lyraMarket:s,updateTriggers:r,resetTriggers:o,isDisabled:p,updateUnstableField:l}=e,[d,u]=a,[y,m]=x.useState(!1),[c,C]=i,{account:g}=z(),f=()=>{m(!0);let w=$s();if(s){const F=s.liveBoards().map(A=>A.expiryTimestamp*fe),E=[...w,...F];w=Et(E).sort(Mt)}u(w),m(!1)},_=()=>{C(null)};x.useEffect(()=>{f()},r),x.useEffect(()=>{_()},o);const k=(w,F="d MMM")=>{const E=w-Date.now();return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"BuilderForm__date-value",children:Yt(w,F)}),n.jsx("div",{className:"BuilderForm__date-period",children:ri(E)})]})},S=d.map(w=>({value:w,label:k(w)})),I=c&&S.find(w=>w.value===c);return n.jsxs("div",{className:"BuilderForm__field BuilderForm__field_date",children:[n.jsx("div",{className:"BuilderForm__field-header",children:"Expiration Date"}),n.jsx("div",{className:"BuilderForm__field-body",children:t.map((w,F)=>{const E=Ae(w),A=nt(w),j=tt(n.jsx(Pe,{className:"Selector_thin-options",placeholder:"Choose Date",isDisabled:p||!g,options:S,value:I,formatOptionLabel:({value:P},{selectValue:D,context:L})=>{var T;if(L==="menu")return k(P);const b=((T=D[0])==null?void 0:T.value)===P?"d MMM hh a":"d MMM";return k(P,b)},onChange:P=>{C(P.value)},iconTextNode:n.jsxs("span",{className:M({positive:E,negative:!E},"block"),style:{width:25},children:[E?"Buy":"Sell",n.jsx("br",{}),A?"Call":"Put"]})},F),y,n.jsx(be,{},F));return l(F,j),j})})]})};const Ge=e=>{const t=W(),i=de(t,e).address,s=xn();return s?s[i]:0n};const st=({strikeData:e,priceNode:t,isPriceHlight:a})=>{const{market:i,isCall:s,isBuy:r}=e,o=Pn[i].circled;return n.jsxs("div",{className:"StrikeBrief",children:[n.jsx("div",{className:"StrikeBrief__icon",children:n.jsx("img",{src:o,alt:`${i}`})}),n.jsxs("div",{className:M("StrikeBrief__info-card",{positive:r,negative:!r}),children:[r?"Buy":"Sell"," ",s?"Call":"Put"]}),n.jsx("div",{className:M("StrikeBrief__price",a&&"hlight"),children:t})]})};function qt(){const{innerWidth:e,innerHeight:t}=window;return{width:e,height:t}}function qs(){const[e,t]=x.useState(qt());return x.useEffect(()=>{function a(){t(qt())}return window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]),e}const rt=(e=768)=>{const{width:t}=qs();return t<e},Gs=({getParentNode:e,getChildNodes:t})=>{const[a,i]=ka(!1),s=M(a&&"expanded"),r=e(s,i),o=t(s);return n.jsxs(n.Fragment,{children:[r,...o]})};const On=({children:e,transitionTimeout:t=250,renderHeader:a=({state:i})=>i.isEnter?"Hide":"Show"})=>n.jsx("div",{className:"Accordion",children:n.jsx(Sa,{transition:!0,transitionTimeout:t,children:n.jsx(wa,{header:a,children:e})})});const Oe=({isVertical:e})=>n.jsx("div",{className:M("Divider",e&&"vertical")});class jn{constructor(t){const{titleData:a,itemsData:i}=t,s=Object.keys(a);this.titleData=a,this.itemsData=i,this.dataKeys=s}}class Vs extends jn{constructor(t){super(t),this.getTitleRow=this.getTitleRow.bind(this),this.getItemsRows=this.getItemsRows.bind(this)}getTitleRow(){const t=this._getCells(this.titleData,!0);return n.jsxs("tr",{children:[...t]})}getItemsRows(){const t=this.itemsData.map(a=>{const i=this._getItemRow(a);return n.jsx(Ee.Fragment,{children:i},a.id)});return n.jsx(Ee.Fragment,{children:t},"rows")}_getCells(t,a){return this.dataKeys.map(i=>{const s=t[i]??ne();return a?n.jsx("th",{children:s},i):n.jsx("td",{children:s},i)})}_getItemRow(t){const a=!!t.children,i=this._getCells(t),s=(o,p)=>n.jsxs("tr",{className:M("Table__item",a&&"expandable",o),onClick:p,children:[...i]});return a?this._getExpandableRow(t,s):s()}_getExpandableRow(t,a){const i=s=>t.children.map(o=>{const p=this._getCells(o);return n.jsxs("tr",{className:M("Table__child-item",s),children:[...p]},o.id)});return n.jsx(Gs,{getParentNode:a,getChildNodes:i},t.id)}}class Ks extends jn{constructor(t){super(t),this._getItem=this._getItem.bind(this)}getItems(){return this.itemsData.map(this._getItem)}_renderItemRows(t){const a=t.omittedKeys;return this.dataKeys.map(s=>{const r=t[s];return a&&!!a.find(p=>s===p)||ae(r)?null:n.jsxs("div",{className:M("Table__item-row info-row",s),children:[n.jsx("div",{className:"info-row__title",children:this.titleData[s]}),n.jsx("div",{className:"info-row__value",children:r})]})})}_getItem(t){return n.jsxs("div",{className:"Table__item App-box",children:[this._renderItemRows(t),t.children&&n.jsxs(n.Fragment,{children:[n.jsx(Oe,{}),n.jsx(On,{transitionTimeout:500,renderHeader:({state:a})=>`${a.isEnter?"Hide":"Show"} full strategy`,children:t.children.map(a=>n.jsxs(n.Fragment,{children:[n.jsx(Oe,{}),n.jsx("div",{className:"Table__child-item",children:this._renderItemRows(a)})]}))})]})]})}}const Fn=({structureData:e,className:t,children:a})=>{const i=rt(576),s=p=>{if(!p){const l=new Vs(e),{getTitleRow:d,getItemsRows:u}=l;p=[n.jsx("thead",{children:d()},"head"),n.jsx("tbody",{children:u()},"body")]}return n.jsx("div",{className:"Table__desktop",children:n.jsx("table",{children:p})})},r=()=>{const l=new Ks(e).getItems();return n.jsx("div",{className:"Table__mobile",children:l})},o=()=>i?r():s();return n.jsx("div",{className:M("Table",t),children:a!=null&&a.length?s(a):o()})};const Ys=e=>{const{id:t,amountStr:a,strikeMarketsDataArr:i,chosenStrikeData:s,setChosenStrikeData:r,isOpen:o,close:p}=e,[l,d]=x.useState([]),u=()=>{i.forEach((f,_)=>{const k=R(ye(a));f.utils.calcPremium(k).then(S=>{l[_]=S,d([...l])})})};if(x.useEffect(()=>{d([]),i&&u()},[i,a]),!i)return null;const y=23,c=80-y,g=180-y;return n.jsx("div",{className:M("StrikeInfoBox",o&&"open"),style:{zIndex:9-t*2},children:n.jsxs(Fn,{onClick:f=>f.stopPropagation(),children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:n.jsx("div",{style:{width:g},children:"Market"})}),n.jsx("th",{children:n.jsx("div",{style:{width:c},children:"Source"})}),n.jsx("th",{children:n.jsx("div",{style:{width:c},children:"Delta"})}),n.jsx("th",{children:n.jsx("div",{style:{width:c},children:"Vega"})}),n.jsx("th",{children:n.jsx("div",{style:{width:c},children:"Gamma"})}),n.jsx("th",{children:n.jsx("div",{style:{width:c},children:"Theta"})}),n.jsx("th",{children:n.jsx("div",{style:{width:c},children:"Rho"})})]})}),n.jsx("tbody",{children:i.map((f,_)=>{const{greeks:k}=f,S=l[_],I=!S||S.isDisabled,w=f===s;return n.jsxs("tr",{className:M("StrikeInfoBox__strike-option",I&&"disabled",w&&"chosen"),children:[n.jsxs("td",{children:[n.jsx("button",{className:"StrikeInfoBox__strike-option-overlay-btn",onClick:()=>{r(f),p()},disabled:I}),n.jsx(st,{strikeData:f,priceNode:vn(()=>S===null?ne("No liquidity",!0):`$${H(S.inUSDC)}`,ae(S)),isPriceHlight:!0})]}),n.jsx("td",{children:"AMM"}),n.jsx("td",{children:k.delta}),n.jsx("td",{children:k.vega}),n.jsx("td",{children:k.gamma}),n.jsx("td",{children:k.theta}),n.jsx("td",{children:k.rho})]},f.market)})})]})})};const Ve=e=>{const{children:t}=e;return n.jsx("div",{className:"InnerWarning",children:t})};Pa();const zs=e=>{const{id:t,className:a,isUnited:i,spaceBetween:s,isDraggable:r,breakpoints:o,handleInit:p,slideClassName:l,children:d}=e,u=x.useRef(null),y=`${i?`.${a}`:`#${t}`}`,m={spaceBetween:s,allowTouchMove:r,breakpoints:o,navigation:{enabled:!0,prevEl:`${y} .Carousel__nav-btn_prev`,nextEl:`${y} .Carousel__nav-btn_next`},on:{init:c=>{c.el.style.overflow="clip visible",p&&p(c)}}};return x.useEffect(()=>{const c=u.current;c&&(Object.assign(c,m),c.initialize())},[u,m]),n.jsxs("div",{className:M("Carousel",a),id:t,children:[n.jsx("button",{className:"Carousel__nav-btn Carousel__nav-btn_prev"}),n.jsx("swiper-container",{init:!1,ref:u,children:d==null?void 0:d.map((c,C)=>n.jsx("swiper-slide",{class:l,children:c},C))}),n.jsx("button",{className:"Carousel__nav-btn Carousel__nav-btn_next"})]})};const Zs=e=>{const{asset:t}=e;return n.jsx(zs,{slidesPerView:"auto",breakpoints:{768:{slidesPerView:"auto"},576:{slidesPerView:7,grid:{fill:"row",rows:2}},520:{slidesPerView:6,grid:{fill:"row",rows:2}},380:{slidesPerView:5,grid:{fill:"row",rows:2}},0:{slidesPerView:4,spaceBetween:4,grid:{fill:"row",rows:2}}},spaceBetween:5,className:"StrikeCarousel",isDraggable:!1,isUnited:!0,slideClassName:`StrikeCarousel__slide_${t}`,children:e.children})},Ke=e=>Object.keys(e).map(Number),Xs=e=>{const t={},a=Object.keys(e).map(_s),i=Et(a),s=Object.values(e);return i.forEach(r=>{const o=s.filter(p=>p.strike===r);t[r]=o}),t},Qs=e=>e.map(Xs),Js=e=>{const t=[];return e.forEach(i=>{const s=Ke(i);t.push(...s)}),Et(t)},er=e=>{const t=Js(e);return e.map(i=>{const s=Ke(i),r={...i};return t.forEach(o=>{s.indexOf(o)===-1&&(r[o]=[{strike:o,isAbsent:!0}])}),r})};const tr=e=>{const{currentPrice:t,isFirst:a}=e;return n.jsx("div",{className:M("StrikeCurrentPriceItem","StrikeChooser__item",a&&"StrikeCurrentPriceItem_first"),children:n.jsxs("span",{children:["$",pe(t)]})})};const nr="/sf_draft/assets/cross_grey-42dbd9c5.svg",ar=e=>{const{isITM:t}=e;return n.jsx("div",{className:M("StrikeAbsentItem","StrikeChooser__item",t&&"StrikeChooser__item_ITM"),children:n.jsx("img",{src:nr,alt:"Absent"})})},ir=e=>{const{className:t,id:a,structureKey:i,asset:s,amountStr:r,strikesData:o,chosenStrikeData:p,setChosenStrikeData:l}=e,{isConnected:d}=z(),u=Ge(s),y=U(u),m=a===0,c=rt(),[C,g]=x.useState(null),f=D=>{const L={...D};for(const v in D)D[v][0].isCurrentPrice&&(L[v][0].isCurrentPrice=!1);return L},_=()=>{const D=f(o),v=Ke(D).find(b=>Rs(b,y));if(v){const b=D[v][0];b.isCurrentPrice=!0}else{const b=Math.floor(y);D[b]=[{strike:b,isCurrentPrice:!0}]}return D},k=()=>{if(o){if(!As(o))return{strikes:[],dataArr:[]};let D=_();const L=Ke(D).sort(Mt),v=Object.values(D).sort((b,T)=>{const h=b[0],B=T[0];return Bn(h,B,"strike")});return{strikes:L,dataArr:v}}return{}},{strikes:S,dataArr:I}=k(),w=!!(S!=null&&S.length),{openPopup:F,closePopup:E,isOpen:A}=Zt(()=>g(null)),j=()=>n.jsx(Zs,{asset:s,children:S.map((D,L)=>{const v=I[L],b=v[0],{isCurrentPrice:T,isAbsent:h,market:B}=b;if(T&&!B)return n.jsx(tr,{currentPrice:D,isFirst:m},"current_price");const O=nt(i),N=Mn(O,D,y);if(h)return n.jsx(ar,{isITM:N},L);const q=p&&p.strike===D,G=q&&p.market,Z=C===v;return n.jsxs(Te,{className:M("StrikeChooser__item",N&&"StrikeChooser__item_ITM",q&&"chosen",Z&&"open",T&&M("StrikeCurrentPriceItem",m&&"StrikeCurrentPriceItem_first")),style:{cursor:"pointer"},type:"stroke",onClick:ce=>{A&&ce.stopPropagation(),g(v),F()},children:[q&&n.jsx("div",{className:"StrikeChooser__item-market",children:n.jsx("img",{src:Pn[G].circledLight,alt:`${G} icon`})}),n.jsxs("span",{children:["$",pe(D)]})]},D)})}),P=()=>o?w?n.jsx("div",{className:"StrikeChooser__items",style:{zIndex:10-a*2},children:j()}):n.jsx(Ve,{children:"No Liquidity"}):n.jsxs(Ve,{children:[d?"C":"Connect wallet and c","hoose expiration date to view strikes"]});return n.jsxs("div",{className:M("StrikeChooser",t,c&&!o&&"hidden"),children:[P(),n.jsx(Ys,{id:a,amountStr:r,strikeMarketsDataArr:C,chosenStrikeData:p,setChosenStrikeData:l,isOpen:A,close:E})]})},Ln="Hegic_",sr="USDC.e",rr=(e,t)=>{let a;try{a=gi(e,t)}catch(i){console.log(i)}return a},or=async(e,t)=>{const a=await Tn(e,t);return U(a)},pr=(e,t,a)=>{const[i,,s]=e.split("_");return!(i.includes("SPREAD")||a!==(i==="CALL")||s!==t)},lr=async(e,t,a)=>{const{asset:i,amount:s,period:r}=a;let o;const p=new K(t,tn(e,"Hegic_Strategy"),te(e)),l=ze(r);try{const d=(await p.getAvailableContracts(l,[])).toBigInt(),u=wt[i],y=R(s,u);o=d>=y}catch{}return o},ur=async(e,t,a,i)=>{const{asset:s,period:r}=a,o=Dt(i,s),p=ki(e,t),l=ze(r);return p.calculatePremium(l,o,0).then(d=>{const u=le(d.toBigInt(),pt),y=de(e,sr);return at(e,y.address,u).then(m=>({inUSDC:m,inMarketToken:u,marketToken:y}))})},dr=(e,t)=>Math.floor(t*(e/100)),yr=(e,t,a,i)=>{const{protocolName:s,isCall:r}=a,{strategyKey:o}=t,[,p]=o.split("_"),l=dr(p,i),d=mr(e,t,a),u=Hs(r,p);return{market:"Hegic",protocolName:s,strike:l,isCall:r,isBuy:!0,greeks:{delta:u,vega:0,gamma:0,theta:0,rho:0},utils:d}},cr=(e,t)=>{const a=R(e,$);return t.utils.calcPremium(a)},mr=(e,t,a)=>{const{strategyKey:i,strategyAddress:s}=t,{asset:r,protocolName:o,period:p}=a;return{calcPremium:u=>ur(e,i,a,u),getBuilderParams:(u,y,m)=>{u=Dt(u,r);const c=Q.from(u),C=y.premiumInMarketToken,g=yn(C,m),f=Q.from(g),_=wn(e,o);return _.encodeFromHegic(s,_.address,c,ze(p),f,[])}}},Tr=async(e,t,a)=>{const{asset:i,amount:s,isCall:r}=a,o={},p={},l=await or(e,i),d=Object.keys(t);for(let u=0;u<d.length;u++){const y=d[u],m=t[y],c={strategyKey:y,strategyAddress:m};if(!pr(y,i,r)||!await lr(e,m,a))continue;const C=yr(e,c,a,l),g=cr(s,C),{strike:f}=C;p[f]=g,o[`${Ln}${f}`]={...C}}return{strikesData:o,premiumPromisesData:p}},fr=async(e,t)=>{const a=Object.keys(t),i=Object.values(t);await Promise.all(i).then(s=>{s.forEach((r,o)=>{if(r){const p=a[o];e[`${Ln}${p}`].premiumData=r}})})},br=e=>{const t={};for(const a in e){const i=e[a];i.premiumData&&(t[a]=i)}return t},hr=async(e,t,a)=>{const{strikesData:i,premiumPromisesData:s}=await Tr(e,t,a);return await fr(i,s),i},gr=async(e,t)=>{const{period:a}=t;t.protocolName="Hegic";const i=rr(e,a);return i?br(await hr(e,i,t)):{}},Tt="Lyra_",xr="USDC.e",Cr=["NotEnoughCollateral","TooMuchCollateral","EmptyCollateral","InsufficientQuoteBalance","InsufficientQuoteAllowance","InsufficientBaseBalance","InsufficientBaseAllowance","IncorrectOwner"],_r=e=>{const t=Cr.find(a=>a===e);if(!e||t)return!0},kr=(e,t)=>{var s;const a=(s=e.liveBoards().find(r=>r.expiryTimestamp===ze(t)))==null?void 0:s.id;return a?e.liveBoardsMap[a]:void 0},vr=(e,t)=>!e||!_r(t.disabledReason)?(t.disabledReason!=="DeltaOutOfRange"&&t.disabledReason!=="InsufficientLiquidity"&&console.log(t.disabledReason),!1):!0,Sr=(e,t,a)=>{const i=(d,u=18)=>xt.parseUnits(d.toFixed(u).toString(),u),s=Q.from(10).pow(18),r=2.5,o=a?e.strikePrice:e.strike().strikePrice,p=(e.newSize??e.size).mul(o).div(s).mul(i(r)).div(s);return t.max?t.max:p.gt(t.min)?p:t.min},wr=(e,t,a,i,s)=>{const{asset:r,protocolName:o,isCall:p,isBuy:l}=i,d=de(e,xr),u=(g,f)=>{const _=Q.from(g);return t.trade(s,a,p,l,_,ct,f)},y=(g,f)=>{const _=Dt(g,r);return u(_).then(k=>{const S=l?"maxTotalCost":"minTotalCost",I=k.params[0][S].toBigInt(),w=jt(I,js);return vr(w,k)?at(e,d.address,w).then(F=>{const E={inUSDC:F,inMarketToken:w,marketToken:d};return f?E:{premiumData:E,greeks:k.greeks}}):null})};return{calcPremium:g=>y(g,!0),calcPremiumWithGreeks:y,getCollateralData:(g,f)=>{const _=Q.from(g);return u(_,f).then(k=>{const{collateral:S}=k;S&&!S.max&&(k.collateral.max=Sr(k,S));const I=k.marketName.split("-")[0];return En(e,S,I)})},getBuilderParams:(g,f,_)=>{const k=wn(e,o),S=Q.from(g),I=f.premiumInMarketToken,w=yn(I,_),F=Q.from(w);return u(S,f).then(E=>{const A=E.params[0];return k.encodeFromLyra([A.strikeId,A.positionId,A.iterations,A.optionType,A.amount,A.setCollateralTo,A.minTotalCost,F,gn])})}}},Pr=(e,t,a,i,s)=>{const{protocolName:r,isCall:o,isBuy:p}=i,{strikeId:l,strikePrice:d}=a,u=l.toNumber(),y=U(d.toBigInt()),m=wr(e,t,u,i,s);return{market:"Lyra",protocolName:r,strike:y,strikeId:u,isCall:o,isBuy:p,utils:m}},Ar=(e,t,a)=>{const i=R(e,$);return a.utils.calcPremiumWithGreeks(i)},Dr=(e,t,a,i,s)=>{const{amount:r,asset:o}=a,p={},l={};return i.strikes.forEach(d=>{const u=Pr(e,t,d,a,s),y=Ar(r,o,u),{strike:m}=u;l[m]=y,p[`${Tt}${m}`]=u}),{strikesData:p,premiumWithGreeksPromisesData:l}},Br=async(e,t)=>{const a=Object.keys(t),i=Object.values(t);await Promise.all(i).then(s=>{s.forEach((r,o)=>{if(r){const{premiumData:p,greeks:l}=r;for(const u in l){const y=l[u];l[u]=U(y.toBigInt(),$,3)}const d=a[o];e[`${Tt}${d}`].premiumData=p,e[`${Tt}${d}`].greeks=l}})})},Mr=e=>{const t={};for(const a in e){const i=e[a];i.premiumData&&(t[a]=i)}return t},Er=async(e,t,a,i)=>{const{asset:s,expiryDate:r}=a;a.protocolName=`Lyra_${s}`;const o=kr(t,r);if(!o)return;const{strikesData:p,premiumWithGreeksPromisesData:l}=Dr(e,t,a,o,i);return await Br(p,l),Mr(p)},Ir=e=>{const{asset:t,strategy:a,amountStr:i,chosenDate:s,strategyStructure:r,hasSell:o,strikesDataArrState:p,chosenStrikesState:l,areStrikesLoadingState:d,lyraMarket:u,updateTriggers:y,resetTriggers:m,updateUnstableField:c}=e,C=W(),{account:g}=z(),[f,_]=p,[k,S]=l,[I,w]=d,F=()=>{w(!0);const j=[];r.forEach((P,D)=>{const L={asset:t,expiryDate:s,amount:ye(i),period:s-Date.now(),isCall:nt(P),isBuy:Ae(P)};f[D]={};const v=b=>{f[D]={...f[D],...b}};L.isBuy&&j.push(gr(C,{...L}).then(v)),u&&j.push(Er(C,u,{...L},g).then(v))}),Promise.all(j).then(()=>{const P=Qs(f),D=er(P);_([...D]),w(!1)})},E=()=>{S([])},A=()=>{_([])};return x.useEffect(()=>{E(),A()},m),x.useEffect(()=>{s&&F()},y),n.jsxs("div",{className:M("BuilderForm__field","BuilderForm__field_strike",!o&&"col-span-2"),children:[n.jsx("div",{className:"BuilderForm__field-header",children:n.jsx("span",{className:"tip","data-tooltip-id":"BuilderForm_StrikeTooltip",children:"Strike"})}),n.jsx("div",{className:"BuilderForm__field-body",children:r.map((j,P)=>{const D=vs(a),L=D&&D.indexOf(P)!==-1,v=tt(n.jsx(ir,{id:P,structureKey:j,asset:t,amountStr:i,strikesData:f[P],chosenStrikeData:k[P],setChosenStrikeData:b=>{if(k[P]=b,L){const T=b.strike,h=b.market;D.filter(O=>O!==P).forEach(O=>{const N=Ss(f[O][T],h);k[O]=N})}S([...k])}},P),I,n.jsx(be,{},P));return c(P,v),v})})]})};const Or=e=>{const{liqPrice:t,isLiqPriceLoading:a,isInLastHalf:i}=e,s=n.jsx("span",{className:"muted_light",children:"..."}),r=n.jsx("span",{className:"muted_light",children:"—"}),o=()=>`$${H(t)}`;return n.jsxs("div",{className:M("CollateralLiqPrice",i&&"CollateralLiqPrice_down"),children:["Liq. Price:",n.jsxs("span",{className:"CollateralLiqPrice__val",children:[a&&s,!a&&(t?o():r)]})]})};const jr=({min:e,max:t,collateralData:a,handleClick:i})=>n.jsx("div",{className:"CollateralRangeBtns",children:[e,t].map((s,r)=>{const o=a.isBase,l=(o?At:H)(s,o?3:0),d=r===0;return n.jsxs(Ee.Fragment,{children:[n.jsxs("button",{onClick:()=>i(l),children:[o?"":"$",l]},r),d?"—":""]},r)})});const Fr=({collateralData:e,collateralAmountStr:t,onChange:a})=>{const{isBase:i}=e,s=i?1:0,r=U(e.min,$,s),o=U(e.max,$,s),p=ye(t),l=i?.01:1;return n.jsx("div",{className:"CollateralSlider",children:n.jsx(Aa,{defaultValue:0,value:p,min:r,max:o,step:l,onChange:a})})},Lr=e=>{const{isInLastHalf:t,getCollateralData:a,collateralData:i,setCollateralData:s,collateralTokens:r,chosenStrike:o,updateTriggers:p,resetTriggers:l}=e,[d,u]=x.useState(""),[y,m]=x.useState(r[0]),[c,C]=x.useState(!1),[g,f]=x.useState(!1),_=()=>{u(""),m(r[0]),s(null)},k=()=>{u(""),s(null)};x.useEffect(()=>{_()},l),x.useEffect(()=>{o&&(C(!0),k(),S(!0))},[o,y]);const S=E=>{let A;if(!E&&d){const j=ye(d);A=R(j)}a(y,A).then(j=>{s(j),C(!1),f(!1)})};bt(()=>{c||(f(!0),S())},800,[d,...p]);const I=Bt([d,u],{placeholder:"0"}),w=r.map(E=>({value:E,label:n.jsx(ee,{symbol:E,isHlight:!0,children:E})})),F=M(I.hasFocus&&"hlight");return n.jsx("div",{className:M("CollateralChooser",F),children:o?n.jsxs(n.Fragment,{children:[i&&n.jsx(Or,{liqPrice:i.liquidationPrice,isLiqPriceLoading:g,isInLastHalf:t}),tt(n.jsxs("div",{className:"CollateralChooser__input-container",children:[n.jsx("div",{className:"CollateralChooser__input",children:I.node}),i&&n.jsx(jr,{min:i.min,max:i.max,collateralData:i,handleClick:E=>{u(E)}}),i&&n.jsx(Fr,{collateralData:i,collateralAmountStr:d,onChange:E=>{const A=Ie(E);u(A)}})]}),c),n.jsx("div",{className:"CollateralChooser__token-selector",children:n.jsx(Pe,{options:w,defaultValue:y,isDisabled:w.length===1,onChange:E=>{m(E.value)}},`CollateralChooser__token-selector_${y}`)})]}):n.jsx(Ve,{children:"Strike required"})})},Nr=e=>{const{asset:t,amountStr:a,strategy:i,strategyStructure:s,hasSell:r,chosenStrikes:o,collateralDataArrState:p,updateTriggers:l,resetTriggers:d,updateUnstableField:u}=e,[y,m]=p,c=()=>{m([])};x.useEffect(()=>{c()},d);const C=(f,_)=>{y[f]=_,m([...y])},g=(f,_,k)=>{const S=o[f];if(!S||!S.utils.getCollateralData)return new Promise(()=>{});const I=R(ye(a)),w=qi(_),F=Q.from(k??0);return S.utils.getCollateralData(I,{isBaseCollateral:w,setToCollateral:F})};return r?n.jsxs("div",{className:"BuilderForm__field BuilderForm__field_collateral",children:[n.jsx("div",{className:"BuilderForm__field-header",children:n.jsx("span",{className:"tip","data-tooltip-id":"BuilderForm_CollateralTooltip",children:"Collateral"})}),n.jsx("div",{className:"BuilderForm__field-body",children:s.map((f,_)=>{if(Ae(f))return n.jsx("div",{className:"BuilderForm__field-empty-row",children:ne()},_);const S=o[_],I=ks(f,i,t),w=_>(s.length-1)/2,F=n.jsx(Lr,{isInLastHalf:w,collateralTokens:I,collateralData:y[_],setCollateralData:E=>C(_,E),getCollateralData:(E,A)=>g(_,E,A),chosenStrike:S,updateTriggers:l,resetTriggers:d},_);return u(_,F),F})})]}):null};const Rr=e=>{const{strategyStructure:t,unstableFields:a,chosenStrikes:i,strikesDataArr:s,areStrikesLoading:r}=e;return rt()?n.jsxs("div",{className:"BuilderMobileContainer BuilderForm__field",children:[n.jsx("div",{className:"BuilderForm__field-header",children:"Expiration Date"}),n.jsx("div",{className:"BuilderForm__field-body",children:t.map((p,l)=>{const d=r||!!s[l],u=!!i[l],y=!!a.collateral[l],m=l===t.length-1;return n.jsxs("div",{className:"BuilderMobileContainer__item",children:[n.jsx("div",{className:M("BuilderMobileContainer__item-date",d&&"mb-7"),children:a.date[l]}),n.jsx("div",{className:"BuilderMobileContainer__item-strike",children:a.strike[l]}),y&&u&&n.jsxs("div",{className:M("BuilderMobileContainer__item-collateral"),children:[n.jsx("div",{className:"BuilderMobileContainer__item-title",children:n.jsx("span",{className:"tip","data-tooltip-id":"BuilderForm_CollateralTooltip",children:"Collateral"})}),a.collateral[l]]}),d&&!m&&n.jsx(Oe,{})]},l)})})]}):null},Ur=e=>{const{assetState:t,strategyState:a,amountStrState:i,dateListState:s,chosenDateState:r,strikesDataArrState:o,chosenStrikesState:p,collateralDataArrState:l}=e,[d]=t,[u]=a,[y]=i,[m]=r,c=ie[u].structure,C=It(c),g=x.useState(!1),[f]=g,[_]=p,[k]=o,S=W(),I=Qt(S),[w,F]=x.useState(null),E=()=>{F(null);const v=`W${d}`;I.markets().then(b=>{const T=b.find(h=>h.baseToken.symbol===v);F(T)})};x.useEffect(()=>{E()},[d]);const A={date:[d,w],strike:[m],collateral:[y]},j={date:[d,u],strike:[d,u,m],collateral:[d,u,m],unstableFields:[u]},[P,D]=x.useState({date:[],strike:[],collateral:[]}),L=(v,b,T)=>{P[v][b]=T};return x.useEffect(()=>{D({date:[],strike:[],collateral:[]})},j.unstableFields),n.jsxs("div",{className:"BuilderForm__fields",children:[n.jsx(fs,{assetState:t,isDisabled:f}),n.jsx(hs,{strategyState:a,isDisabled:f}),n.jsx(Ts,{amountStrState:i,strategy:u}),n.jsx(Ws,{strategyStructure:c,dateListState:s,chosenDateState:r,lyraMarket:w,updateTriggers:A.date,resetTriggers:j.date,isDisabled:f,updateUnstableField:(v,b)=>{L("date",v,b)}}),n.jsx(Ir,{asset:d,strategy:u,amountStr:y,chosenDate:m,strategyStructure:c,hasSell:C,strikesDataArrState:o,chosenStrikesState:p,areStrikesLoadingState:g,lyraMarket:w,updateTriggers:A.strike,resetTriggers:j.strike,updateUnstableField:(v,b)=>{L("strike",v,b)}}),n.jsx(Nr,{asset:d,strategy:u,amountStr:y,strategyStructure:c,hasSell:C,chosenStrikes:_,collateralDataArrState:l,updateTriggers:A.collateral,resetTriggers:j.collateral,updateUnstableField:(v,b)=>{L("collateral",v,b)}}),n.jsx(Rr,{strategyStructure:c,unstableFields:P,chosenStrikes:_,strikesDataArr:k,areStrikesLoading:f})]})},Hr=()=>n.jsxs(re,{id:"BuilderForm_StrikeTooltip",children:[n.jsx("h6",{children:"Hegic Options (American options)"}),n.jsxs("p",{className:"my-5",children:["They require manual exercise before ",n.jsx("br",{}),"the expiration date. ",n.jsx("br",{}),"There are no secondary markets; out-",n.jsx("br",{}),"of-the-money options can't be sold."]}),n.jsx("h6",{children:"Lyra (European options)"}),n.jsxs("p",{className:"my-5",children:["They are only exercised automatically ",n.jsx("br",{}),"at the expiration date. ",n.jsx("br",{}),"Secondary markets are available; out-",n.jsx("br",{}),"of-the-money options can be sold."]})]});const $r=({strategy:e})=>{const t=ie[e],{outlooks:a,profit:i,loss:s,description:r}=t.stats;return n.jsxs(re,{className:"WhenPurchaseTooltip",id:"BuilderForm_WhenPurchaseTooltip",place:"bottom-end",children:[n.jsxs("div",{className:"WhenPurchaseTooltip__header",children:[n.jsx("h2",{className:"WhenPurchaseTooltip__title",children:e}),n.jsx("div",{className:"WhenPurchaseTooltip__outlooks",children:a.map(o=>{const p=cs[o];return n.jsx("div",{className:"WhenPurchaseTooltip__outlook",style:{color:p},children:o},o)})})]}),n.jsxs("div",{className:"WhenPurchaseTooltip__body",children:[n.jsx("h3",{className:"WhenPurchaseTooltip__subtitle",children:"When purchase"}),n.jsx("p",{className:"WhenPurchaseTooltip__description",children:r}),n.jsx("div",{className:"WhenPurchaseTooltip__stats",children:[i,s].map((o,p)=>{const l=p===0?"Profit":"Loss";return n.jsxs("div",{className:"WhenPurchaseTooltip__stats-item",children:[n.jsx("div",{className:"WhenPurchaseTooltip__stats-item-name",children:l}),n.jsx("div",{className:"WhenPurchaseTooltip__stats-item-value",children:o})]},`${l}_${o}`)})})]})]})},Wr=()=>n.jsxs(re,{id:"BuilderForm_CollateralTooltip",children:["This refers to the amount ",n.jsx("br",{}),"you’re setting aside ",n.jsx("br",{}),"as collateral for selling options"]}),qr=()=>n.jsxs(re,{id:"BuilderForm_MaxCostTooltip",children:["This is the highest amount ",n.jsx("br",{}),"you’ll pay for buying options. ",n.jsx("br",{}),"If the option price rises ",n.jsx("br",{}),"beyond this, your transaction ",n.jsx("br",{}),"will be reverted."]}),Gr=()=>n.jsxs(re,{id:"BuilderForm_MinReceivedTooltip",children:["This is the least amount you’re ",n.jsx("br",{}),"assured to receive when ",n.jsx("br",{}),"selling options. If the option ",n.jsx("br",{}),"price drops beyond this point, ",n.jsx("br",{}),"your transaction will ",n.jsx("br",{}),"be reverted."]}),Vr=()=>n.jsxs(re,{id:"BuilderForm_YouPayWarningTooltip",children:["Apparently, the collateral you've set ",n.jsx("br",{}),"is too small. This may result in instant ",n.jsx("br",{}),"liquidation of the position."]}),Kr=()=>n.jsxs(re,{id:"Builder_PremiumTooltip",children:[n.jsx("h6",{children:"Negative Premium"}),n.jsxs("div",{style:{margin:"3px 0 5px"},children:["Indicates the amount of USDC you ",n.jsx("br",{}),"have paid as an option buyer."]}),n.jsx("h6",{children:"Positive Premium"}),n.jsxs("div",{style:{margin:"3px 0"},children:["Denotes the amount of USDC you ",n.jsx("br",{}),"have received as an option seller."]})]}),Yr=({strategy:e})=>n.jsxs("div",{className:"BuilderTooltips",children:[n.jsx(Hr,{}),n.jsx($r,{strategy:e}),n.jsx(Wr,{}),n.jsx(Kr,{}),n.jsx(qr,{}),n.jsx(Gr,{}),n.jsx(Vr,{})]});const zr=({collateralCost:e,getCostNode:t})=>n.jsxs("div",{className:"BuilderCalculations__item",children:[n.jsx("div",{className:"BuilderCalculations__item-name tip","data-tooltip-id":"BuilderForm_CollateralTooltip",children:"Collateral"}),n.jsx("div",{className:M("BuilderCalculations__item-value",e&&e.inUSDC!==0n&&"tip"),"data-tooltip-id":"BuilderForm__CollateralCostDecompositionTooltip",children:t(e)})]}),Zr=({maxCost:e,getCostNode:t})=>n.jsxs("div",{className:"TradeCostValue",children:[n.jsx("div",{className:"BuilderCalculations__item-name tip","data-tooltip-id":"BuilderForm_MaxCostTooltip",children:"Max. Cost"}),n.jsx("div",{className:M("BuilderCalculations__item-value",e&&"tip"),"data-tooltip-id":"BuilderForm__MaxCostDecompositionTooltip",children:t(e,"-")})]}),Xr=({netCost:e,getCostNode:t})=>{const a=(e==null?void 0:e.inUSDC)<0?"negative":(e==null?void 0:e.inUSDC)>0?"positive":"neutral",i=ys[a];return n.jsxs("div",{className:"TradeCostValue",children:[n.jsx("div",{className:"BuilderCalculations__item-name",children:"Net. Cost"}),n.jsx("div",{className:M("BuilderCalculations__item-value",a),children:t(e,i)})]})},Qr=({minReceived:e,getCostNode:t})=>n.jsxs("div",{className:"TradeCostValue",children:[n.jsx("div",{className:"BuilderCalculations__item-name tip","data-tooltip-id":"BuilderForm_MinReceivedTooltip",children:"Min. Received"}),n.jsx("div",{className:M("BuilderCalculations__item-value",e&&"tip"),"data-tooltip-id":"BuilderForm__MinReceivedDecompositionTooltip",children:t(e,"+")})]});const Jr=({hasBuy:e,hasSell:t,getCostNode:a,maxCost:i,minReceived:s,netCost:r})=>{const o={plus:n.jsx("span",{className:"helper-symbol mx-10 muted_light",style:{fontSize:18},children:"+"}),equal:n.jsx("span",{className:"helper-symbol mx-10 muted_light",style:{fontSize:17},children:"="})},p=e&&t;return n.jsxs("div",{className:"TradeCostItem BuilderCalculations__item",children:[e&&n.jsx(Zr,{maxCost:i,getCostNode:a}),p&&o.plus,t&&n.jsx(Qr,{minReceived:s,getCostNode:a}),p&&n.jsxs(n.Fragment,{children:[o.equal,n.jsx(Xr,{netCost:r,getCostNode:a})]})]})},eo=({hasBuy:e,hasSell:t,hasChosenStrike:a,maxCost:i,minReceived:s,netCost:r,collateralCost:o})=>{const p=(l,d)=>!a||ae(l)||(l==null?void 0:l.inUSDC)===0n?"$0":vn(()=>`${d??""}$${H(l.inUSDC<0?-l.inUSDC:l.inUSDC)}`,!l);return n.jsxs("div",{className:"BuilderCostItems BuilderCalculations__items",children:[n.jsx(Jr,{hasBuy:e,hasSell:t,getCostNode:p,maxCost:i,minReceived:s,netCost:r}),t&&n.jsx(zr,{collateralCost:o,getCostNode:p})]})};const Nn=({id:e,decompositionArr:t,...a})=>n.jsx(re,{className:"TooltipDecomposition",id:e,place:"bottom-end",...a,children:t.map((i,s)=>{const r=s===t.length-1;return n.jsxs(Ee.Fragment,{children:[n.jsxs("div",{className:"TooltipDecomposition__item",children:[n.jsx("div",{className:"TooltipDecomposition__item-name",children:i.nameNode}),n.jsx("div",{className:"TooltipDecomposition__item-value",children:i.valueNode})]}),!r&&n.jsx(Oe,{})]},s)})}),to=({id:e,priceDecompositionArr:t})=>{const i=(()=>t.map(r=>{const o=r.marketToken.isStable,p=n.jsx(ee,{symbol:r.marketToken.symbol,isHlight:!0,children:Se(r.inMarketToken,o)}),l=`$${H(r.inUSDC,2)}`;return{nameNode:p,valueNode:l}}))();return n.jsx(Nn,{id:e,decompositionArr:i})},no=({maxCost:e,minReceived:t,collateralCost:a})=>{const i=[{id:"BuilderForm__MaxCostDecompositionTooltip",decomposition:e==null?void 0:e.decomposition,isZero:(e==null?void 0:e.inUSDC)===0n},{id:"BuilderForm__MinReceivedDecompositionTooltip",decomposition:t==null?void 0:t.decomposition,isZero:(t==null?void 0:t.inUSDC)===0n},{id:"BuilderForm__CollateralCostDecompositionTooltip",decomposition:a==null?void 0:a.decomposition,isZero:(a==null?void 0:a.inUSDC)===0n}];return n.jsx("div",{className:"CostDecompositionTooltips",children:i.map(s=>!s.decomposition||s.isZero?null:n.jsx(to,{id:s.id,priceDecompositionArr:s.decomposition},s.id))})},ao=({strategy:e,amountStr:t,chosenStrikesState:a,collateralDataArrState:i,setYouPay:s,isBuyModalOpen:r})=>{const o=ie[e].structure,p=It(o),l=xs(o),[d,u]=a,[y,m]=i,[c,C]=x.useState(null),[g,f]=x.useState(null),[_,k]=x.useState(null),[S,I]=x.useState(null),w=Cs(d),F=!!y.find(b=>b),E=b=>{d[b]=null,y[b]=null,u([...d]),m([...y])},A={sum:b=>b.reduce((h,B,O)=>{if(O===0)return{inUSDC:B.inUSDC,decomposition:[B]};const N=h.decomposition;return N[O]={marketToken:B.marketToken,inMarketToken:B.inMarketToken,inUSDC:B.inUSDC},{inUSDC:h.inUSDC+B.inUSDC,decomposition:N}},b[0]),separateBuyFromSell:b=>{const T=[],h=[];return b.forEach(B=>{B&&(B.isBuy?T.push(B):h.push(B))}),{buyCosts:T,sellCosts:h}},getArgsForHandler:b=>{const{reset:T}=j[b],{isAllowed:h,update:B}=D[b];return[T,h,B]}},j={collateral:{reset:()=>{I({inUSDC:0n})}},trade:{reset:()=>{C(null),f(null),k(null)}},youPay:{reset:()=>{s(null)}}},P={collateral:{calc:()=>{const b=y.filter(h=>h);return A.sum(b)}},trade:{calc:()=>{if(!t)return;const b=[],T=R(ye(t));return d.forEach((h,B)=>{h&&b.push(h.utils.calcPremium(T).then(O=>O?(h.premiumData=O,h.amount=T,O.isBuy=h.isBuy,O):(E(B),null)))}),Promise.all(b).then(h=>{const{buyCosts:B,sellCosts:O}=A.separateBuyFromSell(h);return{maxCost:A.sum(B),minReceived:A.sum(O)}})}},youPay:{calc:()=>{if(p){if(S!=null&&S.inUSDC)return{inUSDC:S.inUSDC+((c==null?void 0:c.inUSDC)??0n),decomposition:Ps(o,c==null?void 0:c.decomposition,S.decomposition)}}else return{inUSDC:c.inUSDC,decomposition:c.decomposition}}}},D={collateral:{triggers:[y],isAllowed:F&&w,update:()=>{const b=P.collateral.calc();I(b)}},trade:{triggers:[d],debouncedTriggers:[t],isAllowed:w,update:()=>{P.trade.calc().then(b=>{const{maxCost:T,minReceived:h}=b;C(T),f(h);const B={inUSDC:((h==null?void 0:h.inUSDC)??0n)-((T==null?void 0:T.inUSDC)??0n)};k(B)})}},youPay:{triggers:[_,S],isAllowed:!!(p?_!=null&&_.inUSDC&&(S!=null&&S.inUSDC):_!=null&&_.inUSDC),update:()=>{const b=P.youPay.calc();s(b)}}},L=(b,T,h)=>{b(),T&&h()};return Object.keys(D).forEach(b=>{const T=()=>{L(...A.getArgsForHandler(b))},h=[...D[b].triggers],B=D[b].debouncedTriggers&&[...D[b].debouncedTriggers];B&&bt(T,800,B),x.useEffect(T,h)}),n.jsxs("div",{className:M("BuilderCost",p&&"has-sell"),children:[n.jsx(eo,{hasBuy:l,hasSell:p,hasChosenStrike:w,maxCost:c,minReceived:g,netCost:_,collateralCost:S}),n.jsx(no,{maxCost:c,minReceived:g,collateralCost:S})]})};const io=({decompositionData:e})=>n.jsx("div",{className:"GreeksDecompositionTooltips",children:mt.map(t=>{const a=e[t];if(!a||!a.length)return null;const s=`BuilderForm_${Sn(t)}DecompositionTooltip`;return n.jsx(Nn,{id:s,decompositionArr:a},s)})}),so=({chosenStrikes:e})=>{const t={};mt.forEach(p=>{t[p]=[]});const a=(p,l)=>{const d=p.greeks[l],u={nameNode:n.jsx(st,{strikeData:p,priceNode:`$${pe(p.strike)}`}),valueNode:d};t[l].push(u)},i=()=>n.jsx("div",{className:"BuilderCalculations__items",children:mt.map(p=>{const l=Sn(p),d=e.reduce((u,y)=>{if(!y)return u;a(y,p);const m=y.greeks[p];return u+m},0);return n.jsxs("div",{className:"BuilderCalculations__item",children:[n.jsx("div",{className:"BuilderCalculations__item-name",children:l}),n.jsx("div",{className:M("BuilderCalculations__item-value",e.length&&"tip"),"data-tooltip-id":`BuilderForm_${l}DecompositionTooltip`,children:Xe(d,3)})]},p)})}),s=()=>n.jsx(On,{renderHeader:({state:p})=>`${p.isEnter?"Hide":"Show"} greeks`,children:i()}),o=rt(576);return n.jsxs("div",{className:"BuilderGreeks",children:[o?s():i(),n.jsx(io,{decompositionData:t})]})};const ro=({youPayState:e,paymentToken:t})=>{const a=W(),[i,s]=e,r=()=>i.inUSDC<0?new Promise(u=>{u(null)}):Ls(a,t.address,i.inUSDC),o={triggers:[i],isAllowed:!!(i&&t&&ae(i.inPaymentToken)),update:()=>{r().then(u=>{setTimeout(()=>{i.paymentToken=t,i.inPaymentToken=u,s({...i})},1e3)})}},p={triggers:[t.symbol],isAllowed:!!i,reset:()=>{i.inPaymentToken=void 0,s({...i})}};x.useEffect(()=>{o.isAllowed&&o.update()},[...o.triggers]),x.useEffect(()=>{p.isAllowed&&p.reset()},[...p.triggers]);const l={getNegativeValueNode:()=>n.jsx(ee,{children:n.jsx("span",{className:"negative tip","data-tooltip-id":"BuilderForm_YouPayWarningTooltip",children:H(i.inUSDC,0)})}),getPaymentTokenNode:()=>Se(i.inPaymentToken,i.paymentToken.isStable),getUsdcNode:()=>`$${H(i.inUSDC,2)}`,getApproximatelySymbolNode:()=>n.jsx("span",{className:"muted_light mx-5",style:{fontSize:16},children:ds})};return(()=>!i||!t?ne():i.inPaymentToken===null?l.getNegativeValueNode():ae(i.inPaymentToken)?n.jsx(be,{}):n.jsxs(ee,{isHlight:!0,symbol:t.symbol,children:[l.getPaymentTokenNode(),l.getApproximatelySymbolNode(),l.getUsdcNode()]}))()};const oo=({className:e,options:t,defaultOption:a,defaultValue:i,onChange:s,...r})=>n.jsx(Pe,{className:M("SelectorInline",e),options:t,defaultOption:a,defaultValue:i,onChange:s,...r}),po=e=>{const{account:t}=z();return e.map(i=>{let{data:s}=ta({address:t,token:i.isETH?null:i.address,watch:!0});return s||(s={value:0n}),{...s,address:i.address,symbol:i.symbol,isETH:i.isETH,isStable:i.isStable}})},lo=e=>{const{isConnected:t,account:a}=z(),i=W(),s=po(e),{data:r}=je(t&&[a,"useTokenBalancesUSDC",s],async()=>{const o=[],p=[];return s.forEach((l,d)=>{l&&(l.inTokenDecimals=l.value,l.inDefaultDecimals=le(l.value,l.decimals),p.push(at(i,l.address,l.inDefaultDecimals).then(u=>{o[d]={...l,inUSDC:u}}).catch(u=>{console.log(`Swapping ${l.symbol} to USDC error.

`+u),o[d]=null})))}),await Promise.all(p),o});return r??[]},uo=({paymentTokens:e,paymentToken:t,setPaymentToken:a})=>{const{isConnected:i,account:s}=z(),r=lo(e),o=()=>{const u=r.find(y=>y.symbol===t.symbol);u!==t.balance&&a({...t,balance:u})};x.useEffect(()=>{o()},[r,s]);const p=u=>i?u===null?ne("Error"):ae(u)||ae(u.inUSDC)?n.jsx(be,{}):`$${H(u.inUSDC,0)}`:ne(),l=e.map((u,y)=>{const m=r[y],c=p(m);return{label:n.jsxs("div",{className:"PaymentTokenSelector__item",children:[n.jsx("div",{className:"PaymentTokenSelector__item-name",children:n.jsx(ee,{symbol:u.symbol,isHlight:!0,children:u.symbol})}),n.jsx("div",{className:"PaymentTokenSelector__item-value",children:c})]}),value:u.symbol,balance:m}}),d=[{label:n.jsxs("div",{className:"PaymentTokenSelector__item",children:[n.jsx("div",{children:"Asset"}),n.jsx("div",{children:"Balance, $"})]}),options:l}];return n.jsx(oo,{className:"PaymentTokenSelector",options:d,defaultValue:t.symbol,onChange:u=>{a({symbol:u.value,balance:u.balance})}},s)},yo=({paymentToken:e,setPaymentToken:t,youPayState:a,confirmButtonNode:i})=>{const{isConnected:s}=z(),r=W(),o=mi(r),p=()=>{if(!s)return ne();if(e.balance===null)return ne("Error");if(ae(e.balance))return n.jsx(be,{});const l=e.balance.value===0n?0:void 0;return n.jsx(ee,{symbol:e.symbol,isHlight:!0,children:Se(e.balance.inDefaultDecimals,e.isStable,l)})};return n.jsxs("div",{className:"BuilderSwap",children:[n.jsxs("div",{className:"BuilderCalculations__items",children:[n.jsxs("div",{className:"BuilderCalculations__item",children:[n.jsx("div",{className:"BuilderCalculations__item-name",children:"Select Payment method"}),n.jsx("div",{className:"BuilderCalculations__item-value",children:n.jsx(uo,{paymentTokens:o,paymentToken:e,setPaymentToken:t})})]}),n.jsxs("div",{className:"BuilderCalculations__item",children:[n.jsx("div",{className:"BuilderCalculations__item-name",children:"You pay"}),n.jsx("div",{className:"BuilderCalculations__item-value",children:n.jsx(ro,{youPayState:a,paymentToken:e})})]}),n.jsxs("div",{className:"BuilderCalculations__item",children:[n.jsx("div",{className:"BuilderCalculations__item-name",children:"Balance"}),n.jsx("div",{className:"BuilderCalculations__item-value",children:p()})]})]}),i]})},co=(e,t,a,i,s,r)=>{const{isConnected:o}=z(),p=It(t),l=()=>{if(!e)return"Enter Amount";if(a.length!==t.length||!a.every(c=>c))return"Fill out the Strike fields";const m=!!i.find(c=>c&&c.inMarketToken===0n);if(p&&m)return"Fill out the Collateral fields";if(!s)return"Please, wait...";if(s>r)return"Insufficient balance"};return{getError:l,getIsBtnEnabled:()=>o?!l():!0,getBtnText:()=>{const y="Buy Strategy";return o?l()??y:"Connect wallet"}}},mo=({strategy:e,amountStr:t,youPayState:a,chosenStrikesState:i,collateralDataArrState:s,openBuyModal:r,isBuyModalOpen:o})=>{var F;const{isConnected:p}=z(),{connectWallet:l}=bn(),d=W(),[u,y]=ht("builder-payment-token","ETH"),[m,c]=x.useState({symbol:u});x.useEffect(()=>{if(y(m.symbol),!m.address){const E=de(d,m.symbol);c({...m,...E})}},[m]);const[C]=i,[g]=s,[f,_]=a,k=ie[e].structure,{getIsBtnEnabled:S,getBtnText:I}=co(t,k,C,g,f==null?void 0:f.inPaymentToken,(F=m.balance)==null?void 0:F.inDefaultDecimals),w=n.jsx(Te,{className:"BuilderForm__button",onClick:p?r:l,isDisabled:!S(),children:I()});return n.jsxs("div",{className:"BuilderCalculations",children:[n.jsx(so,{chosenStrikes:C}),n.jsx(ao,{strategy:e,amountStr:t,chosenStrikesState:i,collateralDataArrState:s,setYouPay:_,isBuyModalOpen:o}),n.jsx(yo,{youPayState:a,paymentToken:m,setPaymentToken:c,confirmButtonNode:w})]})};const To=({stagesArr:e})=>n.jsx("div",{className:"Stages",children:e.map(t=>n.jsx("div",{className:M("Stages__item",t.isActive&&"active"),children:t.name},t.name))}),Rn=(e,t,a)=>{const{account:i}=z(),s=W(),r=de(s,e);return{check:()=>r.isETH?new Promise(p=>p(!0)):$i(s,r,i,t,a),approve:(p,l)=>{if(r.isETH)throw new Error("Trying to approve ETH");return Hi(s,r,t,a,p,l)}}},fo=(e,t,a,i,s={setIsLoading:()=>{},closeModal:()=>{},addPendingPosition:()=>{}})=>{const r=W(),o=ie[e],{setIsLoading:p,closeModal:l,addPendingPosition:d}=s,{paymentToken:u,decomposition:y}=i,m=u.isETH,[c,C]=x.useState({moduleArr:[],parametersArr:[],swapDataArr:[],productType:o.key}),[g,f]=x.useState([]),_=()=>g.reduce((j,P)=>j+P,0n),k=new K(...Y(r,"TxBuilder"),xe()),S=(A,j)=>{const P=ms[A.protocolName];return k.module(P).then(D=>{c.moduleArr[j]=D})},I=(A,j)=>{const P=a[j],D={setToCollateral:P&&Q.from(P.inMarketToken),isBaseCollateral:P==null?void 0:P.isBase,premiumInMarketToken:A.premiumData.inMarketToken};return A.utils.getBuilderParams(A.amount,D,u.decimals).then(L=>{c.parametersArr[j]=L})},w=(A,j)=>{const P=y[j],D=new K(...Y(r,"Exchanger"),te(r)),L=P.marketToken,v=Ns(u.address,L.address),b=P.inMarketToken,T=u.address!==L.address;return Ot(r,L.address,u.address,b).then(h=>jt(h,_n)).then(h=>(m&&(g.push(h),f([...g])),D.encodeFromExchange({path:v,tokenIn:u.address,tokenOut:L.address,amountIn:We(h,u.decimals),amountOutMinimum:We(b,L.decimals),isETH:m,swap:T}).then(B=>{c.swapDataArr[j]=B})))},F=()=>{const A=[];return t.forEach((j,P)=>{A.push(S(j,P),I(j,P),w(j,P))}),Promise.all(A).then(()=>{C({...c})}).catch(()=>p(!1))};return()=>{p(!0);const{amount:A,asset:j}=t[0];return F().then(()=>{const P=U(A),D=P!==1,L=o.plural??`${e}s`;return Je(r,k.consolidationOfTransactions,[c.moduleArr,c.parametersArr,c.swapDataArr,c.productType,g.length?{value:_()}:{}],`${P} ${D?L:e} opened.`,p,l)}).then(()=>{f([])})}},Un=()=>({opening:[],closing:[]}),De=x.createContext(Un()),Gt=(e,t)=>{const[a,i]=e;for(const s in a){const r=a[s];if(r.length){const o=r.filter(p=>p.market!==t);a[s]=o,i({...a})}}},bo=({isOpen:e,setIsOpen:t,asset:a,strategy:i,amountStr:s,chosenStrikes:r,collateralDataArr:o,youPay:p})=>{const l=W(),d=ie[i],[u,y]=x.useState(!1),[m,c]=x.useState(null),[C,g]=x.useContext(De),f=fo(i,r,o,p,{setIsLoading:y,closeModal:()=>t(!1),addPendingPosition:T=>{T.isOpening=!0,C.opening.push(T),g({...C})}}),k=["Approve","Buy"].map(T=>({name:T,isActive:m===T})),{paymentToken:S,inPaymentToken:I}=p,w=jt(I,_n),F=Se(I,S.isStable),E=S.symbol,A=`${F} ${E}`,j={Approve:`Approve ${A}`,Buy:`Pay ${A}`},P=new K(...Y(l,"Exchanger"),xe()),D=Rn(E,P.address,w);x.useEffect(()=>{e&&(c(null),D.check().then(T=>{c(T?"Buy":"Approve")}))},[e,p]);const L=()=>{if(!m)return"Please, wait...";if(u){if(m==="Approve")return`Approving ${E}...`;if(m==="Buy")return`Buying ${i}...`}},v={approve:()=>{D.approve(y,()=>c("Buy"))},buy:f},b={getBtnText:()=>L()??j[m],getIsBtnEnabled:()=>!L(),getBtnOnClick:()=>{switch(m){case"Approve":return v.approve;case"Buy":return v.buy}}};return n.jsxs(et,{className:"BuyBuildModal",isOpen:e,setIsOpen:t,children:[n.jsx(To,{stagesArr:k}),n.jsx("h1",{className:"BuyBuildModal__title",children:m??n.jsx(be,{})}),n.jsxs("div",{className:"BuyBuildModal__strategy",children:["Strategy",n.jsxs("div",{className:"BuyBuildModal__strategy-info",children:[n.jsx("span",{className:"BuyBuildModal__strategy-name",style:{color:d.color},children:i}),n.jsx(Oe,{isVertical:!0}),n.jsx(ee,{className:"BuyBuildModal__strategy-amount",symbol:a,isHlight:!0,children:s})]})]}),m==="Buy"&&n.jsx(n.Fragment,{children:n.jsxs("p",{className:"BuyBuildModal__hint",children:["Sharwa.Finance will auto-convert your ",A," into tokens compatible with the options protocols where your positions are to be opened, using Uniswap v3."]})}),n.jsx(Te,{className:"BuyBuildModal__button",isDisabled:!b.getIsBtnEnabled(),onClick:b.getBtnOnClick(),children:b.getBtnText()})]})},ho=({assetState:e,strategyState:t,amountStrState:a,dateListState:i,chosenDateState:s,strikesDataArrState:r,chosenStrikesState:o,collateralDataArrState:p})=>{const l=x.useState(null),[d]=l,[u,y]=x.useState(!1),[m]=e,[c]=t,[C]=a,[g]=o,[f]=p,_=()=>{y(!0)};return n.jsxs("div",{className:"BuilderForm App-box",children:[n.jsx(Ur,{assetState:e,strategyState:t,amountStrState:a,dateListState:i,chosenDateState:s,strikesDataArrState:r,chosenStrikesState:o,collateralDataArrState:p}),n.jsx(mo,{strategy:c,amountStr:C,youPayState:l,chosenStrikesState:o,collateralDataArrState:p,openBuyModal:_,isBuyModalOpen:u}),(d==null?void 0:d.inPaymentToken)&&n.jsx(bo,{isOpen:u,setIsOpen:y,asset:m,strategy:c,amountStr:C,chosenStrikes:g,collateralDataArr:f,youPay:d}),n.jsx(Yr,{strategy:c})]})};const go=({asset:e,strategy:t,amountStr:a,chosenStrikes:i,collateralDataArr:s})=>{var b;const r=ie[t].structure,o=x.useRef(null),p=ye(a),l={amount:p,strikes:i.map(T=>T==null?void 0:T.strike),premiums:i.map(T=>{const h=T==null?void 0:T.premiumData.inUSDC;return h&&U(h)}),strategies:r,collaterals:s,isReady:p&&i.length===r.length&&i.every(T=>T)},d=e==="ETH",u=d?.3:.2,y=d?5:10,m=100,c=Ge(e),C=U(c),g=C&&Math.round(C/y)*y,f=(T,h)=>{const B=l.strategies[T],O=l.premiums[T],N=l.strikes[T],q=l.amount,G=l.collaterals[T],Z=(G==null?void 0:G.liquidationPrice)&&U(G.liquidationPrice),ce=G&&U(G.inMarketToken),Ce=G==null?void 0:G.isBase;let V;if(O){switch(B){case 1:h<N?V=-O:V=(h-N)*q-O;break;case 2:h>N?V=-O:V=(N-h)*q-O;break;case-1:if(Z&&h>Z)Ce?V=-(ce*Z)+O:V=-ce+O;else if(Ce){const Vn=(N-C)*q+O;h>N?V=Vn:V=(h-C)*q+O}else h<N?V=O:V=(N-h)*q+O;break;case-2:Z&&h<Z?Ce?V=-(ce*Z)+O:V=-ce+O:h>N?V=O:V=(h-N)*q+O;break}if(V)return Number(V)}},k=(()=>{if(!l)return;const T=l.strikes.reduce((G,Z)=>(G+Z)/2,l.strikes[0]),h=window.innerWidth>480?u:u-.05,B=Math.round(T*(1-h)/100)*100,O=Math.round(T*(1+h)/100)*100,N=[];for(let G=0;G<(O-B)/y;G++){const Z=B+G*y;N.push(Z)}const q=[];return l.strategies.forEach((G,Z)=>{N.forEach((ce,Ce)=>{const V=f(Z,ce);Z===0?q.push({closePrice:ce,pnl:V}):q[Ce].pnl=q[Ce].pnl+V})}),q})(),S=(b=k.reduce((T,h)=>h.pnl>T.pnl?h:T,k[0]))==null?void 0:b.pnl,I=S&&pe(S.toFixed(0)),F=(()=>{if(!k)return;const T=Math.max(...k.map(O=>O.pnl)),h=Math.min(...k.map(O=>O.pnl));if(T<=0)return 0;if(h>=0)return 1;const B=T/(T-h);return isNaN(B)?0:B})(),E=({value:T,cx:h,cy:B})=>{const O=T[1];let N;return O<0?N=J:O>0?N=ge:N=Ne,n.jsx("circle",{cx:h,cy:B,r:5,style:{opacity:"0.9"},fill:N})},A=T=>{const{active:h,payload:B,label:O}=T,N=h&&B&&B.length&&Number(B[0].value.toFixed(2));return h&&B&&B.length?n.jsxs("div",{className:"react-tooltip",children:[n.jsx(ee,{currencyName:e,isHlight:!0,isSmall:!0,children:pe(O)}),n.jsxs("p",{children:["PnL ",n.jsx("span",{className:M({positive:N>0,negative:N<0}),children:`${N!==0?N>0?"+":"-":""}$${pe(Math.abs(N))}`})]})]}):null},j=T=>pe(T),P={fill:Ne,fontSize:13},D=ot,[L,v]=x.useState(null);return x.useEffect(()=>{if(o.current&&k){let T;const h=Math.round(m/(o.current.clientWidth/k.length));h<20?T=19:T=Math.floor(h/20)*20-1,v(T)}},[o.current,k,window.innerWidth]),n.jsx("div",{className:"BuilderPositionChart App-box",ref:o,children:l.isReady?n.jsx(Da,{children:n.jsxs(Ba,{data:k,margin:{left:(I==null?void 0:I.length)*7.5-40},children:[n.jsx(Ma,{dataKey:"closePrice",interval:L,tickFormatter:j,tick:P,stroke:D}),n.jsx(Ea,{dataKey:"pnl",tickFormatter:j,tick:P,stroke:D,padding:{bottom:15}}),n.jsx(Ia,{cursor:{stroke:Ne},content:n.jsx(A,{})}),n.jsx(Oa,{type:"monotone",dot:!1,dataKey:"pnl",stroke:"url(#splitColor)",activeDot:n.jsx(E,{}),fill:"url(#splitColorTransparent)"}),n.jsxs("defs",{children:[n.jsxs("linearGradient",{id:"splitColor",x1:"0",y1:"0",x2:"0",y2:"1",children:[n.jsx("stop",{offset:F,stopColor:ge,stopOpacity:1}),n.jsx("stop",{offset:F,stopColor:J,stopOpacity:1})]}),n.jsxs("linearGradient",{id:"splitColorTransparent",x1:"0",y1:"0",x2:"0",y2:"1",children:[n.jsx("stop",{offset:F,stopColor:ge,stopOpacity:.3}),n.jsx("stop",{offset:F,stopColor:J,stopOpacity:.3})]})]}),n.jsx(Lt,{x:g,stroke:ot,strokeDasharray:"3 3",label:{value:"Current Price",fill:ot,fontSize:window.innerWidth>768?15:13,position:"insideTopLeft",writingMode:"tb-rl",offset:9}}),l.collaterals.length&&l.collaterals.map(T=>{if(!T||!T.liquidationPrice)return;const h=U(T.liquidationPrice),B=Math.round(h/y)*y;return n.jsx(Lt,{x:B,stroke:J,strokeDasharray:"3 3",label:{value:"Liq. Price",fill:J,fontSize:window.innerWidth>768?15:13,position:"insideTopLeft",writingMode:"tb-rl",offset:9}},h)}),n.jsx(ja,{stroke:"rgba(58, 68, 102, 0.15)"})]})}):n.jsx(Ve,{children:"Fill out the Strike fields to view position chart"})})},xo=e=>{const{assetState:t}=e,a=ht("builder-strategy","Long Call"),i=x.useState("1"),s=x.useState([]),r=x.useState(null),o=x.useState([]),p=x.useState([]),l=x.useState([]),[d]=t,[u]=a,[y]=i,[m]=p,[c]=l;return n.jsxs("div",{className:"BuilderDashboard",children:[n.jsx(ho,{assetState:t,strategyState:a,amountStrState:i,dateListState:s,chosenDateState:r,strikesDataArrState:o,chosenStrikesState:p,collateralDataArrState:l}),n.jsx(go,{asset:d,strategy:u,amountStr:y,chosenStrikes:m,collateralDataArr:c})]})},Hn=async(e,t,a,i)=>{const s=a%t;if(i+1>a-s&&(t=s),e.length>=t){await Promise.all(e),gs(e);return}},Co=13,$n=e=>{const{isConnected:t,account:a}=z(),i=W(),[s,r]=x.useState(void 0),o=new K(...Y(i,"Hegic_PositionManager"),te(i)),{error:p}=je(t&&[a,"useHegicPositions"],async()=>{const l=[],d=Ci(i),u=_o(o,a),m=(await o.queryFilter(u)).map(C=>C.args.tokenId),c=[];for(let C=0;C<d.length;C++){const g=d[C],f=an(i,g),_=ko(g,m),k=f.queryFilter(_).then(S=>Promise.all(S.map(I=>vo(i,I,a).then(w=>{w&&l.push(w)}))));c.push(k),await Hn(c,Co,d.length,C)}return r([...l??[]]),e&&e(),l},{refreshInterval:An});if(p){console.log(`Fetching Hegic positions error:
`,p);return}return s},_o=(e,t)=>({address:e.address,topics:[Vt("Transfer(address,address,uint256)"),null,Kt(t,32)]}),ko=(e,t)=>{const a=[Vt("Acquired(uint256,(uint128,uint128),uint256,uint256,uint256,bytes[])"),t.map(s=>Kt(s,32))];return{address:e,topics:a}},vo=async(e,t,a)=>{const i=t.address,s=he(t.decode(t.data,t.topics));s.data=he(s.data);const r=new K(...Y(e,"Hegic_OperationalTreasury"),te(e)),o=await r.lockedLiquidity(s.id);if(!(o.state!==0))return;const{asset:l,isCall:d,isSpread:u,strikeScale:y}=So(e,i);Object.assign(s,{asset:l,isCall:d,isSpread:u});const m=Wi(s.data.amount,l),c=Tn(e,l),C=wo(s,c,y);Object.assign(s,{strike:C});const{premium:g,pnl:f}=await Po(e,s,i),_=f.inPercentage===R(-100),k=o.expiration*fe,S=Ao(s,c);return{id:Number(s.id),market:"Hegic",asset:l,amount:m,strike:C,isCall:d,isSpread:u,isBuy:!0,premium:g,pnl:f,expiry:k,greeks:S,actions:{close:()=>{const w=xe();return r.connect(w).payOff(s.id,a)},isClosingDisabled:_}}},So=(e,t)=>{const a=xi(e),i=Object.keys(a).find(d=>a[d]===t),[s,r,o]=i.split("_"),p=s.includes("CALL"),l=s.includes("SPREAD");return{asset:o,isCall:p,isSpread:l,strikeScale:r}},wo=(e,t,a)=>{const i=le(e.data.strike,Pi);let r=Mn(e.isCall,i,t)?i:i/100n*BigInt(a);return e.isSpread&&(r=i),r},Po=async(e,t,a)=>{const i=an(e,a),s=lt(le(t.positivepnl,pt)),r=le(BigInt(await i.payOffAmount(t.id)),pt),p={inUSDC:r+s,inPercentage:Ft(r,s)};return{premium:s,pnl:p}},Ao=(e,t)=>{const{isCall:a,strike:i}=e;return{delta:Us(a,i,t),vega:0,gamma:0,theta:0,rho:0}},Wn=e=>{const{account:t,isConnected:a}=z(),[i,s]=x.useState(void 0),r=W(),o=Qt(r),{error:p}=je(a&&[t,"useLyraPositions"],async()=>{const l=await o.positions(t);if(!l){s([]);return}const d=l.filter(Mo),u=[];for(let y=0;y<d.length;y++){const m=d[y];u.push(await Do(r,m))}return s(u),e&&e(),u},{refreshInterval:An});return p?(console.log(`Fetching Lyra positions error:
`,p),null):i},Do=async(e,t)=>{const{id:a,strikePrice:i,isCall:s,isLong:r,size:o,expiryTimestamp:p}=he(t),l=p*fe,{asset:d,premium:u,pnl:y,greeks:m,collateral:c}=await Bo(e,t);return{id:a,market:"Lyra",asset:d,amount:o,strike:i,isCall:s,isBuy:r,premium:u,collateral:c,pnl:y,expiry:l,greeks:m,actions:{close:g=>{const f=Q.from(g),_={referrer:gn};return t.close(f,ct,_).then(k=>{if(k.isDisabled){ve(new Error(k.disabledReason));return}return xe().sendTransaction(k.tx)})},addToCollateral:g=>{const f=c.inMarketToken+g;return t.trade(r,Q.from(0),ct,{position:t,setToCollateral:Q.from(f)}).then(_=>(_.isDisabled&&ve(new Error(_.disabledReason)),xe().sendTransaction(_.tx)))}}}},Bo=async(e,t)=>{const a=()=>t.marketName.split("-USDC")[0],i=()=>t.trades().reduce((d,u)=>(u=he(u),u.isBuy?d-u.premium:d+u.premium),0n),s=()=>{const{unrealizedPnl:p,unrealizedPnlPercentage:l}=he(t.pnl());return{inUSDC:p,inPercentage:l*100n}},r=()=>{const{delta:p,theta:l,rho:d}=t.liveOption(),{vega:u,gamma:y}=t.liveStrike(),m={delta:p,vega:u,gamma:y,theta:l,rho:d};for(const c in m){const C=m[c];m[c]=U(C.toBigInt(),$,3)}return m},o=async()=>{const p=t.collateral&&he(t.collateral);if(p)return En(e,p,a())};return{asset:a(),premium:i(),pnl:s(),greeks:r(),collateral:await o()}},Mo=e=>{const{size:t,expiryTimestamp:a}=he(e),i=t===0n,s=a*fe<Date.now();return!(i||s)},Eo=6,Io=()=>{const{isConnected:e,account:t}=z(),a=W(),i=new K(...Y(a,"TxBuilder"),te(a)),{data:s,error:r}=je(e&&[t,"useBuilderPositionsStructure"],async()=>{const o=[],p=await jo(i,t),l=[];for(let d=0;d<p.length;d++){const u=p[d],{buildID:y,productType:m}=u.args,C={strategy:Cn.find(k=>ie[k].key===m.toNumber()),buildId:y.toNumber(),childPositionsStructure:[]},g=Oo(a,y),f=[];for(const k in g)g[k].forEach(I=>{I.then(w=>{Lo(w,k,C.childPositionsStructure)}),f.push(I)});const _=Promise.all(f).then(()=>{o.push(C)});l.push(_),await Hn(l,Eo,p.length,d)}return o},{refreshInterval:2e4});if(r){console.log(`Builder Positions error:
`,r);return}return s},Oo=(e,t)=>{const{Hegic:a,Lyra_ETH:i,Lyra_BTC:s}=ws(e),{OpenPositionByHegic:r}=a.filters,{OpenPositionByLyra:o}=i.filters,{OpenPositionByLyra:p}=s.filters,l=[a.queryFilter(r(t))],d=[i.queryFilter(o(t)),s.queryFilter(p(t))];return{Hegic:l,Lyra:d}},jo=(e,t)=>{const{CreateBuild:a}=e.filters;return e.queryFilter(a(null,t)).then(s=>{const r=s.map(o=>Fo(o,e.provider));return Promise.all(r).then(o=>s.filter((l,d)=>{if(o[d])return!0}).reverse())})},Fo=(e,t)=>t.getBlock(e.blockNumber).then(a=>{const i=qe[qe.length-1],s=Date.now()-i-Xt(1);if(a.timestamp*fe>s)return!0}),Lo=(e,t,a)=>{e.forEach(i=>{const s=i.args.tokenID;a.push({market:t,id:s.toNumber()})})},{PARENT_COMPLEX:No,PARENT_SIMPLE:Ro,CHILD:qn}=kn,Uo=e=>{const t=x.useContext(De),a={Lyra:()=>{Gt(t,"Lyra")},Hegic:()=>{Gt(t,"Hegic")}},i={Lyra:Wn(a.Lyra),Hegic:$n(a.Hegic)},s=Object.values(i),r=s.every(u=>ae(u)),o=s.every(u=>!ae(u)),p=Io();if(!p||r)return;const l=p.filter((u,y)=>{const{childPositionsStructure:m}=u,c=[],C=m.length===1;if(!m.length)return!1;for(let g=0;g<m.length;g++){const{id:f,market:_}=m[g],k=i[_];if(!k)return!1;const S=k.findIndex(w=>w.id===f),I=k[S];I&&(c.push(I),k[S].role=qn)}if(c.length){if(C){const g={...c[0]};g.role=Ro,p[y]={...u,...g}}else{const g=Wo(c),f=c[0].asset;p[y]={...p[y],childPositions:c,asset:f,...g,role:No}}return!0}});return o&&e&&e(),$o(l,i)},Ho=e=>{if(!e.length)return null;const t={premium:0n,collateral:{inUSDC:0n},pnl:{inUSDC:0n},greeks:{},isTotal:!0},a=e.reduce((i,s)=>{var o;const r=it(i,s,["premium","pnl.inUSDC"]);return r.greeks=In(i.greeks,s.greeks),(o=s.collateral)!=null&&o.inUSDC&&(r.collateral.inUSDC+=s.collateral.inUSDC),r},t);return a.pnl.inPercentage=Ft(a.pnl.inUSDC-a.premium,a.premium),a},$o=(e,t)=>{const a=[],i=[];Object.values(t).forEach(p=>{p&&i.push(...p)});const r=i.filter(p=>p.role!==qn).map(p=>{const{isCall:l,isSpread:d,isBuy:u}=p;return{strategy:`${d?l?"Bull":"Bear":u?"Long":"Short"} ${l?"Call":"Put"} ${d?"Spread":""}`.trim(),...p}});a.push(...e,...r);const o=Ho(i);return o&&a.push(o),a},Wo=e=>{const t=e.reduce((a,i)=>{const s=it(a,i,["amount","premium","pnl.inUSDC"]);return s.greeks=In(a.greeks,i.greeks),s.collaterals=i.collateral?[...a.collaterals,i.collateral]:a.collaterals,s},{amount:0n,premium:0n,collaterals:[],pnl:{inUSDC:0n},greeks:{delta:0,vega:0,gamma:0,theta:0,rho:0}});return t.pnl.inPercentage=Ft(t.pnl.inUSDC-t.premium,t.premium),t.expiry=e[0].expiry,t};const qo=({position:e,openCloseModal:t})=>{const[a]=x.useContext(De);if(!e.actions)return null;const{isClosingDisabled:i}=e.actions,s=a.closing.find(o=>o.id===e.id),r=()=>{t(e)};return n.jsx("div",{className:"BuilderPositionCloseBtn",children:tt(n.jsx(Te,{className:"close-btn",type:"micro",isDisabled:i,onClick:r,children:"Close"}),s)})},Go="/sf_draft/assets/pen-7561a00e.svg",Vo=({handleClick:e})=>n.jsx("button",{onClick:e,className:"shrink-0",children:n.jsx("img",{src:Go,alt:"Update Collateral"})}),{PARENT_COMPLEX:Ko,CHILD:Yo}=kn,zo={strategy:"Strategy",amount:"Amount",strike:"Strike",premium:n.jsx("span",{"data-tooltip-id":"Builder_PremiumTooltip",className:"tip",children:"Premium"}),collateral:n.jsx("span",{"data-tooltip-id":"BuilderForm_CollateralTooltip",className:"tip",children:"Collateral"}),pnl:"PnL",liqPrice:"Liq. Price",delta:"Delta",vega:"Vega",gamma:"Gamma",theta:"Theta",rho:"Rho",expiry:"Expiration Date",closeBtn:""},Zo=({positions:e,openCollateralModal:t,openCloseModal:a,isLoadingComplete:i})=>{const{isConnected:s}=z(),r=y=>{const{role:m,isOpening:c,isTotal:C}=y,g=m===Ko,f=m===Yo,_=()=>{if(f)return"";if(C)return ne("Total",!1,!0);const{strategy:v}=y,b=ie[v],T=b==null?void 0:b.color,h=n.jsx("svg",{className:"icon-dropdown",xmlns:"http://www.w3.org/2000/svg",width:"13",height:"13",viewBox:"0 0 13 13",fill:"none",children:n.jsx("path",{d:"M2 5L6.5 9L11 5",stroke:T,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})});return n.jsxs("span",{className:"flex items-center gap-x-4",style:{color:T},children:[c&&n.jsx(be,{}),v,g&&h]})},k=()=>{const{asset:v,amount:b}=y;if(b)return n.jsx(ee,{symbol:v,children:U(b)})},S=()=>{const{market:v,isCall:b,isBuy:T,strike:h}=y;if(g)return n.jsx("div",{className:"BuilderPositionsTable__strike-msg",children:ne("Click to see strikes")});if(h)return n.jsx(st,{strikeData:{market:v,isCall:b,isBuy:T},priceNode:H(h,0)})},I=()=>{const{premium:v}=y,b=v<0n,T=H(ke(v)),h=`${b?"–":"+"}$${T}`;return n.jsx("span",{className:M({positive:!b,negative:b}),children:h})},w=()=>{const{collateral:v,collaterals:b}=y;if(!v&&(!b||!b.length))return;const T=h=>C?n.jsxs("span",{children:["$",H(h.inUSDC)]}):n.jsx(ee,{symbol:h.marketToken.symbol,children:Se(h.inMarketToken,h.marketToken.isStable)},h.isBase);return g?F(b,T):v.liquidationPrice?n.jsxs("div",{className:"flex items-center gap-x-3",children:[T(v),n.jsx(Vo,{handleClick:()=>t(y)})]}):T(v)},F=(v,b)=>{const T={base:{},stable:{}},h=O=>{const{isBase:N}=O,q=N?"base":"stable";T[q]={...it(T[q],O,["inMarketToken","inUSDC"]),isBase:N}};v.forEach(h);const B=Object.values(T).map(b);return n.jsx("div",{className:"flex flex-col gap-y-5",children:B})},E=()=>{if(c)return;const{inUSDC:v,inPercentage:b}=y.pnl,T=v<0?"–":"",h=H(ke(v)),B=ke(b),O=U(B)<1?1:0,N=At(B,O);return n.jsxs("div",{className:M({positive:v>0n,negative:v<0n,muted:v===0n}),children:[n.jsxs("span",{style:{color:Ne,marginRight:5},children:[T,"$",h]}),`(${T}${N}%)`]})},A=()=>{const{collateral:v}=y;if(!(!v||!v.liquidationPrice))return`$${H(v.liquidationPrice)}`},j=()=>{const{greeks:v}=y;return v},P=()=>{const{expiry:v}=y;return v?Yt(v,"dd/MM/yy, hh a"):void 0},D=()=>g?y.childPositions.map(r):void 0,L=()=>c?"":n.jsx(qo,{openCloseModal:a,position:y});return{id:`${y.buildId}_${y.id}`,strategy:_(),amount:k(),strike:S(),premium:I(),collateral:w(),pnl:E(),liqPrice:A(),...j(),expiry:P(),children:D(),closeBtn:L(),omittedKeys:(g||C)&&["strike","closeBtn"]}},o=zo,p=e==null?void 0:e.map(r),l={titleData:o,itemsData:p},d=[{name:"Active",isActive:!0}],u=()=>(s&&(!e||!i||e.length),n.jsx("div",{className:"App-box BuilderPositionsTable__message",style:i?{}:{marginBottom:10},children:ne("Loading...")}));return n.jsxs("div",{className:"BuilderPositionsTable",children:[n.jsxs("div",{className:"BuilderPositionsTable__header",children:[n.jsx(Ct,{links:d,type:"border"}),ne("*The table displays estimated PnL values. To view the actual PnL, click on the «Close» button",!0)]}),e!=null&&e.length?n.jsxs(n.Fragment,{children:[!i&&u(),n.jsx(Fn,{structureData:l})]}):u()]})};const Gn=e=>{const{value:t,setValue:a,maxValue:i,placeholder:s,isDisabled:r,isFocused:o,hasError:p,formatInputStringFns:l=[Ie,ye],title:d,presentedValue:u,presentedValueTitle:y,iconData:m,unitStr:c}=e,C=Bt([t,a],{maxValue:i,placeholder:s,isDisabled:r,isFocused:o},l),g=M(e.className,C.hasFocus&&"hlight",p&&"error",r&&"disabled"),f=l[0];return n.jsxs("div",{className:M("InputFamily InputComplexNumeric",g),onClick:()=>{C.ref.current.focus()},children:[n.jsxs("div",{className:"InputComplexNumeric__header",children:[n.jsx("div",{className:"InputComplexNumeric__title",children:d}),u&&n.jsxs("button",{className:"InputComplexNumeric__presented-value",onClick:_=>{_.stopPropagation(),a(f(u))},children:[n.jsxs("span",{className:"InputComplexNumeric__presented-value-title",children:[y,":"]}),f(u)]}),m&&n.jsx("div",{className:"InputComplexNumeric__icon",children:n.jsx("img",{src:m.src,alt:m.alt??"icon"})})]}),n.jsxs("div",{className:"InputComplexNumeric__body",children:[n.jsx("div",{className:"InputComplexNumeric__input-wrapper",children:C.node}),n.jsxs("div",{className:"InputComplexNumeric__helper",children:[i&&n.jsx("button",{className:"InputComplexNumeric__max-btn",disabled:r,onClick:_=>{_.stopPropagation(),a(Ie(i))},children:"Max"}),c&&n.jsx("div",{className:"InputComplexNumeric__unit",children:c})]})]})]})},Xo=({position:e,isOpen:t,setIsOpen:a})=>{var _;const i=W(),[s,r]=x.useState(""),[o,p]=x.useState(!1),[l,d]=x.useState(null),u=((_=e==null?void 0:e.collateral)==null?void 0:_.marketToken)??{symbol:"ETH"},y=en(u.symbol),m=Rn(u==null?void 0:u.symbol,fi(i,"Lyra_Quoter"),ut(s));if(bt(()=>{s&&(d(null),m.check().then(d))},600,[s]),!e||!e.collateral)return null;const c=()=>{if(!s)return"Enter Amount";if(l===null)return"Please, wait...";if(o)return l?"Updating Collateral...":`Approving ${u.symbol}...`},C=()=>!c(),g=()=>{const k=l?"Add Collateral":`Approve ${u.symbol}`;return c()??k},f=()=>{if(!l){m.approve(p,()=>{m.check().then(d)});return}const k=ut(s);Je(i,e.actions.addToCollateral,[k],{text:`${s} ${u.symbol} added.`,node:n.jsxs(ee,{symbol:u.symbol,children:[s," added to collateral."]})},p,()=>a(!1))};return n.jsxs(et,{className:"PositionCollateralModal",isOpen:t,setIsOpen:a,reset:()=>{r(""),d(null)},children:[n.jsx("h1",{children:"Edit Collateral"}),n.jsx(Gn,{value:s,setValue:r,title:"Add Amount",iconData:{src:y},isFocused:!0}),n.jsx(Te,{isDisabled:!C(),onClick:f,children:g()})]})};const Qo=(e,t,a)=>{const i=U(e,a);return Jo(i,t)},Jo=(e,t=2)=>{const a=e<0?"–":e>0?"+":"";return e=Math.abs(e),e=un(e,t),e=ln(e,t),`${a}$${e}`},ep=({position:e,isOpen:t,setIsOpen:a})=>{const i=W(),[s,r]=x.useState(""),[o,p]=x.useState(!1),[l,d]=x.useContext(De);if(x.useEffect(()=>{if(e){const v=Ni(e.amount);r(v)}},[e]),!e||!e.actions)return null;const u=v=>{if(v)l.closing.push({id:e.id,market:e.market});else{const b=l.closing.findIndex(T=>T.id===e.id);b!==-1&&l.closing.splice(b,1)}d({...l})},{close:y}=e.actions,{asset:m,amount:c,strategy:C,isCall:g,isBuy:f}=e,_=C??`${f?"Long":"Short"} ${g?"Call":"Put"}`,k=n.jsxs(ee,{symbol:m,children:[s," ",_," closed."]}),I={text:`${s} ${m} ${_} closed.`,node:k},w=ut(s),F=Fi(w,e.amount),E=Li(e.pnl.inUSDC,F),A=()=>{Je(i,y,[w],I,p,()=>{u(!0),a(!1)})},j=()=>{if(!s)return"Enter Amount";if(o)return"Closing Strategy..."},P=()=>j()??"Close Strategy",D=()=>!j(),L=en(m);return n.jsxs(et,{className:"ClosePositionModal",isOpen:t,setIsOpen:a,reset:()=>{r("")},children:[n.jsxs("div",{className:"ClosePositionModal__body",children:[n.jsx("h1",{children:"Close Strategy"}),n.jsxs("div",{className:"info-row",children:[n.jsx("div",{className:"info-row__title",children:"Strike"}),n.jsx("div",{className:"info-row__value",children:n.jsx(st,{strikeData:e,priceNode:H(e.strike,0)})})]}),n.jsx(Gn,{value:s,setValue:r,title:"Amount",iconData:{src:L},isFocused:!0,maxValue:U(c)})]}),n.jsxs("div",{className:"ClosePositionModal__footer",children:[n.jsxs("div",{className:"info-row",children:[n.jsx("div",{className:"info-row__title",children:"PnL"}),n.jsx("div",{className:M("info-row__value",{positive:E>0n,negative:E<0n}),children:Qo(E)})]}),n.jsx(Te,{isDisabled:!D(),onClick:A,children:P()})]})]})},tp=()=>{const[e,t]=x.useState(!1),i=Uo(()=>{e||t(!0)}),s=i==null?void 0:i.sort((g,f)=>f.isTotal?-1:g.isTotal?1:Bn(g,f,"premium",-1)),[r,o]=x.useState(null),[p,l]=x.useState(!1),[d,u]=x.useState(!1),y=g=>{o(g),l(!0)},m=g=>{o(g),u(!0)},[c]=x.useContext(De);let C;return c.opening&&s&&(C=[...c.opening,...s]),n.jsxs("div",{className:"BuilderPositions",children:[n.jsx("h1",{className:"BuilderPositions__title",children:"My Positions"}),n.jsx(Zo,{positions:C,isLoadingComplete:e,openCollateralModal:y,openCloseModal:m}),n.jsx(Xo,{isOpen:p,setIsOpen:l,position:r}),n.jsx(ep,{isOpen:d,setIsOpen:u,position:r})]})},np=()=>{const e=ht("asset","ETH"),[t,a]=x.useState({});return x.useEffect(()=>{a(Un())},[]),n.jsx(De.Provider,{value:[t,a],children:n.jsxs("div",{className:"Builder",children:[n.jsx(xo,{assetState:e}),n.jsx(tp,{})]})})};const ap=()=>{const e=$n(),t=Wn(),a=Ge("ETH"),i=Ge("BTC");return console.log(a,i),x.useEffect(()=>{e.length&&console.log(e),t.length&&console.log(t)},[e,t]),R(1),R(1,8),dn(R(1),2),ke(R(-1)),lt(R(1)),lt(R(-1)),we(R(1,10),10,8),We(R(1),8),le(R(1,8),8),U(1000000000000000000n),U(1000n,3),H(R(1e3)),H(R(1e3),0),H(R(1e3),5),H(R(1e3,8),2,8),n.jsxs("div",{className:"Sandbox",children:[n.jsx("h3",{className:"text-center",children:"Page for calculations testing"}),n.jsxs("p",{children:["Default Decimals: ",n.jsx("span",{style:{color:"white"},children:$})]}),n.jsx("div",{style:{margin:"10px 0"},children:t.map(s=>{const r=s.premium,o=H(r);return n.jsxs("div",{children:[o," ",n.jsxs("span",{className:"muted",children:["(",s.asset,")"]})]})})})]})},ip=()=>{const e=Ye(),t=ga();return x.useEffect(()=>{e.pathname.endsWith("terminal")&&t("/terminal/builder")},[e.pathname]),n.jsxs(xa,{children:[n.jsxs(Be,{path:"/terminal",element:n.jsx(ls,{}),children:[n.jsx(Be,{path:"builder",element:n.jsx(np,{})}),n.jsx(Be,{path:"margin-trading",element:n.jsx("div",{children:"Margin Trading"})})]}),n.jsx(Be,{path:"/sandbox",element:n.jsx(ap,{})}),n.jsx(Be,{path:"*",element:n.jsx(Ca,{to:is,replace:!0})})]})},sp=()=>n.jsxs("div",{className:"Tooltips",children:[n.jsx(re,{id:"Tooltip_default"}),n.jsx(re,{place:"bottom-end",id:"Tooltip_bottom-end"})]});const rp="/sf_draft/assets/Discord-f7d998b5.svg",op="/sf_draft/assets/Gitbook-c728118d.svg",pp="/sf_draft/assets/Github-d50e83d6.svg",lp="/sf_draft/assets/Mirror-095740c8.svg",up="/sf_draft/assets/Telegram-04f64a96.svg",dp="/sf_draft/assets/Twitter-5cfdd2f4.svg",yp=()=>{const e={Discord:{icon:rp,url:"https://discord.gg/5DGZ7rzSfS"},Gitbook:{icon:op,url:"https://docs.sharwa.finance/"},Github:{icon:pp,url:"https://github.com/DeDeLend"},Mirror:{icon:lp,url:"https://mirror.xyz/sharwa-finance.eth"},Telegram:{icon:up,url:"https://t.me/SharwaFinance"},Twitter:{icon:dp,url:"https://twitter.com/SharwaFinance"}};return n.jsx("footer",{className:"Footer",children:n.jsxs("div",{className:"Footer__content _container",children:[n.jsx(zt,{}),n.jsx("div",{className:"Footer__smedia-items",children:Object.keys(e).map(t=>{const a=e[t];return n.jsx("a",{className:"Footer__smedia-item",target:"_blank",rel:"noreferrer",href:a.url,children:n.jsx("img",{src:a.icon,alt:`${t} logo`})},t)})})]})})};const cp=({children:e})=>n.jsx("div",{className:"GlobalStickyMessage",children:e});function mp(){const{chain:e}=aa(),t=()=>n.jsxs(n.Fragment,{children:[n.jsx(Zi,{}),n.jsx("main",{className:"_container",children:n.jsx(ip,{})}),n.jsx(yp,{}),n.jsx(cp,{children:"Sharwa.Finance is in alpha. Use at your own risk"})]}),a=()=>n.jsx(es,{chainId:e.id});return e!=null&&e.unsupported?a():t()}function Tp(){return n.jsxs(n.Fragment,{children:[n.jsx(Xi,{}),n.jsx(sp,{}),n.jsx(na,{config:Gi(),children:n.jsx(zn,{children:n.jsx(as,{children:n.jsx(mp,{})})})})]})}Kn.createRoot(document.getElementById("root")).render(n.jsx(Ee.StrictMode,{children:n.jsx(Tp,{})}));
