import{g as v}from"./vite-plugin-node-polyfills-9f21ca85.js";const S=()=>Object.create(null),{forEach:A,slice:p}=Array.prototype,{hasOwnProperty:N}=Object.prototype;class b{constructor(e=!0,t=S){this.weakness=e,this.makeData=t}lookup(){return this.lookupArray(arguments)}lookupArray(e){let t=this;return A.call(e,s=>t=t.getChildTrie(s)),N.call(t,"data")?t.data:t.data=this.makeData(p.call(e))}peek(){return this.peekArray(arguments)}peekArray(e){let t=this;for(let s=0,i=e.length;t&&s<i;++s){const r=t.mapFor(e[s],!1);t=r&&r.get(e[s])}return t&&t.data}remove(){return this.removeArray(arguments)}removeArray(e){let t;if(e.length){const s=e[0],i=this.mapFor(s,!1),r=i&&i.get(s);r&&(t=r.removeArray(p.call(e,1)),!r.data&&!r.weak&&!(r.strong&&r.strong.size)&&i.delete(s))}else t=this.data,delete this.data;return t}getChildTrie(e){const t=this.mapFor(e,!0);let s=t.get(e);return s||t.set(e,s=new b(this.weakness,this.makeData)),s}mapFor(e,t){return this.weakness&&M(e)?this.weak||(t?this.weak=new WeakMap:void 0):this.strong||(t?this.strong=new Map:void 0)}}function M(n){switch(typeof n){case"object":if(n===null)break;case"function":return!0}return!1}function x(){}class P{constructor(e=1/0,t=x){this.max=e,this.dispose=t,this.map=new Map,this.newest=null,this.oldest=null}has(e){return this.map.has(e)}get(e){const t=this.getNode(e);return t&&t.value}get size(){return this.map.size}getNode(e){const t=this.map.get(e);if(t&&t!==this.newest){const{older:s,newer:i}=t;i&&(i.older=s),s&&(s.newer=i),t.older=this.newest,t.older.newer=t,t.newer=null,this.newest=t,t===this.oldest&&(this.oldest=i)}return t}set(e,t){let s=this.getNode(e);return s?s.value=t:(s={key:e,value:t,newer:null,older:this.newest},this.newest&&(this.newest.newer=s),this.newest=s,this.oldest=this.oldest||s,this.map.set(e,s),s.value)}clean(){for(;this.oldest&&this.map.size>this.max;)this.delete(this.oldest.key)}delete(e){const t=this.map.get(e);return t?(t===this.newest&&(this.newest=t.older),t===this.oldest&&(this.oldest=t.newer),t.newer&&(t.newer.older=t.older),t.older&&(t.older.newer=t.newer),this.map.delete(e),this.dispose(t.value,e),!0):!1}}function h(){}const F=h,C=typeof WeakRef<"u"?WeakRef:function(n){return{deref:()=>n}},O=typeof WeakMap<"u"?WeakMap:Map,R=typeof FinalizationRegistry<"u"?FinalizationRegistry:function(){return{register:h,unregister:h}},D=10024;class q{constructor(e=1/0,t=F){this.max=e,this.dispose=t,this.map=new O,this.newest=null,this.oldest=null,this.unfinalizedNodes=new Set,this.finalizationScheduled=!1,this.size=0,this.finalize=()=>{const s=this.unfinalizedNodes.values();for(let i=0;i<D;i++){const r=s.next().value;if(!r)break;this.unfinalizedNodes.delete(r);const a=r.key;delete r.key,r.keyRef=new C(a),this.registry.register(a,r,r)}this.unfinalizedNodes.size>0?queueMicrotask(this.finalize):this.finalizationScheduled=!1},this.registry=new R(this.deleteNode.bind(this))}has(e){return this.map.has(e)}get(e){const t=this.getNode(e);return t&&t.value}getNode(e){const t=this.map.get(e);if(t&&t!==this.newest){const{older:s,newer:i}=t;i&&(i.older=s),s&&(s.newer=i),t.older=this.newest,t.older.newer=t,t.newer=null,this.newest=t,t===this.oldest&&(this.oldest=i)}return t}set(e,t){let s=this.getNode(e);return s?s.value=t:(s={key:e,value:t,newer:null,older:this.newest},this.newest&&(this.newest.newer=s),this.newest=s,this.oldest=this.oldest||s,this.scheduleFinalization(s),this.map.set(e,s),this.size++,s.value)}clean(){for(;this.oldest&&this.size>this.max;)this.deleteNode(this.oldest)}deleteNode(e){e===this.newest&&(this.newest=e.older),e===this.oldest&&(this.oldest=e.newer),e.newer&&(e.newer.older=e.older),e.older&&(e.older.newer=e.newer),this.size--;const t=e.key||e.keyRef&&e.keyRef.deref();this.dispose(e.value,t),e.keyRef?this.registry.unregister(e):this.unfinalizedNodes.delete(e),t&&this.map.delete(t)}delete(e){const t=this.map.get(e);return t?(this.deleteNode(t),!0):!1}scheduleFinalization(e){this.unfinalizedNodes.add(e),this.finalizationScheduled||(this.finalizationScheduled=!0,queueMicrotask(this.finalize))}}let o=null;const w={};let W=1;const I=()=>class{constructor(){this.id=["slot",W++,Date.now(),Math.random().toString(36).slice(2)].join(":")}hasValue(){for(let e=o;e;e=e.parent)if(this.id in e.slots){const t=e.slots[this.id];if(t===w)break;return e!==o&&(o.slots[this.id]=t),!0}return o&&(o.slots[this.id]=w),!1}getValue(){if(this.hasValue())return o.slots[this.id]}withValue(e,t,s,i){const r={__proto__:null,[this.id]:e},a=o;o={parent:a,slots:r};try{return t.apply(i,s)}finally{o=a}}static bind(e){const t=o;return function(){const s=o;try{return o=t,e.apply(this,arguments)}finally{o=s}}}static noContext(e,t,s){if(o){const i=o;try{return o=null,e.apply(s,t)}finally{o=i}}else return e.apply(s,t)}};function y(n){try{return n()}catch{}}const u="@wry/context:Slot",T=y(()=>globalThis)||y(()=>v)||Object.create(null),g=T,G=g[u]||Array[u]||function(n){try{Object.defineProperty(g,u,{value:n,enumerable:!1,writable:!1,configurable:!0})}finally{return n}}(I()),{toString:m,hasOwnProperty:V}=Object.prototype,k=Function.prototype.toString,f=new Map;function L(n,e){try{return d(n,e)}finally{f.clear()}}function d(n,e){if(n===e)return!0;const t=m.call(n),s=m.call(e);if(t!==s)return!1;switch(t){case"[object Array]":if(n.length!==e.length)return!1;case"[object Object]":{if(z(n,e))return!0;const i=j(n),r=j(e),a=i.length;if(a!==r.length)return!1;for(let l=0;l<a;++l)if(!V.call(e,i[l]))return!1;for(let l=0;l<a;++l){const c=i[l];if(!d(n[c],e[c]))return!1}return!0}case"[object Error]":return n.name===e.name&&n.message===e.message;case"[object Number]":if(n!==n)return e!==e;case"[object Boolean]":case"[object Date]":return+n==+e;case"[object RegExp]":case"[object String]":return n==`${e}`;case"[object Map]":case"[object Set]":{if(n.size!==e.size)return!1;if(z(n,e))return!0;const i=n.entries(),r=t==="[object Map]";for(;;){const a=i.next();if(a.done)break;const[l,c]=a.value;if(!e.has(l)||r&&!d(c,e.get(l)))return!1}return!0}case"[object Uint16Array]":case"[object Uint8Array]":case"[object Uint32Array]":case"[object Int32Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object ArrayBuffer]":n=new Uint8Array(n),e=new Uint8Array(e);case"[object DataView]":{let i=n.byteLength;if(i===e.byteLength)for(;i--&&n[i]===e[i];);return i===-1}case"[object AsyncFunction]":case"[object GeneratorFunction]":case"[object AsyncGeneratorFunction]":case"[object Function]":{const i=k.call(n);return i!==k.call(e)?!1:!U(i,K)}}return!1}function j(n){return Object.keys(n).filter(_,n)}function _(n){return this[n]!==void 0}const K="{ [native code] }";function U(n,e){const t=n.length-e.length;return t>=0&&n.indexOf(e,t)===t}function z(n,e){let t=f.get(n);if(t){if(t.has(e))return!0}else f.set(n,t=new Set);return t.add(e),!1}export{P as S,b as T,q as W,G as a,L as e};
