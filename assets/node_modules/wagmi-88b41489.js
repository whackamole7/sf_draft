import{Q as $,p as H,a as J,c as G,b as V,u as X,d as K,e as Y,f as Z,n as E,g as ee}from"./@tanstack-a27403e3.js";import{c as te,a as re,w as ne,n as se,d as ce,g as ie,b as oe,e as Q,f as ue,h as ae,i as fe,j as le,s as de,k as he,l as N,m as ye,o as we}from"./@wagmi-47bb2d2e.js";import{r as u}from"./react-fef2d131.js";import{w as v,s as be}from"./use-sync-external-store-201b3dfb.js";function Te({queryClient:e=new J({defaultOptions:{queries:{cacheTime:1e3*60*60*24,networkMode:"offlineFirst",refetchOnWindowFocus:!1,retry:0},mutations:{networkMode:"offlineFirst"}}}),storage:t=re({storage:typeof window<"u"&&window.localStorage?window.localStorage:se}),persister:s=typeof window<"u"?G({key:"cache",storage:t,serialize:r=>r,deserialize:r=>r}):void 0,...i}){const r=te({...i,storage:t});return s&&H({queryClient:e,persister:s,dehydrateOptions:{shouldDehydrateQuery:n=>n.cacheTime!==0&&n.queryKey[0].persist!==!1}}),Object.assign(r,{queryClient:e})}var B=u.createContext(void 0),k=u.createContext(void 0);function Ue({children:e,config:t}){return u.createElement(B.Provider,{children:u.createElement($,{children:e,client:t.queryClient,context:k}),value:t})}function R(){const e=u.useContext(B);if(!e)throw new Error(["`useConfig` must be used within `WagmiConfig`.\n","Read more: https://wagmi.sh/react/WagmiConfig"].join(`
`));return e}var Ce=be.useSyncExternalStore;function Se(e){return Array.isArray(e)}function pe(e){if(!j(e))return!1;const t=e.constructor;if(typeof t>"u")return!0;const s=t.prototype;return!(!j(s)||!s.hasOwnProperty("isPrototypeOf"))}function j(e){return Object.prototype.toString.call(e)==="[object Object]"}function me(e,t,s){return Se(e)?typeof t=="function"?{...s,queryKey:e,queryFn:t}:{...t,queryKey:e}:e}function ge(e){return JSON.stringify(e,(t,s)=>pe(s)?Object.keys(s).sort().reduce((i,r)=>(i[r]=s[r],i),{}):typeof s=="bigint"?s.toString():s)}function Ee(e,t){return typeof e=="function"?e(...t):!!e}function ke(e,t){const s={};return Object.keys(e).forEach(i=>{Object.defineProperty(s,i,{configurable:!1,enumerable:!0,get:()=>(t.trackedProps.add(i),e[i])})}),s}function Re(e,t){const s=K({context:e.context}),i=Y(),r=Z(),n=s.defaultQueryOptions({...e,queryKeyHashFn:ge});n._optimisticResults=i?"isRestoring":"optimistic",n.onError&&(n.onError=E.batchCalls(n.onError)),n.onSuccess&&(n.onSuccess=E.batchCalls(n.onSuccess)),n.onSettled&&(n.onSettled=E.batchCalls(n.onSettled)),n.suspense&&typeof n.staleTime!="number"&&(n.staleTime=1e3),(n.suspense||n.useErrorBoundary)&&(r.isReset()||(n.retryOnMount=!1));const[c]=u.useState(()=>new t(s,n)),o=c.getOptimisticResult(n);if(Ce(u.useCallback(f=>i?()=>{}:c.subscribe(E.batchCalls(f)),[c,i]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),u.useEffect(()=>{r.clearReset()},[r]),u.useEffect(()=>{c.setOptions(n,{listeners:!1})},[n,c]),n.suspense&&o.isLoading&&o.isFetching&&!i)throw c.fetchOptimistic(n).then(({data:f})=>{var d,l;(d=n.onSuccess)==null||d.call(n,f),(l=n.onSettled)==null||l.call(n,f,null)}).catch(f=>{var d,l;r.clearReset(),(d=n.onError)==null||d.call(n,f),(l=n.onSettled)==null||l.call(n,void 0,f)});if(o.isError&&!r.isReset()&&!o.isFetching&&Ee(n.useErrorBoundary,[o.error,c.getCurrentQuery()]))throw o.error;const a=o.status==="loading"&&o.fetchStatus==="idle"?"idle":o.status,w=a==="idle",C=a==="loading"&&o.fetchStatus==="fetching";return{...o,defaultedOptions:n,isIdle:w,isLoading:C,observer:c,status:a}}function x(e,t,s){const i=V(e,t,s);return X({context:k,...i})}function M(e,t,s){const i=me(e,t,s),r=Re({context:k,...i},ee),n={data:r.data,error:r.error,fetchStatus:r.fetchStatus,isError:r.isError,isFetched:r.isFetched,isFetchedAfterMount:r.isFetchedAfterMount,isFetching:r.isFetching,isIdle:r.isIdle,isLoading:r.isLoading,isRefetching:r.isRefetching,isSuccess:r.isSuccess,refetch:r.refetch,status:r.status,internal:{dataUpdatedAt:r.dataUpdatedAt,errorUpdatedAt:r.errorUpdatedAt,failureCount:r.failureCount,isFetchedAfterMount:r.isFetchedAfterMount,isLoadingError:r.isLoadingError,isPaused:r.isPaused,isPlaceholderData:r.isPlaceholderData,isPreviousData:r.isPreviousData,isRefetchError:r.isRefetchError,isStale:r.isStale,remove:r.remove}};return r.defaultedOptions.notifyOnChangeProps?n:ke(n,r.observer)}var W=()=>K({context:k});function _({chainId:e}={}){return v.useSyncExternalStoreWithSelector(t=>oe({chainId:e},t),()=>Q({chainId:e}),()=>Q({chainId:e}),t=>t,(t,s)=>t.uid===s.uid)}function Pe({chainId:e}={}){return v.useSyncExternalStoreWithSelector(t=>he({chainId:e},t),()=>N({chainId:e}),()=>N({chainId:e}),t=>t,(t,s)=>(t==null?void 0:t.uid)===(s==null?void 0:s.uid))}function L({chainId:e}={}){return _({chainId:e}).chain.id}function qe(){const[,e]=u.useReducer(t=>t+1,0);return e}function I({chainId:e,scopeKey:t}){return[{entity:"blockNumber",chainId:e,scopeKey:t}]}function ve({queryKey:[{chainId:e}]}){return ye({chainId:e})}function xe({cacheTime:e=0,chainId:t,enabled:s=!0,scopeKey:i,staleTime:r,suspense:n,watch:c=!1,onBlock:o,onError:a,onSettled:w,onSuccess:C}={}){const f=L({chainId:t}),d=_({chainId:f}),l=Pe({chainId:f}),h=W();return u.useEffect(()=>!s||!c&&!o?void 0:(l??d).watchBlockNumber({onBlockNumber:S=>{c&&h.setQueryData(I({chainId:f,scopeKey:i}),S),o&&o(S)},emitOnBegin:!0}),[f,i,o,d,h,c,l,s]),M(I({scopeKey:i,chainId:f}),ve,{cacheTime:e,enabled:s,staleTime:r,suspense:n,onError:a,onSettled:w,onSuccess:C})}function Fe({chainId:e,enabled:t,queryKey:s}){const i=W(),r=u.useCallback(()=>i.invalidateQueries({queryKey:s},{cancelRefetch:!1}),[i,s]);xe({chainId:e,enabled:t,onBlock:t?r:void 0,scopeKey:t?void 0:"idle"})}var q=e=>typeof e=="object"&&!Array.isArray(e);function T(e,t,s=t,i=ce){const r=u.useRef([]),n=v.useSyncExternalStoreWithSelector(e,t,s,c=>c,(c,o)=>{if(q(c)&&q(o)&&r.current.length){for(const a of r.current)if(!i(c[a],o[a]))return!1;return!0}return i(c,o)});if(q(n)){const c={...n};return Object.defineProperties(c,Object.entries(c).reduce((o,[a,w])=>({...o,[a]:{configurable:!1,enumerable:!0,get:()=>(r.current.includes(a)||r.current.push(a),w)}}),{})),c}return n}function ze({onConnect:e,onDisconnect:t}={}){const s=R(),i=u.useCallback(o=>ue(o),[s]),r=T(i,ae),n=u.useRef(),c=n.current;return u.useEffect(()=>{(c==null?void 0:c.status)!=="connected"&&r.status==="connected"&&(e==null||e({address:r.address,connector:r.connector,isReconnected:(c==null?void 0:c.status)==="reconnecting"||(c==null?void 0:c.status)===void 0})),(c==null?void 0:c.status)==="connected"&&r.status==="disconnected"&&(t==null||t()),n.current=r},[e,t,c,r]),r}function Oe({address:e,chainId:t,formatUnits:s,scopeKey:i,token:r}){return[{entity:"balance",address:e,chainId:t,formatUnits:s,scopeKey:i,token:r}]}function Ae({queryKey:[{address:e,chainId:t,formatUnits:s,token:i}]}){if(!e)throw new Error("address is required");return we({address:e,chainId:t,formatUnits:s,token:i})}function De({address:e,cacheTime:t,chainId:s,enabled:i=!0,formatUnits:r,scopeKey:n,staleTime:c,suspense:o,token:a,watch:w,onError:C,onSettled:f,onSuccess:d}={}){const l=L({chainId:s}),h=u.useMemo(()=>Oe({address:e,chainId:l,formatUnits:r,scopeKey:n,token:a}),[e,l,r,n,a]),b=M(h,Ae,{cacheTime:t,enabled:!!(i&&e),staleTime:c,suspense:o,onError:C,onSettled:f,onSuccess:d});return Fe({chainId:l,enabled:!!(i&&w&&e),queryKey:h}),b}var Qe=e=>[{entity:"connect",...e}],Ne=e=>{const{connector:t,chainId:s}=e;if(!t)throw new Error("connector is required");return fe({connector:t,chainId:s})};function $e({chainId:e,connector:t,onError:s,onMutate:i,onSettled:r,onSuccess:n}={}){const c=R(),{data:o,error:a,isError:w,isIdle:C,isLoading:f,isSuccess:d,mutate:l,mutateAsync:h,reset:b,status:p,variables:S}=x(Qe({connector:t,chainId:e}),Ne,{onError:s,onMutate:i,onSettled:r,onSuccess:n}),m=u.useCallback(y=>l({chainId:(y==null?void 0:y.chainId)??e,connector:(y==null?void 0:y.connector)??t}),[e,t,l]),P=u.useCallback(y=>h({chainId:(y==null?void 0:y.chainId)??e,connector:(y==null?void 0:y.connector)??t}),[e,t,h]);return{connect:m,connectAsync:P,connectors:c.connectors,data:o,error:a,isError:w,isIdle:C,isLoading:f,isSuccess:d,pendingConnector:S==null?void 0:S.connector,reset:b,status:p,variables:S}}var je=[{entity:"disconnect"}],Ie=()=>le();function He({onError:e,onMutate:t,onSettled:s,onSuccess:i}={}){const{error:r,isError:n,isIdle:c,isLoading:o,isSuccess:a,mutate:w,mutateAsync:C,reset:f,status:d}=x(je,Ie,{...e?{onError(l,h,b){e(l,b)}}:{},onMutate:t,...s?{onSettled(l,h,b,p){s(h,p)}}:{},...i?{onSuccess(l,h,b){i(b)}}:{}});return{disconnect:w,disconnectAsync:C,error:r,isError:n,isIdle:c,isLoading:o,isSuccess:a,reset:f,status:d}}function Je(){const e=R(),t=u.useCallback(s=>ne(s),[e]);return T(t,ie)}var Ke=e=>[{entity:"switchNetwork",...e}],Be=e=>{const{chainId:t}=e;if(!t)throw new Error("chainId is required");return de({chainId:t})};function Ge({chainId:e,throwForSwitchChainNotSupported:t,onError:s,onMutate:i,onSettled:r,onSuccess:n}={}){var A;const c=R(),o=qe(),{data:a,error:w,isError:C,isIdle:f,isLoading:d,isSuccess:l,mutate:h,mutateAsync:b,reset:p,status:S,variables:m}=x(Ke({chainId:e}),Be,{onError:s,onMutate:i,onSettled:r,onSuccess:n}),P=u.useCallback(g=>h({chainId:g??e}),[e,h]),y=u.useCallback(g=>b({chainId:g??e}),[e,b]);u.useEffect(()=>c.subscribe(({chains:z,connector:D})=>({chains:z,connector:D}),o),[c,o]);let F,O;const U=!!((A=c.connector)!=null&&A.switchChain);return(t||U)&&(F=P,O=y),{chains:c.chains??[],data:a,error:w,isError:C,isIdle:f,isLoading:d,isSuccess:l,pendingChainId:m==null?void 0:m.chainId,reset:p,status:S,switchNetwork:F,switchNetworkAsync:O,variables:m}}export{Ue as W,$e as a,He as b,Te as c,L as d,Ge as e,De as f,Je as g,ze as u};
