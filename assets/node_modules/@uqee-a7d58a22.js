var m={},F;function b(){if(F)return m;F=1,Object.defineProperty(m,"__esModule",{value:!0}),m.BlackScholes=void 0;class T{static NDF(t){return Math.exp(-(t*t)/2)/Math.sqrt(2*Math.PI)}static CNDFs(t){const i=.31938153,c=-.356563782,e=1.781477937,s=-1.821255978,n=1.330274429;let o,a;return t<0?1-T.CNDFs(-t):t>6?1:(o=1/(1+.2316419*t),a=((((n*o+s)*o+e)*o+c)*o+i)*o,1-T.NDF(t)*a)}static CNDFd(t){const i=Math.sqrt(2*Math.PI),c=7.07106781186547,e=220.206867912376,s=221.213596169931,n=112.079291497871,o=33.912866078383,a=6.37396220353165,h=.700383064443688,p=.0352624965998911,l=440.413735824752,M=793.826512519948,u=637.333633378831,N=296.564248779674,d=86.7807322029461,S=16.064177579207,g=1.75566716318264,R=.0883883476483184,r=Math.abs(t);let v=0,C,D,f;return r<=37&&(C=Math.exp(-r*r/2),r<c?(D=(((((p*r+h)*r+a)*r+o)*r+n)*r+s)*r+e,f=((((((R*r+g)*r+S)*r+d)*r+N)*r+u)*r+M)*r+l,v=C*D/f):(f=r+1/(r+2/(r+3/(r+4/(r+13/20)))),v=C/(i*f))),t<=0?v:1-v}static probability(t,i,c,e){const s=e*Math.sqrt(c),o=Math.log(i/t)/s,a=Math.floor(1/(1+.2316419*Math.abs(o))*1e5)/1e5,h=Math.floor(.3989423*Math.exp(-(o*o)/2)*1e5)/1e5,p=1.330274*Math.pow(a,5),l=1.821256*Math.pow(a,4),M=1.781478*Math.pow(a,3),u=.356538*Math.pow(a,2),N=.3193815*a;let d=1-h*(p-l+M-u+N);d=Math.floor(d*1e5)/1e5,o<0&&(d=1-d);const S=Math.floor(d*1e3)/10,g=Math.floor((1-d)*1e3)/10;return[S,g]}constructor(t){var i,c,e,s;this.CNDF=(t==null?void 0:t.sigmaToPricePrecision)==="double"?T.CNDFd:T.CNDFs,this.priceToSigmaAccuracy=(i=t==null?void 0:t.priceToSigmaAccuracy)!==null&&i!==void 0?i:.001,this.priceToSigmaBLeft=(c=t==null?void 0:t.priceToSigmaBLeft)!==null&&c!==void 0?c:0,this.priceToSigmaBRight=(e=t==null?void 0:t.priceToSigmaBRight)!==null&&e!==void 0?e:2,this.priceToSigmaMethod=(t==null?void 0:t.priceToSigmaMethod)==="newton-raphson"?this.priceToSigmaNR.bind(this):this.priceToSigmaB.bind(this),this.priceToSigmaNRIterations=(s=t==null?void 0:t.priceToSigmaNRIteractions)!==null&&s!==void 0?s:10}option(t){const{rate:i,sigma:c,strike:e,time:s,type:n,underlying:o}=t;return this.sigmaToPrice(i,c,e,s,n==="call",o)}sigma(t){const{price:i,rate:c,strike:e,time:s,type:n,underlying:o}=t;return this.priceToSigma(i,c,e,s,n==="call",o)}sigmaToPrice(t,i,c,e,s,n){const o=Math.sqrt(e),a=Math.exp(-t*e),h=(Math.log(n/c)+t*e)/(i*o)+.5*(i*o),p=h-i*o,l=s?this.CNDF(h):-this.CNDF(-h),M=s?this.CNDF(p):-this.CNDF(-p),u=T.NDF(h);return{delta:l,gamma:u/(n*i*o),price:n*l-c*a*M,rho:c*e*a*M,theta:n*i*u/(2*o)+t*c*a*M,vega:n*o*u}}priceToSigma(t,i,c,e,s,n){const o=this.sigmaToPrice(i,0,c,e,s,n).price;return t===o?0:t>o?this.priceToSigmaMethod(t,i,c,e,s,n):-this.priceToSigmaMethod(o+(o-t),i,c,e,s,n)}priceToSigmaB(t,i,c,e,s,n){const o=this.priceToSigmaAccuracy;let a=this.priceToSigmaBLeft,h=this.priceToSigmaBRight;const p=Math.round(Math.log((h-a)/o)/Math.LN2)+10;let l,M,u;for(let N=0;N<p;N++){if(l=(a+h)/2,M=this.sigmaToPrice(i,l,c,e,s,n),u=M.price-t,Math.abs(u)<o)return l;u>0?h=l:a=l}return 0}priceToSigmaNR(t,i,c,e,s,n){const o=this.priceToSigmaAccuracy,a=this.priceToSigmaNRIterations;let h=Math.sqrt(2*Math.PI/e)*t/n,p,l;for(let M=0;M<a;M++){if(p=this.sigmaToPrice(i,h,c,e,s,n),l=p.price-t,Math.abs(l)<o)return h;if(p.vega===0)return 0;h-=l/p.vega}return 0}}return m.BlackScholes=T,m}export{b as r};
